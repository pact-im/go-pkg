<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: arith_amd64.s in package math/big</title>
<link href="../../../css/auto-v0.7.6.css" rel="stylesheet">
<script src="../../../jvs/golds-v0.7.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	arith_amd64.s

<span class="title">Belonging Package</span>
	<a href="../../../pkg/math/big.html">math/big</a>
</code></pre>

<pre class="line-numbers">
<span class="codeline" id="line-1"><code>// Copyright 2025 The Go Authors. All rights reserved.</code></span>
<span class="codeline" id="line-2"><code>// Use of this source code is governed by a BSD-style</code></span>
<span class="codeline" id="line-3"><code>// license that can be found in the LICENSE file.</code></span>
<span class="codeline" id="line-4"><code></code></span>
<span class="codeline" id="line-5"><code>// Code generated by 'go generate' (with ./internal/asmgen). DO NOT EDIT.</code></span>
<span class="codeline" id="line-6"><code></code></span>
<span class="codeline" id="line-7"><code>//go:build !math_big_pure_go</code></span>
<span class="codeline" id="line-8"><code></code></span>
<span class="codeline" id="line-9"><code>#include "textflag.h"</code></span>
<span class="codeline" id="line-10"><code></code></span>
<span class="codeline" id="line-11"><code>// func addVV(z, x, y []Word) (c Word)</code></span>
<span class="codeline" id="line-12"><code>TEXT ·addVV(SB), NOSPLIT, $0</code></span>
<span class="codeline" id="line-13"><code>	MOVQ z_len+8(FP), BX</code></span>
<span class="codeline" id="line-14"><code>	MOVQ x_base+24(FP), SI</code></span>
<span class="codeline" id="line-15"><code>	MOVQ y_base+48(FP), DI</code></span>
<span class="codeline" id="line-16"><code>	MOVQ z_base+0(FP), R8</code></span>
<span class="codeline" id="line-17"><code>	// compute unrolled loop lengths</code></span>
<span class="codeline" id="line-18"><code>	MOVQ BX, R9</code></span>
<span class="codeline" id="line-19"><code>	ANDQ $3, R9</code></span>
<span class="codeline" id="line-20"><code>	SHRQ $2, BX</code></span>
<span class="codeline" id="line-21"><code>	MOVQ $0, R10	// clear saved carry</code></span>
<span class="codeline" id="line-22"><code>loop1:</code></span>
<span class="codeline" id="line-23"><code>	TESTQ R9, R9; JZ loop1done</code></span>
<span class="codeline" id="line-24"><code>loop1cont:</code></span>
<span class="codeline" id="line-25"><code>	// unroll 1X</code></span>
<span class="codeline" id="line-26"><code>	ADDQ R10, R10	// restore carry</code></span>
<span class="codeline" id="line-27"><code>	MOVQ 0(SI), R10</code></span>
<span class="codeline" id="line-28"><code>	ADCQ 0(DI), R10</code></span>
<span class="codeline" id="line-29"><code>	MOVQ R10, 0(R8)</code></span>
<span class="codeline" id="line-30"><code>	SBBQ R10, R10	// save carry</code></span>
<span class="codeline" id="line-31"><code>	LEAQ 8(SI), SI	// ADD $8, SI</code></span>
<span class="codeline" id="line-32"><code>	LEAQ 8(DI), DI	// ADD $8, DI</code></span>
<span class="codeline" id="line-33"><code>	LEAQ 8(R8), R8	// ADD $8, R8</code></span>
<span class="codeline" id="line-34"><code>	SUBQ $1, R9; JNZ loop1cont</code></span>
<span class="codeline" id="line-35"><code>loop1done:</code></span>
<span class="codeline" id="line-36"><code>loop4:</code></span>
<span class="codeline" id="line-37"><code>	TESTQ BX, BX; JZ loop4done</code></span>
<span class="codeline" id="line-38"><code>loop4cont:</code></span>
<span class="codeline" id="line-39"><code>	// unroll 4X</code></span>
<span class="codeline" id="line-40"><code>	ADDQ R10, R10	// restore carry</code></span>
<span class="codeline" id="line-41"><code>	MOVQ 0(SI), R9</code></span>
<span class="codeline" id="line-42"><code>	MOVQ 8(SI), R10</code></span>
<span class="codeline" id="line-43"><code>	MOVQ 16(SI), R11</code></span>
<span class="codeline" id="line-44"><code>	MOVQ 24(SI), R12</code></span>
<span class="codeline" id="line-45"><code>	ADCQ 0(DI), R9</code></span>
<span class="codeline" id="line-46"><code>	ADCQ 8(DI), R10</code></span>
<span class="codeline" id="line-47"><code>	ADCQ 16(DI), R11</code></span>
<span class="codeline" id="line-48"><code>	ADCQ 24(DI), R12</code></span>
<span class="codeline" id="line-49"><code>	MOVQ R9, 0(R8)</code></span>
<span class="codeline" id="line-50"><code>	MOVQ R10, 8(R8)</code></span>
<span class="codeline" id="line-51"><code>	MOVQ R11, 16(R8)</code></span>
<span class="codeline" id="line-52"><code>	MOVQ R12, 24(R8)</code></span>
<span class="codeline" id="line-53"><code>	SBBQ R10, R10	// save carry</code></span>
<span class="codeline" id="line-54"><code>	LEAQ 32(SI), SI	// ADD $32, SI</code></span>
<span class="codeline" id="line-55"><code>	LEAQ 32(DI), DI	// ADD $32, DI</code></span>
<span class="codeline" id="line-56"><code>	LEAQ 32(R8), R8	// ADD $32, R8</code></span>
<span class="codeline" id="line-57"><code>	SUBQ $1, BX; JNZ loop4cont</code></span>
<span class="codeline" id="line-58"><code>loop4done:</code></span>
<span class="codeline" id="line-59"><code>	NEGQ R10	// convert add carry</code></span>
<span class="codeline" id="line-60"><code>	MOVQ R10, c+72(FP)</code></span>
<span class="codeline" id="line-61"><code>	RET</code></span>
<span class="codeline" id="line-62"><code></code></span>
<span class="codeline" id="line-63"><code>// func subVV(z, x, y []Word) (c Word)</code></span>
<span class="codeline" id="line-64"><code>TEXT ·subVV(SB), NOSPLIT, $0</code></span>
<span class="codeline" id="line-65"><code>	MOVQ z_len+8(FP), BX</code></span>
<span class="codeline" id="line-66"><code>	MOVQ x_base+24(FP), SI</code></span>
<span class="codeline" id="line-67"><code>	MOVQ y_base+48(FP), DI</code></span>
<span class="codeline" id="line-68"><code>	MOVQ z_base+0(FP), R8</code></span>
<span class="codeline" id="line-69"><code>	// compute unrolled loop lengths</code></span>
<span class="codeline" id="line-70"><code>	MOVQ BX, R9</code></span>
<span class="codeline" id="line-71"><code>	ANDQ $3, R9</code></span>
<span class="codeline" id="line-72"><code>	SHRQ $2, BX</code></span>
<span class="codeline" id="line-73"><code>	MOVQ $0, R10	// clear saved carry</code></span>
<span class="codeline" id="line-74"><code>loop1:</code></span>
<span class="codeline" id="line-75"><code>	TESTQ R9, R9; JZ loop1done</code></span>
<span class="codeline" id="line-76"><code>loop1cont:</code></span>
<span class="codeline" id="line-77"><code>	// unroll 1X</code></span>
<span class="codeline" id="line-78"><code>	ADDQ R10, R10	// restore carry</code></span>
<span class="codeline" id="line-79"><code>	MOVQ 0(SI), R10</code></span>
<span class="codeline" id="line-80"><code>	SBBQ 0(DI), R10</code></span>
<span class="codeline" id="line-81"><code>	MOVQ R10, 0(R8)</code></span>
<span class="codeline" id="line-82"><code>	SBBQ R10, R10	// save carry</code></span>
<span class="codeline" id="line-83"><code>	LEAQ 8(SI), SI	// ADD $8, SI</code></span>
<span class="codeline" id="line-84"><code>	LEAQ 8(DI), DI	// ADD $8, DI</code></span>
<span class="codeline" id="line-85"><code>	LEAQ 8(R8), R8	// ADD $8, R8</code></span>
<span class="codeline" id="line-86"><code>	SUBQ $1, R9; JNZ loop1cont</code></span>
<span class="codeline" id="line-87"><code>loop1done:</code></span>
<span class="codeline" id="line-88"><code>loop4:</code></span>
<span class="codeline" id="line-89"><code>	TESTQ BX, BX; JZ loop4done</code></span>
<span class="codeline" id="line-90"><code>loop4cont:</code></span>
<span class="codeline" id="line-91"><code>	// unroll 4X</code></span>
<span class="codeline" id="line-92"><code>	ADDQ R10, R10	// restore carry</code></span>
<span class="codeline" id="line-93"><code>	MOVQ 0(SI), R9</code></span>
<span class="codeline" id="line-94"><code>	MOVQ 8(SI), R10</code></span>
<span class="codeline" id="line-95"><code>	MOVQ 16(SI), R11</code></span>
<span class="codeline" id="line-96"><code>	MOVQ 24(SI), R12</code></span>
<span class="codeline" id="line-97"><code>	SBBQ 0(DI), R9</code></span>
<span class="codeline" id="line-98"><code>	SBBQ 8(DI), R10</code></span>
<span class="codeline" id="line-99"><code>	SBBQ 16(DI), R11</code></span>
<span class="codeline" id="line-100"><code>	SBBQ 24(DI), R12</code></span>
<span class="codeline" id="line-101"><code>	MOVQ R9, 0(R8)</code></span>
<span class="codeline" id="line-102"><code>	MOVQ R10, 8(R8)</code></span>
<span class="codeline" id="line-103"><code>	MOVQ R11, 16(R8)</code></span>
<span class="codeline" id="line-104"><code>	MOVQ R12, 24(R8)</code></span>
<span class="codeline" id="line-105"><code>	SBBQ R10, R10	// save carry</code></span>
<span class="codeline" id="line-106"><code>	LEAQ 32(SI), SI	// ADD $32, SI</code></span>
<span class="codeline" id="line-107"><code>	LEAQ 32(DI), DI	// ADD $32, DI</code></span>
<span class="codeline" id="line-108"><code>	LEAQ 32(R8), R8	// ADD $32, R8</code></span>
<span class="codeline" id="line-109"><code>	SUBQ $1, BX; JNZ loop4cont</code></span>
<span class="codeline" id="line-110"><code>loop4done:</code></span>
<span class="codeline" id="line-111"><code>	NEGQ R10	// convert sub carry</code></span>
<span class="codeline" id="line-112"><code>	MOVQ R10, c+72(FP)</code></span>
<span class="codeline" id="line-113"><code>	RET</code></span>
<span class="codeline" id="line-114"><code></code></span>
<span class="codeline" id="line-115"><code>// func lshVU(z, x []Word, s uint) (c Word)</code></span>
<span class="codeline" id="line-116"><code>TEXT ·lshVU(SB), NOSPLIT, $0</code></span>
<span class="codeline" id="line-117"><code>	MOVQ z_len+8(FP), BX</code></span>
<span class="codeline" id="line-118"><code>	TESTQ BX, BX; JZ ret0</code></span>
<span class="codeline" id="line-119"><code>	MOVQ s+48(FP), CX</code></span>
<span class="codeline" id="line-120"><code>	MOVQ x_base+24(FP), SI</code></span>
<span class="codeline" id="line-121"><code>	MOVQ z_base+0(FP), DI</code></span>
<span class="codeline" id="line-122"><code>	// run loop backward</code></span>
<span class="codeline" id="line-123"><code>	LEAQ (SI)(BX*8), SI</code></span>
<span class="codeline" id="line-124"><code>	LEAQ (DI)(BX*8), DI</code></span>
<span class="codeline" id="line-125"><code>	// shift first word into carry</code></span>
<span class="codeline" id="line-126"><code>	MOVQ -8(SI), R8</code></span>
<span class="codeline" id="line-127"><code>	MOVQ $0, R9</code></span>
<span class="codeline" id="line-128"><code>	SHLQ CX, R8, R9</code></span>
<span class="codeline" id="line-129"><code>	MOVQ R9, c+56(FP)</code></span>
<span class="codeline" id="line-130"><code>	// shift remaining words</code></span>
<span class="codeline" id="line-131"><code>	SUBQ $1, BX</code></span>
<span class="codeline" id="line-132"><code>	// compute unrolled loop lengths</code></span>
<span class="codeline" id="line-133"><code>	MOVQ BX, R9</code></span>
<span class="codeline" id="line-134"><code>	ANDQ $3, R9</code></span>
<span class="codeline" id="line-135"><code>	SHRQ $2, BX</code></span>
<span class="codeline" id="line-136"><code>loop1:</code></span>
<span class="codeline" id="line-137"><code>	TESTQ R9, R9; JZ loop1done</code></span>
<span class="codeline" id="line-138"><code>loop1cont:</code></span>
<span class="codeline" id="line-139"><code>	// unroll 1X</code></span>
<span class="codeline" id="line-140"><code>	MOVQ -16(SI), R10</code></span>
<span class="codeline" id="line-141"><code>	SHLQ CX, R10, R8</code></span>
<span class="codeline" id="line-142"><code>	MOVQ R8, -8(DI)</code></span>
<span class="codeline" id="line-143"><code>	MOVQ R10, R8</code></span>
<span class="codeline" id="line-144"><code>	LEAQ -8(SI), SI	// ADD $-8, SI</code></span>
<span class="codeline" id="line-145"><code>	LEAQ -8(DI), DI	// ADD $-8, DI</code></span>
<span class="codeline" id="line-146"><code>	SUBQ $1, R9; JNZ loop1cont</code></span>
<span class="codeline" id="line-147"><code>loop1done:</code></span>
<span class="codeline" id="line-148"><code>loop4:</code></span>
<span class="codeline" id="line-149"><code>	TESTQ BX, BX; JZ loop4done</code></span>
<span class="codeline" id="line-150"><code>loop4cont:</code></span>
<span class="codeline" id="line-151"><code>	// unroll 4X</code></span>
<span class="codeline" id="line-152"><code>	MOVQ -16(SI), R9</code></span>
<span class="codeline" id="line-153"><code>	MOVQ -24(SI), R10</code></span>
<span class="codeline" id="line-154"><code>	MOVQ -32(SI), R11</code></span>
<span class="codeline" id="line-155"><code>	MOVQ -40(SI), R12</code></span>
<span class="codeline" id="line-156"><code>	SHLQ CX, R9, R8</code></span>
<span class="codeline" id="line-157"><code>	SHLQ CX, R10, R9</code></span>
<span class="codeline" id="line-158"><code>	SHLQ CX, R11, R10</code></span>
<span class="codeline" id="line-159"><code>	SHLQ CX, R12, R11</code></span>
<span class="codeline" id="line-160"><code>	MOVQ R8, -8(DI)</code></span>
<span class="codeline" id="line-161"><code>	MOVQ R9, -16(DI)</code></span>
<span class="codeline" id="line-162"><code>	MOVQ R10, -24(DI)</code></span>
<span class="codeline" id="line-163"><code>	MOVQ R11, -32(DI)</code></span>
<span class="codeline" id="line-164"><code>	MOVQ R12, R8</code></span>
<span class="codeline" id="line-165"><code>	LEAQ -32(SI), SI	// ADD $-32, SI</code></span>
<span class="codeline" id="line-166"><code>	LEAQ -32(DI), DI	// ADD $-32, DI</code></span>
<span class="codeline" id="line-167"><code>	SUBQ $1, BX; JNZ loop4cont</code></span>
<span class="codeline" id="line-168"><code>loop4done:</code></span>
<span class="codeline" id="line-169"><code>	// store final shifted bits</code></span>
<span class="codeline" id="line-170"><code>	SHLQ CX, R8</code></span>
<span class="codeline" id="line-171"><code>	MOVQ R8, -8(DI)</code></span>
<span class="codeline" id="line-172"><code>	RET</code></span>
<span class="codeline" id="line-173"><code>ret0:</code></span>
<span class="codeline" id="line-174"><code>	MOVQ $0, c+56(FP)</code></span>
<span class="codeline" id="line-175"><code>	RET</code></span>
<span class="codeline" id="line-176"><code></code></span>
<span class="codeline" id="line-177"><code>// func rshVU(z, x []Word, s uint) (c Word)</code></span>
<span class="codeline" id="line-178"><code>TEXT ·rshVU(SB), NOSPLIT, $0</code></span>
<span class="codeline" id="line-179"><code>	MOVQ z_len+8(FP), BX</code></span>
<span class="codeline" id="line-180"><code>	TESTQ BX, BX; JZ ret0</code></span>
<span class="codeline" id="line-181"><code>	MOVQ s+48(FP), CX</code></span>
<span class="codeline" id="line-182"><code>	MOVQ x_base+24(FP), SI</code></span>
<span class="codeline" id="line-183"><code>	MOVQ z_base+0(FP), DI</code></span>
<span class="codeline" id="line-184"><code>	// shift first word into carry</code></span>
<span class="codeline" id="line-185"><code>	MOVQ 0(SI), R8</code></span>
<span class="codeline" id="line-186"><code>	MOVQ $0, R9</code></span>
<span class="codeline" id="line-187"><code>	SHRQ CX, R8, R9</code></span>
<span class="codeline" id="line-188"><code>	MOVQ R9, c+56(FP)</code></span>
<span class="codeline" id="line-189"><code>	// shift remaining words</code></span>
<span class="codeline" id="line-190"><code>	SUBQ $1, BX</code></span>
<span class="codeline" id="line-191"><code>	// compute unrolled loop lengths</code></span>
<span class="codeline" id="line-192"><code>	MOVQ BX, R9</code></span>
<span class="codeline" id="line-193"><code>	ANDQ $3, R9</code></span>
<span class="codeline" id="line-194"><code>	SHRQ $2, BX</code></span>
<span class="codeline" id="line-195"><code>loop1:</code></span>
<span class="codeline" id="line-196"><code>	TESTQ R9, R9; JZ loop1done</code></span>
<span class="codeline" id="line-197"><code>loop1cont:</code></span>
<span class="codeline" id="line-198"><code>	// unroll 1X</code></span>
<span class="codeline" id="line-199"><code>	MOVQ 8(SI), R10</code></span>
<span class="codeline" id="line-200"><code>	SHRQ CX, R10, R8</code></span>
<span class="codeline" id="line-201"><code>	MOVQ R8, 0(DI)</code></span>
<span class="codeline" id="line-202"><code>	MOVQ R10, R8</code></span>
<span class="codeline" id="line-203"><code>	LEAQ 8(SI), SI	// ADD $8, SI</code></span>
<span class="codeline" id="line-204"><code>	LEAQ 8(DI), DI	// ADD $8, DI</code></span>
<span class="codeline" id="line-205"><code>	SUBQ $1, R9; JNZ loop1cont</code></span>
<span class="codeline" id="line-206"><code>loop1done:</code></span>
<span class="codeline" id="line-207"><code>loop4:</code></span>
<span class="codeline" id="line-208"><code>	TESTQ BX, BX; JZ loop4done</code></span>
<span class="codeline" id="line-209"><code>loop4cont:</code></span>
<span class="codeline" id="line-210"><code>	// unroll 4X</code></span>
<span class="codeline" id="line-211"><code>	MOVQ 8(SI), R9</code></span>
<span class="codeline" id="line-212"><code>	MOVQ 16(SI), R10</code></span>
<span class="codeline" id="line-213"><code>	MOVQ 24(SI), R11</code></span>
<span class="codeline" id="line-214"><code>	MOVQ 32(SI), R12</code></span>
<span class="codeline" id="line-215"><code>	SHRQ CX, R9, R8</code></span>
<span class="codeline" id="line-216"><code>	SHRQ CX, R10, R9</code></span>
<span class="codeline" id="line-217"><code>	SHRQ CX, R11, R10</code></span>
<span class="codeline" id="line-218"><code>	SHRQ CX, R12, R11</code></span>
<span class="codeline" id="line-219"><code>	MOVQ R8, 0(DI)</code></span>
<span class="codeline" id="line-220"><code>	MOVQ R9, 8(DI)</code></span>
<span class="codeline" id="line-221"><code>	MOVQ R10, 16(DI)</code></span>
<span class="codeline" id="line-222"><code>	MOVQ R11, 24(DI)</code></span>
<span class="codeline" id="line-223"><code>	MOVQ R12, R8</code></span>
<span class="codeline" id="line-224"><code>	LEAQ 32(SI), SI	// ADD $32, SI</code></span>
<span class="codeline" id="line-225"><code>	LEAQ 32(DI), DI	// ADD $32, DI</code></span>
<span class="codeline" id="line-226"><code>	SUBQ $1, BX; JNZ loop4cont</code></span>
<span class="codeline" id="line-227"><code>loop4done:</code></span>
<span class="codeline" id="line-228"><code>	// store final shifted bits</code></span>
<span class="codeline" id="line-229"><code>	SHRQ CX, R8</code></span>
<span class="codeline" id="line-230"><code>	MOVQ R8, 0(DI)</code></span>
<span class="codeline" id="line-231"><code>	RET</code></span>
<span class="codeline" id="line-232"><code>ret0:</code></span>
<span class="codeline" id="line-233"><code>	MOVQ $0, c+56(FP)</code></span>
<span class="codeline" id="line-234"><code>	RET</code></span>
<span class="codeline" id="line-235"><code></code></span>
<span class="codeline" id="line-236"><code>// func mulAddVWW(z, x []Word, m, a Word) (c Word)</code></span>
<span class="codeline" id="line-237"><code>TEXT ·mulAddVWW(SB), NOSPLIT, $0</code></span>
<span class="codeline" id="line-238"><code>	MOVQ m+48(FP), BX</code></span>
<span class="codeline" id="line-239"><code>	MOVQ a+56(FP), SI</code></span>
<span class="codeline" id="line-240"><code>	MOVQ z_len+8(FP), DI</code></span>
<span class="codeline" id="line-241"><code>	MOVQ x_base+24(FP), R8</code></span>
<span class="codeline" id="line-242"><code>	MOVQ z_base+0(FP), R9</code></span>
<span class="codeline" id="line-243"><code>	// compute unrolled loop lengths</code></span>
<span class="codeline" id="line-244"><code>	MOVQ DI, R10</code></span>
<span class="codeline" id="line-245"><code>	ANDQ $3, R10</code></span>
<span class="codeline" id="line-246"><code>	SHRQ $2, DI</code></span>
<span class="codeline" id="line-247"><code>loop1:</code></span>
<span class="codeline" id="line-248"><code>	TESTQ R10, R10; JZ loop1done</code></span>
<span class="codeline" id="line-249"><code>loop1cont:</code></span>
<span class="codeline" id="line-250"><code>	// unroll 1X in batches of 1</code></span>
<span class="codeline" id="line-251"><code>	MOVQ 0(R8), AX</code></span>
<span class="codeline" id="line-252"><code>	// multiply</code></span>
<span class="codeline" id="line-253"><code>	MULQ BX</code></span>
<span class="codeline" id="line-254"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-255"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-256"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-257"><code>	MOVQ AX, 0(R9)</code></span>
<span class="codeline" id="line-258"><code>	LEAQ 8(R8), R8	// ADD $8, R8</code></span>
<span class="codeline" id="line-259"><code>	LEAQ 8(R9), R9	// ADD $8, R9</code></span>
<span class="codeline" id="line-260"><code>	SUBQ $1, R10; JNZ loop1cont</code></span>
<span class="codeline" id="line-261"><code>loop1done:</code></span>
<span class="codeline" id="line-262"><code>loop4:</code></span>
<span class="codeline" id="line-263"><code>	TESTQ DI, DI; JZ loop4done</code></span>
<span class="codeline" id="line-264"><code>loop4cont:</code></span>
<span class="codeline" id="line-265"><code>	// unroll 4X in batches of 1</code></span>
<span class="codeline" id="line-266"><code>	MOVQ 0(R8), AX</code></span>
<span class="codeline" id="line-267"><code>	// multiply</code></span>
<span class="codeline" id="line-268"><code>	MULQ BX</code></span>
<span class="codeline" id="line-269"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-270"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-271"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-272"><code>	MOVQ AX, 0(R9)</code></span>
<span class="codeline" id="line-273"><code>	MOVQ 8(R8), AX</code></span>
<span class="codeline" id="line-274"><code>	// multiply</code></span>
<span class="codeline" id="line-275"><code>	MULQ BX</code></span>
<span class="codeline" id="line-276"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-277"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-278"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-279"><code>	MOVQ AX, 8(R9)</code></span>
<span class="codeline" id="line-280"><code>	MOVQ 16(R8), AX</code></span>
<span class="codeline" id="line-281"><code>	// multiply</code></span>
<span class="codeline" id="line-282"><code>	MULQ BX</code></span>
<span class="codeline" id="line-283"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-284"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-285"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-286"><code>	MOVQ AX, 16(R9)</code></span>
<span class="codeline" id="line-287"><code>	MOVQ 24(R8), AX</code></span>
<span class="codeline" id="line-288"><code>	// multiply</code></span>
<span class="codeline" id="line-289"><code>	MULQ BX</code></span>
<span class="codeline" id="line-290"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-291"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-292"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-293"><code>	MOVQ AX, 24(R9)</code></span>
<span class="codeline" id="line-294"><code>	LEAQ 32(R8), R8	// ADD $32, R8</code></span>
<span class="codeline" id="line-295"><code>	LEAQ 32(R9), R9	// ADD $32, R9</code></span>
<span class="codeline" id="line-296"><code>	SUBQ $1, DI; JNZ loop4cont</code></span>
<span class="codeline" id="line-297"><code>loop4done:</code></span>
<span class="codeline" id="line-298"><code>	MOVQ SI, c+64(FP)</code></span>
<span class="codeline" id="line-299"><code>	RET</code></span>
<span class="codeline" id="line-300"><code></code></span>
<span class="codeline" id="line-301"><code>// func addMulVVWW(z, x, y []Word, m, a Word) (c Word)</code></span>
<span class="codeline" id="line-302"><code>TEXT ·addMulVVWW(SB), NOSPLIT, $0</code></span>
<span class="codeline" id="line-303"><code>	CMPB ·hasADX(SB), $0; JNZ altcarry</code></span>
<span class="codeline" id="line-304"><code>	MOVQ m+72(FP), BX</code></span>
<span class="codeline" id="line-305"><code>	MOVQ a+80(FP), SI</code></span>
<span class="codeline" id="line-306"><code>	MOVQ z_len+8(FP), DI</code></span>
<span class="codeline" id="line-307"><code>	MOVQ x_base+24(FP), R8</code></span>
<span class="codeline" id="line-308"><code>	MOVQ y_base+48(FP), R9</code></span>
<span class="codeline" id="line-309"><code>	MOVQ z_base+0(FP), R10</code></span>
<span class="codeline" id="line-310"><code>	// compute unrolled loop lengths</code></span>
<span class="codeline" id="line-311"><code>	MOVQ DI, R11</code></span>
<span class="codeline" id="line-312"><code>	ANDQ $3, R11</code></span>
<span class="codeline" id="line-313"><code>	SHRQ $2, DI</code></span>
<span class="codeline" id="line-314"><code>loop1:</code></span>
<span class="codeline" id="line-315"><code>	TESTQ R11, R11; JZ loop1done</code></span>
<span class="codeline" id="line-316"><code>loop1cont:</code></span>
<span class="codeline" id="line-317"><code>	// unroll 1X in batches of 1</code></span>
<span class="codeline" id="line-318"><code>	MOVQ 0(R9), AX</code></span>
<span class="codeline" id="line-319"><code>	// multiply</code></span>
<span class="codeline" id="line-320"><code>	MULQ BX</code></span>
<span class="codeline" id="line-321"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-322"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-323"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-324"><code>	// add</code></span>
<span class="codeline" id="line-325"><code>	ADDQ 0(R8), AX</code></span>
<span class="codeline" id="line-326"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-327"><code>	MOVQ AX, 0(R10)</code></span>
<span class="codeline" id="line-328"><code>	LEAQ 8(R8), R8	// ADD $8, R8</code></span>
<span class="codeline" id="line-329"><code>	LEAQ 8(R9), R9	// ADD $8, R9</code></span>
<span class="codeline" id="line-330"><code>	LEAQ 8(R10), R10	// ADD $8, R10</code></span>
<span class="codeline" id="line-331"><code>	SUBQ $1, R11; JNZ loop1cont</code></span>
<span class="codeline" id="line-332"><code>loop1done:</code></span>
<span class="codeline" id="line-333"><code>loop4:</code></span>
<span class="codeline" id="line-334"><code>	TESTQ DI, DI; JZ loop4done</code></span>
<span class="codeline" id="line-335"><code>loop4cont:</code></span>
<span class="codeline" id="line-336"><code>	// unroll 4X in batches of 1</code></span>
<span class="codeline" id="line-337"><code>	MOVQ 0(R9), AX</code></span>
<span class="codeline" id="line-338"><code>	// multiply</code></span>
<span class="codeline" id="line-339"><code>	MULQ BX</code></span>
<span class="codeline" id="line-340"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-341"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-342"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-343"><code>	// add</code></span>
<span class="codeline" id="line-344"><code>	ADDQ 0(R8), AX</code></span>
<span class="codeline" id="line-345"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-346"><code>	MOVQ AX, 0(R10)</code></span>
<span class="codeline" id="line-347"><code>	MOVQ 8(R9), AX</code></span>
<span class="codeline" id="line-348"><code>	// multiply</code></span>
<span class="codeline" id="line-349"><code>	MULQ BX</code></span>
<span class="codeline" id="line-350"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-351"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-352"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-353"><code>	// add</code></span>
<span class="codeline" id="line-354"><code>	ADDQ 8(R8), AX</code></span>
<span class="codeline" id="line-355"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-356"><code>	MOVQ AX, 8(R10)</code></span>
<span class="codeline" id="line-357"><code>	MOVQ 16(R9), AX</code></span>
<span class="codeline" id="line-358"><code>	// multiply</code></span>
<span class="codeline" id="line-359"><code>	MULQ BX</code></span>
<span class="codeline" id="line-360"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-361"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-362"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-363"><code>	// add</code></span>
<span class="codeline" id="line-364"><code>	ADDQ 16(R8), AX</code></span>
<span class="codeline" id="line-365"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-366"><code>	MOVQ AX, 16(R10)</code></span>
<span class="codeline" id="line-367"><code>	MOVQ 24(R9), AX</code></span>
<span class="codeline" id="line-368"><code>	// multiply</code></span>
<span class="codeline" id="line-369"><code>	MULQ BX</code></span>
<span class="codeline" id="line-370"><code>	ADDQ SI, AX</code></span>
<span class="codeline" id="line-371"><code>	MOVQ DX, SI</code></span>
<span class="codeline" id="line-372"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-373"><code>	// add</code></span>
<span class="codeline" id="line-374"><code>	ADDQ 24(R8), AX</code></span>
<span class="codeline" id="line-375"><code>	ADCQ $0, SI</code></span>
<span class="codeline" id="line-376"><code>	MOVQ AX, 24(R10)</code></span>
<span class="codeline" id="line-377"><code>	LEAQ 32(R8), R8	// ADD $32, R8</code></span>
<span class="codeline" id="line-378"><code>	LEAQ 32(R9), R9	// ADD $32, R9</code></span>
<span class="codeline" id="line-379"><code>	LEAQ 32(R10), R10	// ADD $32, R10</code></span>
<span class="codeline" id="line-380"><code>	SUBQ $1, DI; JNZ loop4cont</code></span>
<span class="codeline" id="line-381"><code>loop4done:</code></span>
<span class="codeline" id="line-382"><code>	MOVQ SI, c+88(FP)</code></span>
<span class="codeline" id="line-383"><code>	RET</code></span>
<span class="codeline" id="line-384"><code>altcarry:</code></span>
<span class="codeline" id="line-385"><code>	MOVQ m+72(FP), DX</code></span>
<span class="codeline" id="line-386"><code>	MOVQ a+80(FP), BX</code></span>
<span class="codeline" id="line-387"><code>	MOVQ z_len+8(FP), SI</code></span>
<span class="codeline" id="line-388"><code>	MOVQ $0, DI</code></span>
<span class="codeline" id="line-389"><code>	MOVQ x_base+24(FP), R8</code></span>
<span class="codeline" id="line-390"><code>	MOVQ y_base+48(FP), R9</code></span>
<span class="codeline" id="line-391"><code>	MOVQ z_base+0(FP), R10</code></span>
<span class="codeline" id="line-392"><code>	// compute unrolled loop lengths</code></span>
<span class="codeline" id="line-393"><code>	MOVQ SI, R11</code></span>
<span class="codeline" id="line-394"><code>	ANDQ $7, R11</code></span>
<span class="codeline" id="line-395"><code>	SHRQ $3, SI</code></span>
<span class="codeline" id="line-396"><code>alt1:</code></span>
<span class="codeline" id="line-397"><code>	TESTQ R11, R11; JZ alt1done</code></span>
<span class="codeline" id="line-398"><code>alt1cont:</code></span>
<span class="codeline" id="line-399"><code>	// unroll 1X</code></span>
<span class="codeline" id="line-400"><code>	// multiply and add</code></span>
<span class="codeline" id="line-401"><code>	TESTQ AX, AX	// clear carry</code></span>
<span class="codeline" id="line-402"><code>	TESTQ AX, AX	// clear carry</code></span>
<span class="codeline" id="line-403"><code>	MULXQ 0(R9), R13, R12</code></span>
<span class="codeline" id="line-404"><code>	ADCXQ BX, R13</code></span>
<span class="codeline" id="line-405"><code>	ADOXQ 0(R8), R13</code></span>
<span class="codeline" id="line-406"><code>	MOVQ R13, 0(R10)</code></span>
<span class="codeline" id="line-407"><code>	MOVQ R12, BX</code></span>
<span class="codeline" id="line-408"><code>	ADCXQ DI, BX</code></span>
<span class="codeline" id="line-409"><code>	ADOXQ DI, BX</code></span>
<span class="codeline" id="line-410"><code>	LEAQ 8(R8), R8	// ADD $8, R8</code></span>
<span class="codeline" id="line-411"><code>	LEAQ 8(R9), R9	// ADD $8, R9</code></span>
<span class="codeline" id="line-412"><code>	LEAQ 8(R10), R10	// ADD $8, R10</code></span>
<span class="codeline" id="line-413"><code>	SUBQ $1, R11; JNZ alt1cont</code></span>
<span class="codeline" id="line-414"><code>alt1done:</code></span>
<span class="codeline" id="line-415"><code>alt8:</code></span>
<span class="codeline" id="line-416"><code>	TESTQ SI, SI; JZ alt8done</code></span>
<span class="codeline" id="line-417"><code>alt8cont:</code></span>
<span class="codeline" id="line-418"><code>	// unroll 8X in batches of 2</code></span>
<span class="codeline" id="line-419"><code>	// multiply and add</code></span>
<span class="codeline" id="line-420"><code>	TESTQ AX, AX	// clear carry</code></span>
<span class="codeline" id="line-421"><code>	TESTQ AX, AX	// clear carry</code></span>
<span class="codeline" id="line-422"><code>	MULXQ 0(R9), R13, R11</code></span>
<span class="codeline" id="line-423"><code>	ADCXQ BX, R13</code></span>
<span class="codeline" id="line-424"><code>	ADOXQ 0(R8), R13</code></span>
<span class="codeline" id="line-425"><code>	MULXQ 8(R9), R14, BX</code></span>
<span class="codeline" id="line-426"><code>	ADCXQ R11, R14</code></span>
<span class="codeline" id="line-427"><code>	ADOXQ 8(R8), R14</code></span>
<span class="codeline" id="line-428"><code>	MOVQ R13, 0(R10)</code></span>
<span class="codeline" id="line-429"><code>	MOVQ R14, 8(R10)</code></span>
<span class="codeline" id="line-430"><code>	MULXQ 16(R9), R13, R11</code></span>
<span class="codeline" id="line-431"><code>	ADCXQ BX, R13</code></span>
<span class="codeline" id="line-432"><code>	ADOXQ 16(R8), R13</code></span>
<span class="codeline" id="line-433"><code>	MULXQ 24(R9), R14, BX</code></span>
<span class="codeline" id="line-434"><code>	ADCXQ R11, R14</code></span>
<span class="codeline" id="line-435"><code>	ADOXQ 24(R8), R14</code></span>
<span class="codeline" id="line-436"><code>	MOVQ R13, 16(R10)</code></span>
<span class="codeline" id="line-437"><code>	MOVQ R14, 24(R10)</code></span>
<span class="codeline" id="line-438"><code>	MULXQ 32(R9), R13, R11</code></span>
<span class="codeline" id="line-439"><code>	ADCXQ BX, R13</code></span>
<span class="codeline" id="line-440"><code>	ADOXQ 32(R8), R13</code></span>
<span class="codeline" id="line-441"><code>	MULXQ 40(R9), R14, BX</code></span>
<span class="codeline" id="line-442"><code>	ADCXQ R11, R14</code></span>
<span class="codeline" id="line-443"><code>	ADOXQ 40(R8), R14</code></span>
<span class="codeline" id="line-444"><code>	MOVQ R13, 32(R10)</code></span>
<span class="codeline" id="line-445"><code>	MOVQ R14, 40(R10)</code></span>
<span class="codeline" id="line-446"><code>	MULXQ 48(R9), R13, R11</code></span>
<span class="codeline" id="line-447"><code>	ADCXQ BX, R13</code></span>
<span class="codeline" id="line-448"><code>	ADOXQ 48(R8), R13</code></span>
<span class="codeline" id="line-449"><code>	MULXQ 56(R9), R14, BX</code></span>
<span class="codeline" id="line-450"><code>	ADCXQ R11, R14</code></span>
<span class="codeline" id="line-451"><code>	ADOXQ 56(R8), R14</code></span>
<span class="codeline" id="line-452"><code>	MOVQ R13, 48(R10)</code></span>
<span class="codeline" id="line-453"><code>	MOVQ R14, 56(R10)</code></span>
<span class="codeline" id="line-454"><code>	ADCXQ DI, BX</code></span>
<span class="codeline" id="line-455"><code>	ADOXQ DI, BX</code></span>
<span class="codeline" id="line-456"><code>	LEAQ 64(R8), R8	// ADD $64, R8</code></span>
<span class="codeline" id="line-457"><code>	LEAQ 64(R9), R9	// ADD $64, R9</code></span>
<span class="codeline" id="line-458"><code>	LEAQ 64(R10), R10	// ADD $64, R10</code></span>
<span class="codeline" id="line-459"><code>	SUBQ $1, SI; JNZ alt8cont</code></span>
<span class="codeline" id="line-460"><code>alt8done:</code></span>
<span class="codeline" id="line-461"><code>	MOVQ BX, c+88(FP)</code></span>
<span class="codeline" id="line-462"><code>	RET</code></span>
</pre><pre id="footer">
The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.7.6</i>. (GOOS=linux GOARCH=amd64)</pre>