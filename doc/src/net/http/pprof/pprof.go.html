<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: pprof.go in package net/http/pprof</title>
<link href="../../../../css/auto-v0.7.6.css" rel="stylesheet">
<script src="../../../../jvs/golds-v0.7.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	pprof.go

<span class="title">Belonging Package</span>
	<a href="../../../../pkg/net/http/pprof.html">net/http/pprof</a>
</code></pre>
<style>input[type=radio] {display: none;}
input[id=r0]:checked ~pre label[for=r0],
input[id=r1]:checked ~pre label[for=r1],
input[id=r2]:checked ~pre label[for=r2],
input[id=r3]:checked ~pre label[for=r3],
input[id=r4]:checked ~pre label[for=r4],
input[id=r5]:checked ~pre label[for=r5],
input[id=r6]:checked ~pre label[for=r6],
input[id=r7]:checked ~pre label[for=r7],
input[id=r8]:checked ~pre label[for=r8],
input[id=r9]:checked ~pre label[for=r9],
input[id=r10]:checked ~pre label[for=r10],
input[id=r11]:checked ~pre label[for=r11],
input[id=r12]:checked ~pre label[for=r12],
input[id=r13]:checked ~pre label[for=r13],
input[id=r14]:checked ~pre label[for=r14],
input[id=r15]:checked ~pre label[for=r15],
input[id=r16]:checked ~pre label[for=r16],
input[id=r17]:checked ~pre label[for=r17],
input[id=r18]:checked ~pre label[for=r18],
input[id=r19]:checked ~pre label[for=r19],
input[id=r20]:checked ~pre label[for=r20],
input[id=r21]:checked ~pre label[for=r21],
input[id=r22]:checked ~pre label[for=r22],
input[id=r23]:checked ~pre label[for=r23],
input[id=r24]:checked ~pre label[for=r24],
input[id=r25]:checked ~pre label[for=r25],
input[id=r26]:checked ~pre label[for=r26],
input[id=r27]:checked ~pre label[for=r27],
input[id=r28]:checked ~pre label[for=r28],
input[id=r29]:checked ~pre label[for=r29],
input[id=r30]:checked ~pre label[for=r30],
input[id=r31]:checked ~pre label[for=r31],
input[id=r32]:checked ~pre label[for=r32],
input[id=r33]:checked ~pre label[for=r33],
input[id=r34]:checked ~pre label[for=r34],
input[id=r35]:checked ~pre label[for=r35],
input[id=r36]:checked ~pre label[for=r36],
input[id=r37]:checked ~pre label[for=r37],
input[id=r38]:checked ~pre label[for=r38],
input[id=r39]:checked ~pre label[for=r39],
input[id=r40]:checked ~pre label[for=r40],
input[id=r41]:checked ~pre label[for=r41],
input[id=r42]:checked ~pre label[for=r42],
input[id=r43]:checked ~pre label[for=r43],
input[id=r44]:checked ~pre label[for=r44],
input[id=r45]:checked ~pre label[for=r45],
input[id=r46]:checked ~pre label[for=r46],
input[id=r47]:checked ~pre label[for=r47],
input[id=r48]:checked ~pre label[for=r48],
input[id=r49]:checked ~pre label[for=r49],
input[id=r50]:checked ~pre label[for=r50],
input[id=r51]:checked ~pre label[for=r51],
input[id=r52]:checked ~pre label[for=r52],
input[id=r53]:checked ~pre label[for=r53],
input[id=r54]:checked ~pre label[for=r54],
input[id=r55]:checked ~pre label[for=r55],
input[id=r56]:checked ~pre label[for=r56],
input[id=r57]:checked ~pre label[for=r57],
input[id=r58]:checked ~pre label[for=r58],
input[id=r59]:checked ~pre label[for=r59],
input[id=r60]:checked ~pre label[for=r60],
input[id=r61]:checked ~pre label[for=r61],
input[id=r62]:checked ~pre label[for=r62],
input[id=r63]:checked ~pre label[for=r63],
input[id=r64]:checked ~pre label[for=r64],
input[id=r65]:checked ~pre label[for=r65],
input[id=r66]:checked ~pre label[for=r66],
input[id=r67]:checked ~pre label[for=r67],
input[id=r68]:checked ~pre label[for=r68],
input[id=r69]:checked ~pre label[for=r69],
input[id=r70]:checked ~pre label[for=r70],
input[id=r71]:checked ~pre label[for=r71],
input[id=r72]:checked ~pre label[for=r72],
input[id=r73]:checked ~pre label[for=r73],
input[id=r74]:checked ~pre label[for=r74],
input[id=r75]:checked ~pre label[for=r75],
input[id=r76]:checked ~pre label[for=r76],
input[id=r77]:checked ~pre label[for=r77],
input[id=r78]:checked ~pre label[for=r78],
input[id=r79]:checked ~pre label[for=r79],
input[id=r80]:checked ~pre label[for=r80],
input[id=r81]:checked ~pre label[for=r81],
input[id=r82]:checked ~pre label[for=r82],
input[id=r83]:checked ~pre label[for=r83],
input[id=r84]:checked ~pre label[for=r84],
input[id=r85]:checked ~pre label[for=r85],
input[id=r86]:checked ~pre label[for=r86],
input[id=r87]:checked ~pre label[for=r87],
input[id=r88]:checked ~pre label[for=r88],
input[id=r89]:checked ~pre label[for=r89],
input[id=r90]:checked ~pre label[for=r90],
input[id=r91]:checked ~pre label[for=r91],
input[id=r92]:checked ~pre label[for=r92],
input[id=r93]:checked ~pre label[for=r93],
input[id=r94]:checked ~pre label[for=r94],
input[id=r95]:checked ~pre label[for=r95],
input[id=r96]:checked ~pre label[for=r96],
input[id=r97]:checked ~pre label[for=r97],
input[id=r98]:checked ~pre label[for=r98],
input[id=r99]:checked ~pre label[for=r99],
input[id=r100]:checked ~pre label[for=r100]
{background: #226; color: #ff8;}
input[id=i0]:checked ~pre .i0,
input[id=i1]:checked ~pre .i1,
input[id=i2]:checked ~pre .i2,
input[id=i3]:checked ~pre .i3,
input[id=i4]:checked ~pre .i4,
input[id=i5]:checked ~pre .i5,
input[id=i6]:checked ~pre .i6,
input[id=i7]:checked ~pre .i7,
input[id=i8]:checked ~pre .i8,
input[id=i9]:checked ~pre .i9,
input[id=i10]:checked ~pre .i10,
input[id=i11]:checked ~pre .i11,
input[id=i12]:checked ~pre .i12,
input[id=i13]:checked ~pre .i13,
input[id=i14]:checked ~pre .i14,
input[id=i15]:checked ~pre .i15,
input[id=i16]:checked ~pre .i16,
input[id=i17]:checked ~pre .i17,
input[id=i18]:checked ~pre .i18
{background: brown; color: #eed;}
</style><input id="r0" type="radio" name="g"/>
<input id="r1" type="radio" name="g"/>
<input id="r2" type="radio" name="g"/>
<input id="r3" type="radio" name="g"/>
<input id="r4" type="radio" name="g"/>
<input id="r5" type="radio" name="g"/>
<input id="r6" type="radio" name="g"/>
<input id="r7" type="radio" name="g"/>
<input id="r8" type="radio" name="g"/>
<input id="r9" type="radio" name="g"/>
<input id="r10" type="radio" name="g"/>
<input id="r11" type="radio" name="g"/>
<input id="r12" type="radio" name="g"/>
<input id="r13" type="radio" name="g"/>
<input id="r14" type="radio" name="g"/>
<input id="r15" type="radio" name="g"/>
<input id="r16" type="radio" name="g"/>
<input id="r17" type="radio" name="g"/>
<input id="r18" type="radio" name="g"/>
<input id="r19" type="radio" name="g"/>
<input id="r20" type="radio" name="g"/>
<input id="r21" type="radio" name="g"/>
<input id="r22" type="radio" name="g"/>
<input id="r23" type="radio" name="g"/>
<input id="r24" type="radio" name="g"/>
<input id="r25" type="radio" name="g"/>
<input id="r26" type="radio" name="g"/>
<input id="r27" type="radio" name="g"/>
<input id="r28" type="radio" name="g"/>
<input id="r29" type="radio" name="g"/>
<input id="r30" type="radio" name="g"/>
<input id="r31" type="radio" name="g"/>
<input id="r32" type="radio" name="g"/>
<input id="r33" type="radio" name="g"/>
<input id="r34" type="radio" name="g"/>
<input id="r35" type="radio" name="g"/>
<input id="r36" type="radio" name="g"/>
<input id="r37" type="radio" name="g"/>
<input id="r38" type="radio" name="g"/>
<input id="r39" type="radio" name="g"/>
<input id="r40" type="radio" name="g"/>
<input id="r41" type="radio" name="g"/>
<input id="r42" type="radio" name="g"/>
<input id="r43" type="radio" name="g"/>
<input id="r44" type="radio" name="g"/>
<input id="r45" type="radio" name="g"/>
<input id="r46" type="radio" name="g"/>
<input id="r47" type="radio" name="g"/>
<input id="r48" type="radio" name="g"/>
<input id="r49" type="radio" name="g"/>
<input id="r50" type="radio" name="g"/>
<input id="r51" type="radio" name="g"/>
<input id="r52" type="radio" name="g"/>
<input id="r53" type="radio" name="g"/>
<input id="r54" type="radio" name="g"/>
<input id="r55" type="radio" name="g"/>
<input id="r56" type="radio" name="g"/>
<input id="r57" type="radio" name="g"/>
<input id="r58" type="radio" name="g"/>
<input id="r59" type="radio" name="g"/>
<input id="r60" type="radio" name="g"/>
<input id="r61" type="radio" name="g"/>
<input id="r62" type="radio" name="g"/>
<input id="r63" type="radio" name="g"/>
<input id="r64" type="radio" name="g"/>
<input id="r65" type="radio" name="g"/>
<input id="r66" type="radio" name="g"/>
<input id="r67" type="radio" name="g"/>
<input id="r68" type="radio" name="g"/>
<input id="r69" type="radio" name="g"/>
<input id="r70" type="radio" name="g"/>
<input id="r71" type="radio" name="g"/>
<input id="r72" type="radio" name="g"/>
<input id="r73" type="radio" name="g"/>
<input id="r74" type="radio" name="g"/>
<input id="r75" type="radio" name="g"/>
<input id="r76" type="radio" name="g"/>
<input id="r77" type="radio" name="g"/>
<input id="r78" type="radio" name="g"/>
<input id="r79" type="radio" name="g"/>
<input id="r80" type="radio" name="g"/>
<input id="r81" type="radio" name="g"/>
<input id="r82" type="radio" name="g"/>
<input id="r83" type="radio" name="g"/>
<input id="r84" type="radio" name="g"/>
<input id="r85" type="radio" name="g"/>
<input id="r86" type="radio" name="g"/>
<input id="r87" type="radio" name="g"/>
<input id="r88" type="radio" name="g"/>
<input id="r89" type="radio" name="g"/>
<input id="r90" type="radio" name="g"/>
<input id="r91" type="radio" name="g"/>
<input id="r92" type="radio" name="g"/>
<input id="r93" type="radio" name="g"/>
<input id="r94" type="radio" name="g"/>
<input id="r95" type="radio" name="g"/>
<input id="r96" type="radio" name="g"/>
<input id="r97" type="radio" name="g"/>
<input id="r98" type="radio" name="g"/>
<input id="r99" type="radio" name="g"/>
<input id="r100" type="radio" name="g"/>
<input id="i0" type="radio" name="i"/>
<input id="i1" type="radio" name="i"/>
<input id="i2" type="radio" name="i"/>
<input id="i3" type="radio" name="i"/>
<input id="i4" type="radio" name="i"/>
<input id="i5" type="radio" name="i"/>
<input id="i6" type="radio" name="i"/>
<input id="i7" type="radio" name="i"/>
<input id="i8" type="radio" name="i"/>
<input id="i9" type="radio" name="i"/>
<input id="i10" type="radio" name="i"/>
<input id="i11" type="radio" name="i"/>
<input id="i12" type="radio" name="i"/>
<input id="i13" type="radio" name="i"/>
<input id="i14" type="radio" name="i"/>
<input id="i15" type="radio" name="i"/>
<input id="i16" type="radio" name="i"/>
<input id="i17" type="radio" name="i"/>
<input id="i18" type="radio" name="i"/>

<pre class="line-numbers">
<span class="codeline" id="line-1"><code><span class="comment">// Copyright 2010 The Go Authors. All rights reserved.</span></code></span>
<span class="codeline" id="line-2"><code><span class="comment">// Use of this source code is governed by a BSD-style</span></code></span>
<span class="codeline" id="line-3"><code><span class="comment">// license that can be found in the LICENSE file.</span></code></span>
<span class="codeline" id="line-4"><code></code></span>
<div class="anchor" id="doc"><span class="codeline" id="line-5"><code><span class="comment">// Package pprof serves via its HTTP server runtime profiling data</span></code></span>
<span class="codeline" id="line-6"><code><span class="comment">// in the format expected by the pprof visualization tool.</span></code></span>
<span class="codeline" id="line-7"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-8"><code><span class="comment">// The package is typically only imported for the side effect of</span></code></span>
<span class="codeline" id="line-9"><code><span class="comment">// registering its HTTP handlers.</span></code></span>
<span class="codeline" id="line-10"><code><span class="comment">// The handled paths all begin with /debug/pprof/.</span></code></span>
<span class="codeline" id="line-11"><code><span class="comment">// As of Go 1.22, all the paths must be requested with GET.</span></code></span>
<span class="codeline" id="line-12"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-13"><code><span class="comment">// To use pprof, link this package into your program:</span></code></span>
<span class="codeline" id="line-14"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-15"><code><span class="comment">//	import _ "net/http/pprof"</span></code></span>
<span class="codeline" id="line-16"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-17"><code><span class="comment">// If your application is not already running an http server, you</span></code></span>
<span class="codeline" id="line-18"><code><span class="comment">// need to start one. Add "net/http" and "log" to your imports and</span></code></span>
<span class="codeline" id="line-19"><code><span class="comment">// the following code to your main function:</span></code></span>
<span class="codeline" id="line-20"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-21"><code><span class="comment">//	go func() {</span></code></span>
<span class="codeline" id="line-22"><code><span class="comment">//		log.Println(http.ListenAndServe("localhost:6060", nil))</span></code></span>
<span class="codeline" id="line-23"><code><span class="comment">//	}()</span></code></span>
<span class="codeline" id="line-24"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-25"><code><span class="comment">// By default, all the profiles listed in [runtime/pprof.Profile] are</span></code></span>
<span class="codeline" id="line-26"><code><span class="comment">// available (via [Handler]), in addition to the [Cmdline], [Profile], [Symbol],</span></code></span>
<span class="codeline" id="line-27"><code><span class="comment">// and [Trace] profiles defined in this package.</span></code></span>
<span class="codeline" id="line-28"><code><span class="comment">// If you are not using DefaultServeMux, you will have to register handlers</span></code></span>
<span class="codeline" id="line-29"><code><span class="comment">// with the mux you are using.</span></code></span>
<span class="codeline" id="line-30"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-31"><code><span class="comment">// # Parameters</span></code></span>
<span class="codeline" id="line-32"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-33"><code><span class="comment">// Parameters can be passed via GET query params:</span></code></span>
<span class="codeline" id="line-34"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-35"><code><span class="comment">//   - debug=N (all profiles): response format: N = 0: binary (default), N &gt; 0: plaintext</span></code></span>
<span class="codeline" id="line-36"><code><span class="comment">//   - gc=N (heap profile): N &gt; 0: run a garbage collection cycle before profiling</span></code></span>
<span class="codeline" id="line-37"><code><span class="comment">//   - seconds=N (allocs, block, goroutine, heap, mutex, threadcreate profiles): return a delta profile</span></code></span>
<span class="codeline" id="line-38"><code><span class="comment">//   - seconds=N (cpu (profile), trace profiles): profile for the given duration</span></code></span>
<span class="codeline" id="line-39"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-40"><code><span class="comment">// # Usage examples</span></code></span>
<span class="codeline" id="line-41"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-42"><code><span class="comment">// Use the pprof tool to look at the heap profile:</span></code></span>
<span class="codeline" id="line-43"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-44"><code><span class="comment">//	go tool pprof http://localhost:6060/debug/pprof/heap</span></code></span>
<span class="codeline" id="line-45"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-46"><code><span class="comment">// Or to look at a 30-second CPU profile:</span></code></span>
<span class="codeline" id="line-47"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-48"><code><span class="comment">//	go tool pprof http://localhost:6060/debug/pprof/profile?seconds=30</span></code></span>
<span class="codeline" id="line-49"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-50"><code><span class="comment">// Or to look at the goroutine blocking profile, after calling</span></code></span>
<span class="codeline" id="line-51"><code><span class="comment">// [runtime.SetBlockProfileRate] in your program:</span></code></span>
<span class="codeline" id="line-52"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-53"><code><span class="comment">//	go tool pprof http://localhost:6060/debug/pprof/block</span></code></span>
<span class="codeline" id="line-54"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-55"><code><span class="comment">// Or to look at the holders of contended mutexes, after calling</span></code></span>
<span class="codeline" id="line-56"><code><span class="comment">// [runtime.SetMutexProfileFraction] in your program:</span></code></span>
<span class="codeline" id="line-57"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-58"><code><span class="comment">//	go tool pprof http://localhost:6060/debug/pprof/mutex</span></code></span>
<span class="codeline" id="line-59"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-60"><code><span class="comment">// The package also exports a handler that serves execution trace data</span></code></span>
<span class="codeline" id="line-61"><code><span class="comment">// for the "go tool trace" command. To collect a 5-second execution trace:</span></code></span>
<span class="codeline" id="line-62"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-63"><code><span class="comment">//	curl -o trace.out http://localhost:6060/debug/pprof/trace?seconds=5</span></code></span>
<span class="codeline" id="line-64"><code><span class="comment">//	go tool trace trace.out</span></code></span>
<span class="codeline" id="line-65"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-66"><code><span class="comment">// To view all available profiles, open http://localhost:6060/debug/pprof/</span></code></span>
<span class="codeline" id="line-67"><code><span class="comment">// in your browser.</span></code></span>
<span class="codeline" id="line-68"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-69"><code><span class="comment">// For a study of the facility in action, visit</span></code></span>
<span class="codeline" id="line-70"><code><span class="comment">// https://blog.golang.org/2011/06/profiling-go-programs.html.</span></code></span></div><span class="codeline" id="line-71"><code><span class="keyword">package</span> pprof</code></span>
<span class="codeline" id="line-72"><code></code></span>
<span class="codeline" id="line-73"><code><span class="keyword">import</span> (</code></span>
<span class="codeline" id="line-74"><code>	<label for="i0"><span class="lit-string i0">"bufio"</span></label></code></span>
<span class="codeline" id="line-75"><code>	<label for="i1"><span class="lit-string i1">"bytes"</span></label></code></span>
<span class="codeline" id="line-76"><code>	<label for="i2"><span class="lit-string i2">"context"</span></label></code></span>
<span class="codeline" id="line-77"><code>	<label for="i3"><span class="lit-string i3">"fmt"</span></label></code></span>
<span class="codeline" id="line-78"><code>	<label for="i4"><span class="lit-string i4">"html"</span></label></code></span>
<span class="codeline" id="line-79"><code>	<label for="i5"><span class="lit-string i5">"internal/godebug"</span></label></code></span>
<span class="codeline" id="line-80"><code>	<label for="i6"><span class="lit-string i6">"internal/profile"</span></label></code></span>
<span class="codeline" id="line-81"><code>	<label for="i7"><span class="lit-string i7">"io"</span></label></code></span>
<span class="codeline" id="line-82"><code>	<label for="i8"><span class="lit-string i8">"log"</span></label></code></span>
<span class="codeline" id="line-83"><code>	<label for="i9"><span class="lit-string i9">"net/http"</span></label></code></span>
<span class="codeline" id="line-84"><code>	<label for="i10"><span class="lit-string i10">"net/url"</span></label></code></span>
<span class="codeline" id="line-85"><code>	<label for="i11"><span class="lit-string i11">"os"</span></label></code></span>
<span class="codeline" id="line-86"><code>	<label for="i12"><span class="lit-string i12">"runtime"</span></label></code></span>
<span class="codeline" id="line-87"><code>	<label for="i13"><span class="lit-string i13">"runtime/pprof"</span></label></code></span>
<span class="codeline" id="line-88"><code>	<label for="i14"><span class="lit-string i14">"runtime/trace"</span></label></code></span>
<span class="codeline" id="line-89"><code>	<label for="i15"><span class="lit-string i15">"slices"</span></label></code></span>
<span class="codeline" id="line-90"><code>	<label for="i16"><span class="lit-string i16">"strconv"</span></label></code></span>
<span class="codeline" id="line-91"><code>	<label for="i17"><span class="lit-string i17">"strings"</span></label></code></span>
<span class="codeline" id="line-92"><code>	<label for="i18"><span class="lit-string i18">"time"</span></label></code></span>
<span class="codeline" id="line-93"><code>)</code></span>
<span class="codeline" id="line-94"><code></code></span>
<span class="codeline" id="line-95"><code><span class="keyword">func</span> <label for="r0" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-init" class="ident">init</a></label>() {</code></span>
<span class="codeline" id="line-96"><code>	<label for="r1" class="ident">prefix</label> := <span class="lit-string">""</span></code></span>
<span class="codeline" id="line-97"><code>	<span class="keyword">if</span> <a href="../../../../pkg/internal/godebug.html" class="ident i5">godebug</a>.<a href="../../../internal/godebug/godebug.go.html#line-93" class="ident">New</a>(<span class="lit-string">"httpmuxgo121"</span>).<a href="../../../internal/godebug/godebug.go.html#line-157" class="ident">Value</a>() != <span class="lit-string">"1"</span> {</code></span>
<span class="codeline" id="line-98"><code>		<label for="r1" class="ident">prefix</label> = <span class="lit-string">"GET "</span></code></span>
<span class="codeline" id="line-99"><code>	}</code></span>
<span class="codeline" id="line-100"><code>	<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-2862" class="ident">HandleFunc</a>(<label for="r1" class="ident">prefix</label>+<span class="lit-string">"/debug/pprof/"</span>, <a href="#line-386" class="ident">Index</a>)</code></span>
<span class="codeline" id="line-101"><code>	<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-2862" class="ident">HandleFunc</a>(<label for="r1" class="ident">prefix</label>+<span class="lit-string">"/debug/pprof/cmdline"</span>, <a href="#line-110" class="ident">Cmdline</a>)</code></span>
<span class="codeline" id="line-102"><code>	<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-2862" class="ident">HandleFunc</a>(<label for="r1" class="ident">prefix</label>+<span class="lit-string">"/debug/pprof/profile"</span>, <a href="#line-144" class="ident">Profile</a>)</code></span>
<span class="codeline" id="line-103"><code>	<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-2862" class="ident">HandleFunc</a>(<label for="r1" class="ident">prefix</label>+<span class="lit-string">"/debug/pprof/symbol"</span>, <a href="#line-196" class="ident">Symbol</a>)</code></span>
<span class="codeline" id="line-104"><code>	<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-2862" class="ident">HandleFunc</a>(<label for="r1" class="ident">prefix</label>+<span class="lit-string">"/debug/pprof/trace"</span>, <a href="#line-170" class="ident">Trace</a>)</code></span>
<span class="codeline" id="line-105"><code>}</code></span>
<span class="codeline" id="line-106"><code></code></span>
<span class="codeline" id="line-107"><code><span class="comment">// Cmdline responds with the running program's</span></code></span>
<span class="codeline" id="line-108"><code><span class="comment">// command line, with arguments separated by NUL bytes.</span></code></span>
<span class="codeline" id="line-109"><code><span class="comment">// The package initialization registers it as /debug/pprof/cmdline.</span></code></span>
<span class="codeline" id="line-110"><code><span class="keyword">func</span> <label for="r2" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-Cmdline" class="ident">Cmdline</a></label>(<label for="r3" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r4" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>) {</code></span>
<span class="codeline" id="line-111"><code>	<label for="r3" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"X-Content-Type-Options"</span>, <span class="lit-string">"nosniff"</span>)</code></span>
<span class="codeline" id="line-112"><code>	<label for="r3" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"text/plain; charset=utf-8"</span>)</code></span>
<span class="codeline" id="line-113"><code>	<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-260" class="ident">Fprint</a>(<label for="r3" class="ident">w</label>, <a href="../../../../pkg/strings.html" class="ident i17">strings</a>.<a href="../../../strings/strings.go.html#line-483" class="ident">Join</a>(<a href="../../../../pkg/os.html" class="ident i11">os</a>.<a href="../../../os/proc.go.html#line-16" class="ident">Args</a>, <span class="lit-string">"\x00"</span>))</code></span>
<span class="codeline" id="line-114"><code>}</code></span>
<span class="codeline" id="line-115"><code></code></span>
<span class="codeline" id="line-116"><code><span class="keyword">func</span> <label for="r5" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-sleep" class="ident">sleep</a></label>(<label for="r6" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>, <label for="r7" class="ident">d</label> <a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-911" class="ident">Duration</a>) {</code></span>
<span class="codeline" id="line-117"><code>	<a href="../../../runtime/select.go.html#line-122"><span class="keyword">select</span></a> {</code></span>
<span class="codeline" id="line-118"><code>	<span class="keyword">case</span> <a href="../../../runtime/chan.go.html#line-505">&lt;-</a><a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/sleep.go.html#line-202" class="ident">After</a>(<label for="r7" class="ident">d</label>):</code></span>
<span class="codeline" id="line-119"><code>	<span class="keyword">case</span> <a href="../../../runtime/chan.go.html#line-505">&lt;-</a><label for="r6" class="ident">r</label>.<a href="../request.go.html#line-352" class="ident">Context</a>().<a href="../../../context/context.go.html#line-108" class="ident">Done</a>():</code></span>
<span class="codeline" id="line-120"><code>	}</code></span>
<span class="codeline" id="line-121"><code>}</code></span>
<span class="codeline" id="line-122"><code></code></span>
<span class="codeline" id="line-123"><code><span class="keyword">func</span> <label for="r8" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-configureWriteDeadline" class="ident">configureWriteDeadline</a></label>(<label for="r9" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r10" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>, <label for="r11" class="ident">seconds</label> <a href="../../../../pkg/builtin.html#name-float64" class="ident">float64</a>) {</code></span>
<span class="codeline" id="line-124"><code>	<label for="r12" class="ident">srv</label>, <label for="r13" class="ident">ok</label> := <label for="r10" class="ident">r</label>.<a href="../request.go.html#line-352" class="ident">Context</a>().<a href="../../../context/context.go.html#line-162" class="ident">Value</a>(<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-244" class="ident">ServerContextKey</a>).(*<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-2954" class="ident">Server</a>)</code></span>
<span class="codeline" id="line-125"><code>	<span class="keyword">if</span> <label for="r13" class="ident">ok</label> &amp;&amp; <label for="r12" class="ident">srv</label>.<a href="../server.go.html#line-2999" class="ident">WriteTimeout</a> &gt; <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-126"><code>		<label for="r14" class="ident">timeout</label> := <label for="r12" class="ident">srv</label>.<a href="../server.go.html#line-2999" class="ident">WriteTimeout</a> + <a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-911" class="ident">Duration</a>(<label for="r11" class="ident">seconds</label>*<a href="../../../../pkg/builtin.html#name-float64" class="ident">float64</a>(<a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-934" class="ident">Second</a>))</code></span>
<span class="codeline" id="line-127"><code></code></span>
<span class="codeline" id="line-128"><code>		<label for="r15" class="ident">rc</label> := <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../responsecontroller.go.html#line-38" class="ident">NewResponseController</a>(<label for="r9" class="ident">w</label>)</code></span>
<span class="codeline" id="line-129"><code>		<label for="r15" class="ident">rc</label>.<a href="../responsecontroller.go.html#line-105" class="ident">SetWriteDeadline</a>(<a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-1340" class="ident">Now</a>().<a href="../../../time/time.go.html#line-1166" class="ident">Add</a>(<label for="r14" class="ident">timeout</label>))</code></span>
<span class="codeline" id="line-130"><code>	}</code></span>
<span class="codeline" id="line-131"><code>}</code></span>
<span class="codeline" id="line-132"><code></code></span>
<span class="codeline" id="line-133"><code><span class="keyword">func</span> <label for="r16" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-serveError" class="ident">serveError</a></label>(<label for="r17" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r18" class="ident">status</label> <a href="../../../../pkg/builtin.html#name-int" class="ident">int</a>, <label for="r19" class="ident">txt</label> <a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>) {</code></span>
<span class="codeline" id="line-134"><code>	<label for="r17" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"text/plain; charset=utf-8"</span>)</code></span>
<span class="codeline" id="line-135"><code>	<label for="r17" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"X-Go-Pprof"</span>, <span class="lit-string">"1"</span>)</code></span>
<span class="codeline" id="line-136"><code>	<label for="r17" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-80" class="ident">Del</a>(<span class="lit-string">"Content-Disposition"</span>)</code></span>
<span class="codeline" id="line-137"><code>	<label for="r17" class="ident">w</label>.<a href="../server.go.html#line-160" class="ident">WriteHeader</a>(<label for="r18" class="ident">status</label>)</code></span>
<span class="codeline" id="line-138"><code>	<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-302" class="ident">Fprintln</a>(<label for="r17" class="ident">w</label>, <label for="r19" class="ident">txt</label>)</code></span>
<span class="codeline" id="line-139"><code>}</code></span>
<span class="codeline" id="line-140"><code></code></span>
<span class="codeline" id="line-141"><code><span class="comment">// Profile responds with the pprof-formatted cpu profile.</span></code></span>
<span class="codeline" id="line-142"><code><span class="comment">// Profiling lasts for duration specified in seconds GET parameter, or for 30 seconds if not specified.</span></code></span>
<span class="codeline" id="line-143"><code><span class="comment">// The package initialization registers it as /debug/pprof/profile.</span></code></span>
<span class="codeline" id="line-144"><code><span class="keyword">func</span> <label for="r20" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-Profile" class="ident">Profile</a></label>(<label for="r21" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r22" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>) {</code></span>
<span class="codeline" id="line-145"><code>	<label for="r21" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"X-Content-Type-Options"</span>, <span class="lit-string">"nosniff"</span>)</code></span>
<span class="codeline" id="line-146"><code>	<label for="r23" class="ident">sec</label>, <label for="r24" class="ident">err</label> := <a href="../../../../pkg/strconv.html" class="ident i16">strconv</a>.<a href="../../../strconv/atoi.go.html#line-197" class="ident">ParseInt</a>(<label for="r22" class="ident">r</label>.<a href="../request.go.html#line-1419" class="ident">FormValue</a>(<span class="lit-string">"seconds"</span>), <span class="lit-number">10</span>, <span class="lit-number">64</span>)</code></span>
<span class="codeline" id="line-147"><code>	<span class="keyword">if</span> <label for="r23" class="ident">sec</label> &lt;= <span class="lit-number">0</span> || <label for="r24" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-148"><code>		<label for="r23" class="ident">sec</label> = <span class="lit-number">30</span></code></span>
<span class="codeline" id="line-149"><code>	}</code></span>
<span class="codeline" id="line-150"><code></code></span>
<span class="codeline" id="line-151"><code>	<a href="#line-123" class="ident">configureWriteDeadline</a>(<label for="r21" class="ident">w</label>, <label for="r22" class="ident">r</label>, <a href="../../../../pkg/builtin.html#name-float64" class="ident">float64</a>(<label for="r23" class="ident">sec</label>))</code></span>
<span class="codeline" id="line-152"><code></code></span>
<span class="codeline" id="line-153"><code>	<span class="comment">// Set Content Type assuming StartCPUProfile will work,</span></code></span>
<span class="codeline" id="line-154"><code><span class="comment">	// because if it does it starts writing.</span></code></span>
<span class="codeline" id="line-155"><code>	<label for="r21" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"application/octet-stream"</span>)</code></span>
<span class="codeline" id="line-156"><code>	<label for="r21" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Disposition"</span>, <span class="lit-string">`attachment; filename="profile"`</span>)</code></span>
<span class="codeline" id="line-157"><code>	<span class="keyword">if</span> <label for="r25" class="ident">err</label> := <a href="../../../../pkg/runtime/pprof.html" class="ident i13">pprof</a>.<a href="../../../runtime/pprof/pprof.go.html#line-833" class="ident">StartCPUProfile</a>(<label for="r21" class="ident">w</label>); <label for="r25" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-158"><code>		<span class="comment">// StartCPUProfile failed, so no writes yet.</span></code></span>
<span class="codeline" id="line-159"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r21" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-66" class="ident">StatusInternalServerError</a>,</code></span>
<span class="codeline" id="line-160"><code>			<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-237" class="ident">Sprintf</a>(<span class="lit-string">"Could not enable CPU profiling: %s"</span>, <label for="r25" class="ident">err</label>))</code></span>
<span class="codeline" id="line-161"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-162"><code>	}</code></span>
<span class="codeline" id="line-163"><code>	<a href="#line-116" class="ident">sleep</a>(<label for="r22" class="ident">r</label>, <a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-911" class="ident">Duration</a>(<label for="r23" class="ident">sec</label>)*<a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-934" class="ident">Second</a>)</code></span>
<span class="codeline" id="line-164"><code>	<a href="../../../../pkg/runtime/pprof.html" class="ident i13">pprof</a>.<a href="../../../runtime/pprof/pprof.go.html#line-892" class="ident">StopCPUProfile</a>()</code></span>
<span class="codeline" id="line-165"><code>}</code></span>
<span class="codeline" id="line-166"><code></code></span>
<span class="codeline" id="line-167"><code><span class="comment">// Trace responds with the execution trace in binary form.</span></code></span>
<span class="codeline" id="line-168"><code><span class="comment">// Tracing lasts for duration specified in seconds GET parameter, or for 1 second if not specified.</span></code></span>
<span class="codeline" id="line-169"><code><span class="comment">// The package initialization registers it as /debug/pprof/trace.</span></code></span>
<span class="codeline" id="line-170"><code><span class="keyword">func</span> <label for="r26" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-Trace" class="ident">Trace</a></label>(<label for="r27" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r28" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>) {</code></span>
<span class="codeline" id="line-171"><code>	<label for="r27" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"X-Content-Type-Options"</span>, <span class="lit-string">"nosniff"</span>)</code></span>
<span class="codeline" id="line-172"><code>	<label for="r29" class="ident">sec</label>, <label for="r30" class="ident">err</label> := <a href="../../../../pkg/strconv.html" class="ident i16">strconv</a>.<a href="../../../strconv/atof.go.html#line-695" class="ident">ParseFloat</a>(<label for="r28" class="ident">r</label>.<a href="../request.go.html#line-1419" class="ident">FormValue</a>(<span class="lit-string">"seconds"</span>), <span class="lit-number">64</span>)</code></span>
<span class="codeline" id="line-173"><code>	<span class="keyword">if</span> <label for="r29" class="ident">sec</label> &lt;= <span class="lit-number">0</span> || <label for="r30" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-174"><code>		<label for="r29" class="ident">sec</label> = <span class="lit-number">1</span></code></span>
<span class="codeline" id="line-175"><code>	}</code></span>
<span class="codeline" id="line-176"><code></code></span>
<span class="codeline" id="line-177"><code>	<a href="#line-123" class="ident">configureWriteDeadline</a>(<label for="r27" class="ident">w</label>, <label for="r28" class="ident">r</label>, <label for="r29" class="ident">sec</label>)</code></span>
<span class="codeline" id="line-178"><code></code></span>
<span class="codeline" id="line-179"><code>	<span class="comment">// Set Content Type assuming trace.Start will work,</span></code></span>
<span class="codeline" id="line-180"><code><span class="comment">	// because if it does it starts writing.</span></code></span>
<span class="codeline" id="line-181"><code>	<label for="r27" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"application/octet-stream"</span>)</code></span>
<span class="codeline" id="line-182"><code>	<label for="r27" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Disposition"</span>, <span class="lit-string">`attachment; filename="trace"`</span>)</code></span>
<span class="codeline" id="line-183"><code>	<span class="keyword">if</span> <label for="r31" class="ident">err</label> := <a href="../../../../pkg/runtime/trace.html" class="ident i14">trace</a>.<a href="../../../runtime/trace/trace.go.html#line-121" class="ident">Start</a>(<label for="r27" class="ident">w</label>); <label for="r31" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-184"><code>		<span class="comment">// trace.Start failed, so no writes yet.</span></code></span>
<span class="codeline" id="line-185"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r27" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-66" class="ident">StatusInternalServerError</a>,</code></span>
<span class="codeline" id="line-186"><code>			<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-237" class="ident">Sprintf</a>(<span class="lit-string">"Could not enable tracing: %s"</span>, <label for="r31" class="ident">err</label>))</code></span>
<span class="codeline" id="line-187"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-188"><code>	}</code></span>
<span class="codeline" id="line-189"><code>	<a href="#line-116" class="ident">sleep</a>(<label for="r28" class="ident">r</label>, <a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-911" class="ident">Duration</a>(<label for="r29" class="ident">sec</label>*<a href="../../../../pkg/builtin.html#name-float64" class="ident">float64</a>(<a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-934" class="ident">Second</a>)))</code></span>
<span class="codeline" id="line-190"><code>	<a href="../../../../pkg/runtime/trace.html" class="ident i14">trace</a>.<a href="../../../runtime/trace/trace.go.html#line-143" class="ident">Stop</a>()</code></span>
<span class="codeline" id="line-191"><code>}</code></span>
<span class="codeline" id="line-192"><code></code></span>
<span class="codeline" id="line-193"><code><span class="comment">// Symbol looks up the program counters listed in the request,</span></code></span>
<span class="codeline" id="line-194"><code><span class="comment">// responding with a table mapping program counters to function names.</span></code></span>
<span class="codeline" id="line-195"><code><span class="comment">// The package initialization registers it as /debug/pprof/symbol.</span></code></span>
<span class="codeline" id="line-196"><code><span class="keyword">func</span> <label for="r32" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-Symbol" class="ident">Symbol</a></label>(<label for="r33" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r34" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>) {</code></span>
<span class="codeline" id="line-197"><code>	<label for="r33" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"X-Content-Type-Options"</span>, <span class="lit-string">"nosniff"</span>)</code></span>
<span class="codeline" id="line-198"><code>	<label for="r33" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"text/plain; charset=utf-8"</span>)</code></span>
<span class="codeline" id="line-199"><code></code></span>
<span class="codeline" id="line-200"><code>	<span class="comment">// We have to read the whole POST body before</span></code></span>
<span class="codeline" id="line-201"><code><span class="comment">	// writing any output. Buffer the output here.</span></code></span>
<span class="codeline" id="line-202"><code>	<span class="keyword">var</span> <label for="r35" class="ident">buf</label> <a href="../../../../pkg/bytes.html" class="ident i1">bytes</a>.<a href="../../../bytes/buffer.go.html#line-20" class="ident">Buffer</a></code></span>
<span class="codeline" id="line-203"><code></code></span>
<span class="codeline" id="line-204"><code>	<span class="comment">// We don't know how many symbols we have, but we</span></code></span>
<span class="codeline" id="line-205"><code><span class="comment">	// do have symbol information. Pprof only cares whether</span></code></span>
<span class="codeline" id="line-206"><code><span class="comment">	// this number is 0 (no symbols available) or &gt; 0.</span></code></span>
<span class="codeline" id="line-207"><code>	<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-222" class="ident">Fprintf</a>(&amp;<label for="r35" class="ident">buf</label>, <span class="lit-string">"num_symbols: 1\n"</span>)</code></span>
<span class="codeline" id="line-208"><code></code></span>
<span class="codeline" id="line-209"><code>	<span class="keyword">var</span> <label for="r36" class="ident">b</label> *<a href="../../../../pkg/bufio.html" class="ident i0">bufio</a>.<a href="../../../bufio/bufio.go.html#line-35" class="ident">Reader</a></code></span>
<span class="codeline" id="line-210"><code>	<span class="keyword">if</span> <label for="r34" class="ident">r</label>.<a href="../request.go.html#line-116" class="ident">Method</a> == <span class="lit-string">"POST"</span> {</code></span>
<span class="codeline" id="line-211"><code>		<label for="r36" class="ident">b</label> = <a href="../../../../pkg/bufio.html" class="ident i0">bufio</a>.<a href="../../../bufio/bufio.go.html#line-62" class="ident">NewReader</a>(<label for="r34" class="ident">r</label>.<a href="../request.go.html#line-188" class="ident">Body</a>)</code></span>
<span class="codeline" id="line-212"><code>	} <span class="keyword">else</span> {</code></span>
<span class="codeline" id="line-213"><code>		<label for="r36" class="ident">b</label> = <a href="../../../../pkg/bufio.html" class="ident i0">bufio</a>.<a href="../../../bufio/bufio.go.html#line-62" class="ident">NewReader</a>(<a href="../../../../pkg/strings.html" class="ident i17">strings</a>.<a href="../../../strings/reader.go.html#line-160" class="ident">NewReader</a>(<label for="r34" class="ident">r</label>.<a href="../request.go.html#line-130" class="ident">URL</a>.<a href="../../url/url.go.html#line-380" class="ident">RawQuery</a>))</code></span>
<span class="codeline" id="line-214"><code>	}</code></span>
<span class="codeline" id="line-215"><code></code></span>
<span class="codeline" id="line-216"><code>	<span class="keyword">for</span> {</code></span>
<span class="codeline" id="line-217"><code>		<label for="r37" class="ident">word</label>, <label for="r38" class="ident">err</label> := <label for="r36" class="ident">b</label>.<a href="../../../bufio/bufio.go.html#line-351" class="ident">ReadSlice</a>(<span class="lit-number">'+'</span>)</code></span>
<span class="codeline" id="line-218"><code>		<span class="keyword">if</span> <label for="r38" class="ident">err</label> == <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-219"><code>			<label for="r37" class="ident">word</label> = <label for="r37" class="ident">word</label>[<span class="lit-number">0</span> : <a href="../../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r37" class="ident">word</label>)-<span class="lit-number">1</span>] <span class="comment">// trim +</span></code></span>
<span class="codeline" id="line-220"><code>		}</code></span>
<span class="codeline" id="line-221"><code>		<label for="r39" class="ident">pc</label>, <label for="r40" class="ident">_</label> := <a href="../../../../pkg/strconv.html" class="ident i16">strconv</a>.<a href="../../../strconv/atoi.go.html#line-73" class="ident">ParseUint</a>(<a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>(<label for="r37" class="ident">word</label>), <span class="lit-number">0</span>, <span class="lit-number">64</span>)</code></span>
<span class="codeline" id="line-222"><code>		<span class="keyword">if</span> <label for="r39" class="ident">pc</label> != <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-223"><code>			<label for="r41" class="ident">f</label> := <a href="../../../../pkg/runtime.html" class="ident i12">runtime</a>.<a href="../../../runtime/symtab.go.html#line-754" class="ident">FuncForPC</a>(<a href="../../../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>(<label for="r39" class="ident">pc</label>))</code></span>
<span class="codeline" id="line-224"><code>			<span class="keyword">if</span> <label for="r41" class="ident">f</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-225"><code>				<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-222" class="ident">Fprintf</a>(&amp;<label for="r35" class="ident">buf</label>, <span class="lit-string">"%#x %s\n"</span>, <label for="r39" class="ident">pc</label>, <label for="r41" class="ident">f</label>.<a href="../../../runtime/symtab.go.html#line-781" class="ident">Name</a>())</code></span>
<span class="codeline" id="line-226"><code>			}</code></span>
<span class="codeline" id="line-227"><code>		}</code></span>
<span class="codeline" id="line-228"><code></code></span>
<span class="codeline" id="line-229"><code>		<span class="comment">// Wait until here to check for err; the last</span></code></span>
<span class="codeline" id="line-230"><code><span class="comment">		// symbol will have an err because it doesn't end in +.</span></code></span>
<span class="codeline" id="line-231"><code>		<span class="keyword">if</span> <label for="r38" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-232"><code>			<span class="keyword">if</span> <label for="r38" class="ident">err</label> != <a href="../../../../pkg/io.html" class="ident i7">io</a>.<a href="../../../io/io.go.html#line-44" class="ident">EOF</a> {</code></span>
<span class="codeline" id="line-233"><code>				<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-222" class="ident">Fprintf</a>(&amp;<label for="r35" class="ident">buf</label>, <span class="lit-string">"reading request: %v\n"</span>, <label for="r38" class="ident">err</label>)</code></span>
<span class="codeline" id="line-234"><code>			}</code></span>
<span class="codeline" id="line-235"><code>			<span class="keyword">break</span></code></span>
<span class="codeline" id="line-236"><code>		}</code></span>
<span class="codeline" id="line-237"><code>	}</code></span>
<span class="codeline" id="line-238"><code></code></span>
<span class="codeline" id="line-239"><code>	<label for="r33" class="ident">w</label>.<a href="../server.go.html#line-140" class="ident">Write</a>(<label for="r35" class="ident">buf</label>.<a href="../../../bytes/buffer.go.html#line-54" class="ident">Bytes</a>())</code></span>
<span class="codeline" id="line-240"><code>}</code></span>
<span class="codeline" id="line-241"><code></code></span>
<span class="codeline" id="line-242"><code><span class="comment">// Handler returns an HTTP handler that serves the named profile.</span></code></span>
<span class="codeline" id="line-243"><code><span class="comment">// Available profiles can be found in [runtime/pprof.Profile].</span></code></span>
<span class="codeline" id="line-244"><code><span class="keyword">func</span> <label for="r42" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-Handler" class="ident">Handler</a></label>(<label for="r43" class="ident">name</label> <a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>) <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-88" class="ident">Handler</a> {</code></span>
<span class="codeline" id="line-245"><code>	<span class="keyword">return</span> <a href="#line-248" class="ident">handler</a>(<label for="r43" class="ident">name</label>)</code></span>
<span class="codeline" id="line-246"><code>}</code></span>
<span class="codeline" id="line-247"><code></code></span>
<span class="codeline" id="line-248"><code><span class="keyword">type</span> <a href="../../../../pkg/net/http/pprof.html#name-handler" class="ident">handler</a> <a href="../../../../pkg/builtin.html#name-string" class="ident">string</a></code></span>
<span class="codeline" id="line-249"><code></code></span>
<span class="codeline" id="line-250"><code><span class="keyword">func</span> (<label for="r44" class="ident">name</label> <a href="#line-248" class="ident">handler</a>) <label for="r45" class="ident"><a href="../../../../use/net/http/pprof..handler^31283.ServeHTTP.html" class="ident">ServeHTTP</a></label>(<label for="r46" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r47" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>) {</code></span>
<span class="codeline" id="line-251"><code>	<label for="r46" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"X-Content-Type-Options"</span>, <span class="lit-string">"nosniff"</span>)</code></span>
<span class="codeline" id="line-252"><code>	<label for="r48" class="ident">p</label> := <a href="../../../../pkg/runtime/pprof.html" class="ident i13">pprof</a>.<a href="../../../runtime/pprof/pprof.go.html#line-271" class="ident">Lookup</a>(<a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>(<label for="r44" class="ident">name</label>))</code></span>
<span class="codeline" id="line-253"><code>	<span class="keyword">if</span> <label for="r48" class="ident">p</label> == <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-254"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r46" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-40" class="ident">StatusNotFound</a>, <span class="lit-string">"Unknown profile"</span>)</code></span>
<span class="codeline" id="line-255"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-256"><code>	}</code></span>
<span class="codeline" id="line-257"><code>	<span class="keyword">if</span> <label for="r49" class="ident">sec</label> := <label for="r47" class="ident">r</label>.<a href="../request.go.html#line-1419" class="ident">FormValue</a>(<span class="lit-string">"seconds"</span>); <label for="r49" class="ident">sec</label> != <span class="lit-string">""</span> {</code></span>
<span class="codeline" id="line-258"><code>		<label for="r44" class="ident">name</label>.<a href="#line-275" class="ident">serveDeltaProfile</a>(<label for="r46" class="ident">w</label>, <label for="r47" class="ident">r</label>, <label for="r48" class="ident">p</label>, <label for="r49" class="ident">sec</label>)</code></span>
<span class="codeline" id="line-259"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-260"><code>	}</code></span>
<span class="codeline" id="line-261"><code>	<label for="r50" class="ident">gc</label>, <label for="r51" class="ident">_</label> := <a href="../../../../pkg/strconv.html" class="ident i16">strconv</a>.<a href="../../../strconv/atoi.go.html#line-242" class="ident">Atoi</a>(<label for="r47" class="ident">r</label>.<a href="../request.go.html#line-1419" class="ident">FormValue</a>(<span class="lit-string">"gc"</span>))</code></span>
<span class="codeline" id="line-262"><code>	<span class="keyword">if</span> <label for="r44" class="ident">name</label> == <span class="lit-string">"heap"</span> &amp;&amp; <label for="r50" class="ident">gc</label> &gt; <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-263"><code>		<a href="../../../../pkg/runtime.html" class="ident i12">runtime</a>.<a href="../../../runtime/mgc.go.html#line-467" class="ident">GC</a>()</code></span>
<span class="codeline" id="line-264"><code>	}</code></span>
<span class="codeline" id="line-265"><code>	<label for="r52" class="ident">debug</label>, <label for="r53" class="ident">_</label> := <a href="../../../../pkg/strconv.html" class="ident i16">strconv</a>.<a href="../../../strconv/atoi.go.html#line-242" class="ident">Atoi</a>(<label for="r47" class="ident">r</label>.<a href="../request.go.html#line-1419" class="ident">FormValue</a>(<span class="lit-string">"debug"</span>))</code></span>
<span class="codeline" id="line-266"><code>	<span class="keyword">if</span> <label for="r52" class="ident">debug</label> != <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-267"><code>		<label for="r46" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"text/plain; charset=utf-8"</span>)</code></span>
<span class="codeline" id="line-268"><code>	} <span class="keyword">else</span> {</code></span>
<span class="codeline" id="line-269"><code>		<label for="r46" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"application/octet-stream"</span>)</code></span>
<span class="codeline" id="line-270"><code>		<label for="r46" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Disposition"</span>, <a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-237" class="ident">Sprintf</a>(<span class="lit-string">`attachment; filename="%s"`</span>, <label for="r44" class="ident">name</label>))</code></span>
<span class="codeline" id="line-271"><code>	}</code></span>
<span class="codeline" id="line-272"><code>	<label for="r48" class="ident">p</label>.<a href="../../../runtime/pprof/pprof.go.html#line-372" class="ident">WriteTo</a>(<label for="r46" class="ident">w</label>, <label for="r52" class="ident">debug</label>)</code></span>
<span class="codeline" id="line-273"><code>}</code></span>
<span class="codeline" id="line-274"><code></code></span>
<span class="codeline" id="line-275"><code><span class="keyword">func</span> (<label for="r54" class="ident">name</label> <a href="#line-248" class="ident">handler</a>) <label for="r55" class="ident"><a href="../../../../use/net/http/pprof..handler^31283.serveDeltaProfile^ce9be.html" class="ident">serveDeltaProfile</a></label>(<label for="r56" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r57" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>, <label for="r58" class="ident">p</label> *<a href="../../../../pkg/runtime/pprof.html" class="ident i13">pprof</a>.<a href="../../../runtime/pprof/pprof.go.html#line-178" class="ident">Profile</a>, <label for="r59" class="ident">secStr</label> <a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>) {</code></span>
<span class="codeline" id="line-276"><code>	<label for="r60" class="ident">sec</label>, <label for="r61" class="ident">err</label> := <a href="../../../../pkg/strconv.html" class="ident i16">strconv</a>.<a href="../../../strconv/atoi.go.html#line-197" class="ident">ParseInt</a>(<label for="r59" class="ident">secStr</label>, <span class="lit-number">10</span>, <span class="lit-number">64</span>)</code></span>
<span class="codeline" id="line-277"><code>	<span class="keyword">if</span> <label for="r61" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> || <label for="r60" class="ident">sec</label> &lt;= <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-278"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-36" class="ident">StatusBadRequest</a>, <span class="lit-string">`invalid value for "seconds" - must be a positive integer`</span>)</code></span>
<span class="codeline" id="line-279"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-280"><code>	}</code></span>
<span class="codeline" id="line-281"><code>	<span class="comment">// 'name' should be a key in profileSupportsDelta.</span></code></span>
<span class="codeline" id="line-282"><code>	<span class="keyword">if</span> !<a href="#line-353" class="ident">profileSupportsDelta</a>[<label for="r54" class="ident">name</label>] {</code></span>
<span class="codeline" id="line-283"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-36" class="ident">StatusBadRequest</a>, <span class="lit-string">`"seconds" parameter is not supported for this profile type`</span>)</code></span>
<span class="codeline" id="line-284"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-285"><code>	}</code></span>
<span class="codeline" id="line-286"><code></code></span>
<span class="codeline" id="line-287"><code>	<a href="#line-123" class="ident">configureWriteDeadline</a>(<label for="r56" class="ident">w</label>, <label for="r57" class="ident">r</label>, <a href="../../../../pkg/builtin.html#name-float64" class="ident">float64</a>(<label for="r60" class="ident">sec</label>))</code></span>
<span class="codeline" id="line-288"><code></code></span>
<span class="codeline" id="line-289"><code>	<label for="r62" class="ident">debug</label>, <label for="r63" class="ident">_</label> := <a href="../../../../pkg/strconv.html" class="ident i16">strconv</a>.<a href="../../../strconv/atoi.go.html#line-242" class="ident">Atoi</a>(<label for="r57" class="ident">r</label>.<a href="../request.go.html#line-1419" class="ident">FormValue</a>(<span class="lit-string">"debug"</span>))</code></span>
<span class="codeline" id="line-290"><code>	<span class="keyword">if</span> <label for="r62" class="ident">debug</label> != <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-291"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-36" class="ident">StatusBadRequest</a>, <span class="lit-string">"seconds and debug params are incompatible"</span>)</code></span>
<span class="codeline" id="line-292"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-293"><code>	}</code></span>
<span class="codeline" id="line-294"><code>	<label for="r64" class="ident">p0</label>, <label for="r61" class="ident">err</label> := <a href="#line-339" class="ident">collectProfile</a>(<label for="r58" class="ident">p</label>)</code></span>
<span class="codeline" id="line-295"><code>	<span class="keyword">if</span> <label for="r61" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-296"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-66" class="ident">StatusInternalServerError</a>, <span class="lit-string">"failed to collect profile"</span>)</code></span>
<span class="codeline" id="line-297"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-298"><code>	}</code></span>
<span class="codeline" id="line-299"><code></code></span>
<span class="codeline" id="line-300"><code>	<label for="r65" class="ident">t</label> := <a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/sleep.go.html#line-143" class="ident">NewTimer</a>(<a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-911" class="ident">Duration</a>(<label for="r60" class="ident">sec</label>) * <a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-934" class="ident">Second</a>)</code></span>
<span class="codeline" id="line-301"><code>	<span class="keyword">defer</span> <label for="r65" class="ident">t</label>.<a href="../../../time/sleep.go.html#line-113" class="ident">Stop</a>()</code></span>
<span class="codeline" id="line-302"><code></code></span>
<span class="codeline" id="line-303"><code>	<a href="../../../runtime/select.go.html#line-122"><span class="keyword">select</span></a> {</code></span>
<span class="codeline" id="line-304"><code>	<span class="keyword">case</span> <a href="../../../runtime/chan.go.html#line-505">&lt;-</a><label for="r57" class="ident">r</label>.<a href="../request.go.html#line-352" class="ident">Context</a>().<a href="../../../context/context.go.html#line-108" class="ident">Done</a>():</code></span>
<span class="codeline" id="line-305"><code>		<label for="r66" class="ident">err</label> := <label for="r57" class="ident">r</label>.<a href="../request.go.html#line-352" class="ident">Context</a>().<a href="../../../context/context.go.html#line-115" class="ident">Err</a>()</code></span>
<span class="codeline" id="line-306"><code>		<span class="keyword">if</span> <label for="r66" class="ident">err</label> == <a href="../../../../pkg/context.html" class="ident i2">context</a>.<a href="../../../context/context.go.html#line-171" class="ident">DeadlineExceeded</a> {</code></span>
<span class="codeline" id="line-307"><code>			<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-44" class="ident">StatusRequestTimeout</a>, <label for="r66" class="ident">err</label>.Error())</code></span>
<span class="codeline" id="line-308"><code>		} <span class="keyword">else</span> { <span class="comment">// TODO: what's a good status code for canceled requests? 400?</span></code></span>
<span class="codeline" id="line-309"><code>			<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-66" class="ident">StatusInternalServerError</a>, <label for="r66" class="ident">err</label>.Error())</code></span>
<span class="codeline" id="line-310"><code>		}</code></span>
<span class="codeline" id="line-311"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-312"><code>	<span class="keyword">case</span> <a href="../../../runtime/chan.go.html#line-505">&lt;-</a><label for="r65" class="ident">t</label>.<a href="../../../time/sleep.go.html#line-90" class="ident">C</a>:</code></span>
<span class="codeline" id="line-313"><code>	}</code></span>
<span class="codeline" id="line-314"><code></code></span>
<span class="codeline" id="line-315"><code>	<label for="r67" class="ident">p1</label>, <label for="r61" class="ident">err</label> := <a href="#line-339" class="ident">collectProfile</a>(<label for="r58" class="ident">p</label>)</code></span>
<span class="codeline" id="line-316"><code>	<span class="keyword">if</span> <label for="r61" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-317"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-66" class="ident">StatusInternalServerError</a>, <span class="lit-string">"failed to collect profile"</span>)</code></span>
<span class="codeline" id="line-318"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-319"><code>	}</code></span>
<span class="codeline" id="line-320"><code>	<label for="r68" class="ident">ts</label> := <label for="r67" class="ident">p1</label>.<a href="../../../internal/profile/profile.go.html#line-32" class="ident">TimeNanos</a></code></span>
<span class="codeline" id="line-321"><code>	<label for="r69" class="ident">dur</label> := <label for="r67" class="ident">p1</label>.<a href="../../../internal/profile/profile.go.html#line-32" class="ident">TimeNanos</a> - <label for="r64" class="ident">p0</label>.<a href="../../../internal/profile/profile.go.html#line-32" class="ident">TimeNanos</a></code></span>
<span class="codeline" id="line-322"><code></code></span>
<span class="codeline" id="line-323"><code>	<label for="r64" class="ident">p0</label>.<a href="../../../internal/profile/profile.go.html#line-534" class="ident">Scale</a>(-<span class="lit-number">1</span>)</code></span>
<span class="codeline" id="line-324"><code></code></span>
<span class="codeline" id="line-325"><code>	<label for="r67" class="ident">p1</label>, <label for="r61" class="ident">err</label> = <a href="../../../../pkg/internal/profile.html" class="ident i6">profile</a>.<a href="../../../internal/profile/merge.go.html#line-21" class="ident">Merge</a>([]*<a href="../../../../pkg/internal/profile.html" class="ident i6">profile</a>.<a href="../../../internal/profile/profile.go.html#line-20" class="ident">Profile</a>{<label for="r64" class="ident">p0</label>, <label for="r67" class="ident">p1</label>})</code></span>
<span class="codeline" id="line-326"><code>	<span class="keyword">if</span> <label for="r61" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-327"><code>		<a href="#line-133" class="ident">serveError</a>(<label for="r56" class="ident">w</label>, <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../status.go.html#line-66" class="ident">StatusInternalServerError</a>, <span class="lit-string">"failed to compute delta"</span>)</code></span>
<span class="codeline" id="line-328"><code>		<span class="keyword">return</span></code></span>
<span class="codeline" id="line-329"><code>	}</code></span>
<span class="codeline" id="line-330"><code></code></span>
<span class="codeline" id="line-331"><code>	<label for="r67" class="ident">p1</label>.<a href="../../../internal/profile/profile.go.html#line-32" class="ident">TimeNanos</a> = <label for="r68" class="ident">ts</label> <span class="comment">// set since we don't know what profile.Merge set for TimeNanos.</span></code></span>
<span class="codeline" id="line-332"><code>	<label for="r67" class="ident">p1</label>.<a href="../../../internal/profile/profile.go.html#line-33" class="ident">DurationNanos</a> = <label for="r69" class="ident">dur</label></code></span>
<span class="codeline" id="line-333"><code></code></span>
<span class="codeline" id="line-334"><code>	<label for="r56" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"application/octet-stream"</span>)</code></span>
<span class="codeline" id="line-335"><code>	<label for="r56" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Disposition"</span>, <a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-237" class="ident">Sprintf</a>(<span class="lit-string">`attachment; filename="%s-delta"`</span>, <label for="r54" class="ident">name</label>))</code></span>
<span class="codeline" id="line-336"><code>	<label for="r67" class="ident">p1</label>.<a href="../../../internal/profile/profile.go.html#line-174" class="ident">Write</a>(<label for="r56" class="ident">w</label>)</code></span>
<span class="codeline" id="line-337"><code>}</code></span>
<span class="codeline" id="line-338"><code></code></span>
<span class="codeline" id="line-339"><code><span class="keyword">func</span> <label for="r70" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-collectProfile" class="ident">collectProfile</a></label>(<label for="r71" class="ident">p</label> *<a href="../../../../pkg/runtime/pprof.html" class="ident i13">pprof</a>.<a href="../../../runtime/pprof/pprof.go.html#line-178" class="ident">Profile</a>) (*<a href="../../../../pkg/internal/profile.html" class="ident i6">profile</a>.<a href="../../../internal/profile/profile.go.html#line-20" class="ident">Profile</a>, <a href="../../../../pkg/builtin.html#name-error" class="ident">error</a>) {</code></span>
<span class="codeline" id="line-340"><code>	<span class="keyword">var</span> <label for="r72" class="ident">buf</label> <a href="../../../../pkg/bytes.html" class="ident i1">bytes</a>.<a href="../../../bytes/buffer.go.html#line-20" class="ident">Buffer</a></code></span>
<span class="codeline" id="line-341"><code>	<span class="keyword">if</span> <label for="r73" class="ident">err</label> := <label for="r71" class="ident">p</label>.<a href="../../../runtime/pprof/pprof.go.html#line-372" class="ident">WriteTo</a>(&amp;<label for="r72" class="ident">buf</label>, <span class="lit-number">0</span>); <label for="r73" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-342"><code>		<span class="keyword">return</span> <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <label for="r73" class="ident">err</label></code></span>
<span class="codeline" id="line-343"><code>	}</code></span>
<span class="codeline" id="line-344"><code>	<label for="r74" class="ident">ts</label> := <a href="../../../../pkg/time.html" class="ident i18">time</a>.<a href="../../../time/time.go.html#line-1340" class="ident">Now</a>().<a href="../../../time/time.go.html#line-1453" class="ident">UnixNano</a>()</code></span>
<span class="codeline" id="line-345"><code>	<label for="r75" class="ident">p0</label>, <label for="r76" class="ident">err</label> := <a href="../../../../pkg/internal/profile.html" class="ident i6">profile</a>.<a href="../../../internal/profile/profile.go.html#line-124" class="ident">Parse</a>(&amp;<label for="r72" class="ident">buf</label>)</code></span>
<span class="codeline" id="line-346"><code>	<span class="keyword">if</span> <label for="r76" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-347"><code>		<span class="keyword">return</span> <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <label for="r76" class="ident">err</label></code></span>
<span class="codeline" id="line-348"><code>	}</code></span>
<span class="codeline" id="line-349"><code>	<label for="r75" class="ident">p0</label>.<a href="../../../internal/profile/profile.go.html#line-32" class="ident">TimeNanos</a> = <label for="r74" class="ident">ts</label></code></span>
<span class="codeline" id="line-350"><code>	<span class="keyword">return</span> <label for="r75" class="ident">p0</label>, <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a></code></span>
<span class="codeline" id="line-351"><code>}</code></span>
<span class="codeline" id="line-352"><code></code></span>
<span class="codeline" id="line-353"><code><span class="keyword">var</span> <a href="../../../../pkg/net/http/pprof.html#name-profileSupportsDelta" class="ident">profileSupportsDelta</a> = <span class="keyword">map</span>[<a href="#line-248" class="ident">handler</a>]<a href="../../../../pkg/builtin.html#name-bool" class="ident">bool</a>{</code></span>
<span class="codeline" id="line-354"><code>	<span class="lit-string">"allocs"</span>:       <a href="../../../../pkg/builtin.html#name-true" class="ident">true</a>,</code></span>
<span class="codeline" id="line-355"><code>	<span class="lit-string">"block"</span>:        <a href="../../../../pkg/builtin.html#name-true" class="ident">true</a>,</code></span>
<span class="codeline" id="line-356"><code>	<span class="lit-string">"goroutine"</span>:    <a href="../../../../pkg/builtin.html#name-true" class="ident">true</a>,</code></span>
<span class="codeline" id="line-357"><code>	<span class="lit-string">"heap"</span>:         <a href="../../../../pkg/builtin.html#name-true" class="ident">true</a>,</code></span>
<span class="codeline" id="line-358"><code>	<span class="lit-string">"mutex"</span>:        <a href="../../../../pkg/builtin.html#name-true" class="ident">true</a>,</code></span>
<span class="codeline" id="line-359"><code>	<span class="lit-string">"threadcreate"</span>: <a href="../../../../pkg/builtin.html#name-true" class="ident">true</a>,</code></span>
<span class="codeline" id="line-360"><code>}</code></span>
<span class="codeline" id="line-361"><code></code></span>
<span class="codeline" id="line-362"><code><span class="keyword">var</span> <a href="../../../../pkg/net/http/pprof.html#name-profileDescriptions" class="ident">profileDescriptions</a> = <span class="keyword">map</span>[<a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>]<a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>{</code></span>
<span class="codeline" id="line-363"><code>	<span class="lit-string">"allocs"</span>:       <span class="lit-string">"A sampling of all past memory allocations"</span>,</code></span>
<span class="codeline" id="line-364"><code>	<span class="lit-string">"block"</span>:        <span class="lit-string">"Stack traces that led to blocking on synchronization primitives"</span>,</code></span>
<span class="codeline" id="line-365"><code>	<span class="lit-string">"cmdline"</span>:      <span class="lit-string">"The command line invocation of the current program"</span>,</code></span>
<span class="codeline" id="line-366"><code>	<span class="lit-string">"goroutine"</span>:    <span class="lit-string">"Stack traces of all current goroutines. Use debug=2 as a query parameter to export in the same format as an unrecovered panic."</span>,</code></span>
<span class="codeline" id="line-367"><code>	<span class="lit-string">"heap"</span>:         <span class="lit-string">"A sampling of memory allocations of live objects. You can specify the gc GET parameter to run GC before taking the heap sample."</span>,</code></span>
<span class="codeline" id="line-368"><code>	<span class="lit-string">"mutex"</span>:        <span class="lit-string">"Stack traces of holders of contended mutexes"</span>,</code></span>
<span class="codeline" id="line-369"><code>	<span class="lit-string">"profile"</span>:      <span class="lit-string">"CPU profile. You can specify the duration in the seconds GET parameter. After you get the profile file, use the go tool pprof command to investigate the profile."</span>,</code></span>
<span class="codeline" id="line-370"><code>	<span class="lit-string">"symbol"</span>:       <span class="lit-string">"Maps given program counters to function names. Counters can be specified in a GET raw query or POST body, multiple counters are separated by '+'."</span>,</code></span>
<span class="codeline" id="line-371"><code>	<span class="lit-string">"threadcreate"</span>: <span class="lit-string">"Stack traces that led to the creation of new OS threads"</span>,</code></span>
<span class="codeline" id="line-372"><code>	<span class="lit-string">"trace"</span>:        <span class="lit-string">"A trace of execution of the current program. You can specify the duration in the seconds GET parameter. After you get the trace file, use the go tool trace command to investigate the trace."</span>,</code></span>
<span class="codeline" id="line-373"><code>}</code></span>
<span class="codeline" id="line-374"><code></code></span>
<span class="codeline" id="line-375"><code><span class="keyword">type</span> <a href="../../../../pkg/net/http/pprof.html#name-profileEntry" class="ident">profileEntry</a> <span class="keyword">struct</span> {</code></span>
<span class="codeline" id="line-376"><code>	<a href="../../../../use/net/http/pprof..profileEntry^33704.Name.html" class="ident">Name</a>  <a href="../../../../pkg/builtin.html#name-string" class="ident">string</a></code></span>
<span class="codeline" id="line-377"><code>	<a href="../../../../use/net/http/pprof..profileEntry^33704.Href.html" class="ident">Href</a>  <a href="../../../../pkg/builtin.html#name-string" class="ident">string</a></code></span>
<span class="codeline" id="line-378"><code>	<a href="../../../../use/net/http/pprof..profileEntry^33704.Desc.html" class="ident">Desc</a>  <a href="../../../../pkg/builtin.html#name-string" class="ident">string</a></code></span>
<span class="codeline" id="line-379"><code>	<a href="../../../../use/net/http/pprof..profileEntry^33704.Count.html" class="ident">Count</a> <a href="../../../../pkg/builtin.html#name-int" class="ident">int</a></code></span>
<span class="codeline" id="line-380"><code>}</code></span>
<span class="codeline" id="line-381"><code></code></span>
<span class="codeline" id="line-382"><code><span class="comment">// Index responds with the pprof-formatted profile named by the request.</span></code></span>
<span class="codeline" id="line-383"><code><span class="comment">// For example, "/debug/pprof/heap" serves the "heap" profile.</span></code></span>
<span class="codeline" id="line-384"><code><span class="comment">// Index responds to a request for "/debug/pprof/" with an HTML page</span></code></span>
<span class="codeline" id="line-385"><code><span class="comment">// listing the available profiles.</span></code></span>
<span class="codeline" id="line-386"><code><span class="keyword">func</span> <label for="r77" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-Index" class="ident">Index</a></label>(<label for="r78" class="ident">w</label> <a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../server.go.html#line-96" class="ident">ResponseWriter</a>, <label for="r79" class="ident">r</label> *<a href="../../../../pkg/net/http.html" class="ident i9">http</a>.<a href="../request.go.html#line-113" class="ident">Request</a>) {</code></span>
<span class="codeline" id="line-387"><code>	<span class="keyword">if</span> <label for="r80" class="ident">name</label>, <label for="r81" class="ident">found</label> := <a href="../../../../pkg/strings.html" class="ident i17">strings</a>.<a href="../../../strings/strings.go.html#line-1286" class="ident">CutPrefix</a>(<label for="r79" class="ident">r</label>.<a href="../request.go.html#line-130" class="ident">URL</a>.<a href="../../url/url.go.html#line-376" class="ident">Path</a>, <span class="lit-string">"/debug/pprof/"</span>); <label for="r81" class="ident">found</label> {</code></span>
<span class="codeline" id="line-388"><code>		<span class="keyword">if</span> <label for="r80" class="ident">name</label> != <span class="lit-string">""</span> {</code></span>
<span class="codeline" id="line-389"><code>			<a href="#line-248" class="ident">handler</a>(<label for="r80" class="ident">name</label>).<a href="#line-250" class="ident">ServeHTTP</a>(<label for="r78" class="ident">w</label>, <label for="r79" class="ident">r</label>)</code></span>
<span class="codeline" id="line-390"><code>			<span class="keyword">return</span></code></span>
<span class="codeline" id="line-391"><code>		}</code></span>
<span class="codeline" id="line-392"><code>	}</code></span>
<span class="codeline" id="line-393"><code></code></span>
<span class="codeline" id="line-394"><code>	<label for="r78" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"X-Content-Type-Options"</span>, <span class="lit-string">"nosniff"</span>)</code></span>
<span class="codeline" id="line-395"><code>	<label for="r78" class="ident">w</label>.<a href="../server.go.html#line-117" class="ident">Header</a>().<a href="../header.go.html#line-39" class="ident">Set</a>(<span class="lit-string">"Content-Type"</span>, <span class="lit-string">"text/html; charset=utf-8"</span>)</code></span>
<span class="codeline" id="line-396"><code></code></span>
<span class="codeline" id="line-397"><code>	<span class="keyword">var</span> <label for="r82" class="ident">profiles</label> []<a href="#line-375" class="ident">profileEntry</a></code></span>
<span class="codeline" id="line-398"><code>	<span class="keyword">for</span> <label for="r83" class="ident">_</label>, <label for="r84" class="ident">p</label> := <span class="keyword">range</span> <a href="../../../../pkg/runtime/pprof.html" class="ident i13">pprof</a>.<a href="../../../runtime/pprof/pprof.go.html#line-278" class="ident">Profiles</a>() {</code></span>
<span class="codeline" id="line-399"><code>		<label for="r82" class="ident">profiles</label> = <a href="../../../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r82" class="ident">profiles</label>, <a href="#line-375" class="ident">profileEntry</a>{</code></span>
<span class="codeline" id="line-400"><code>			<a href="#line-376" class="ident">Name</a>:  <label for="r84" class="ident">p</label>.<a href="../../../runtime/pprof/pprof.go.html#line-294" class="ident">Name</a>(),</code></span>
<span class="codeline" id="line-401"><code>			<a href="#line-377" class="ident">Href</a>:  <label for="r84" class="ident">p</label>.<a href="../../../runtime/pprof/pprof.go.html#line-294" class="ident">Name</a>(),</code></span>
<span class="codeline" id="line-402"><code>			<a href="#line-378" class="ident">Desc</a>:  <a href="#line-362" class="ident">profileDescriptions</a>[<label for="r84" class="ident">p</label>.<a href="../../../runtime/pprof/pprof.go.html#line-294" class="ident">Name</a>()],</code></span>
<span class="codeline" id="line-403"><code>			<a href="#line-379" class="ident">Count</a>: <label for="r84" class="ident">p</label>.<a href="../../../runtime/pprof/pprof.go.html#line-299" class="ident">Count</a>(),</code></span>
<span class="codeline" id="line-404"><code>		})</code></span>
<span class="codeline" id="line-405"><code>	}</code></span>
<span class="codeline" id="line-406"><code></code></span>
<span class="codeline" id="line-407"><code>	<span class="comment">// Adding other profiles exposed from within this package</span></code></span>
<span class="codeline" id="line-408"><code>	<span class="keyword">for</span> <label for="r85" class="ident">_</label>, <label for="r86" class="ident">p</label> := <span class="keyword">range</span> []<a href="../../../../pkg/builtin.html#name-string" class="ident">string</a>{<span class="lit-string">"cmdline"</span>, <span class="lit-string">"profile"</span>, <span class="lit-string">"symbol"</span>, <span class="lit-string">"trace"</span>} {</code></span>
<span class="codeline" id="line-409"><code>		<label for="r82" class="ident">profiles</label> = <a href="../../../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r82" class="ident">profiles</label>, <a href="#line-375" class="ident">profileEntry</a>{</code></span>
<span class="codeline" id="line-410"><code>			<a href="#line-376" class="ident">Name</a>: <label for="r86" class="ident">p</label>,</code></span>
<span class="codeline" id="line-411"><code>			<a href="#line-377" class="ident">Href</a>: <label for="r86" class="ident">p</label>,</code></span>
<span class="codeline" id="line-412"><code>			<a href="#line-378" class="ident">Desc</a>: <a href="#line-362" class="ident">profileDescriptions</a>[<label for="r86" class="ident">p</label>],</code></span>
<span class="codeline" id="line-413"><code>		})</code></span>
<span class="codeline" id="line-414"><code>	}</code></span>
<span class="codeline" id="line-415"><code></code></span>
<span class="codeline" id="line-416"><code>	<a href="../../../../pkg/slices.html" class="ident i15">slices</a>.<a href="../../../slices/sort.go.html#line-30" class="ident">SortFunc</a>(<label for="r82" class="ident">profiles</label>, <span class="keyword">func</span>(<label for="r87" class="ident">a</label>, <label for="r88" class="ident">b</label> <a href="#line-375" class="ident">profileEntry</a>) <a href="../../../../pkg/builtin.html#name-int" class="ident">int</a> {</code></span>
<span class="codeline" id="line-417"><code>		<span class="keyword">return</span> <a href="../../../../pkg/strings.html" class="ident i17">strings</a>.<a href="../../../strings/compare.go.html#line-15" class="ident">Compare</a>(<label for="r87" class="ident">a</label>.<a href="#line-376" class="ident">Name</a>, <label for="r88" class="ident">b</label>.<a href="#line-376" class="ident">Name</a>)</code></span>
<span class="codeline" id="line-418"><code>	})</code></span>
<span class="codeline" id="line-419"><code></code></span>
<span class="codeline" id="line-420"><code>	<span class="keyword">if</span> <label for="r89" class="ident">err</label> := <a href="#line-425" class="ident">indexTmplExecute</a>(<label for="r78" class="ident">w</label>, <label for="r82" class="ident">profiles</label>); <label for="r89" class="ident">err</label> != <a href="../../../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-421"><code>		<a href="../../../../pkg/log.html" class="ident i8">log</a>.<a href="../../../log/log.go.html#line-388" class="ident">Print</a>(<label for="r89" class="ident">err</label>)</code></span>
<span class="codeline" id="line-422"><code>	}</code></span>
<span class="codeline" id="line-423"><code>}</code></span>
<span class="codeline" id="line-424"><code></code></span>
<span class="codeline" id="line-425"><code><span class="keyword">func</span> <label for="r90" class="ident"><a href="../../../../pkg/net/http/pprof.html#name-indexTmplExecute" class="ident">indexTmplExecute</a></label>(<label for="r91" class="ident">w</label> <a href="../../../../pkg/io.html" class="ident i7">io</a>.<a href="../../../io/io.go.html#line-99" class="ident">Writer</a>, <label for="r92" class="ident">profiles</label> []<a href="#line-375" class="ident">profileEntry</a>) <a href="../../../../pkg/builtin.html#name-error" class="ident">error</a> {</code></span>
<span class="codeline" id="line-426"><code>	<span class="keyword">var</span> <label for="r93" class="ident">b</label> <a href="../../../../pkg/bytes.html" class="ident i1">bytes</a>.<a href="../../../bytes/buffer.go.html#line-20" class="ident">Buffer</a></code></span>
<span class="codeline" id="line-427"><code>	<label for="r93" class="ident">b</label>.<a href="../../../bytes/buffer.go.html#line-187" class="ident">WriteString</a>(<span class="lit-string">`&lt;html&gt;</span></code></span>
<span class="codeline" id="line-428"><code><span class="lit-string">&lt;head&gt;</span></code></span>
<span class="codeline" id="line-429"><code><span class="lit-string">&lt;title&gt;/debug/pprof/&lt;/title&gt;</span></code></span>
<span class="codeline" id="line-430"><code><span class="lit-string">&lt;style&gt;</span></code></span>
<span class="codeline" id="line-431"><code><span class="lit-string">.profile-name{</span></code></span>
<span class="codeline" id="line-432"><code><span class="lit-string">	display:inline-block;</span></code></span>
<span class="codeline" id="line-433"><code><span class="lit-string">	width:6rem;</span></code></span>
<span class="codeline" id="line-434"><code><span class="lit-string">}</span></code></span>
<span class="codeline" id="line-435"><code><span class="lit-string">&lt;/style&gt;</span></code></span>
<span class="codeline" id="line-436"><code><span class="lit-string">&lt;/head&gt;</span></code></span>
<span class="codeline" id="line-437"><code><span class="lit-string">&lt;body&gt;</span></code></span>
<span class="codeline" id="line-438"><code><span class="lit-string">/debug/pprof/</span></code></span>
<span class="codeline" id="line-439"><code><span class="lit-string">&lt;br&gt;</span></code></span>
<span class="codeline" id="line-440"><code><span class="lit-string">&lt;p&gt;Set debug=1 as a query parameter to export in legacy text format&lt;/p&gt;</span></code></span>
<span class="codeline" id="line-441"><code><span class="lit-string">&lt;br&gt;</span></code></span>
<span class="codeline" id="line-442"><code><span class="lit-string">Types of profiles available:</span></code></span>
<span class="codeline" id="line-443"><code><span class="lit-string">&lt;table&gt;</span></code></span>
<span class="codeline" id="line-444"><code><span class="lit-string">&lt;thead&gt;&lt;td&gt;Count&lt;/td&gt;&lt;td&gt;Profile&lt;/td&gt;&lt;/thead&gt;</span></code></span>
<span class="codeline" id="line-445"><code><span class="lit-string">`</span>)</code></span>
<span class="codeline" id="line-446"><code></code></span>
<span class="codeline" id="line-447"><code>	<span class="keyword">for</span> <label for="r94" class="ident">_</label>, <label for="r95" class="ident">profile</label> := <span class="keyword">range</span> <label for="r92" class="ident">profiles</label> {</code></span>
<span class="codeline" id="line-448"><code>		<label for="r96" class="ident">link</label> := &amp;<a href="../../../../pkg/net/url.html" class="ident i10">url</a>.<a href="../../url/url.go.html#line-371" class="ident">URL</a>{<a href="../../url/url.go.html#line-376" class="ident">Path</a>: <label for="r95" class="ident">profile</label>.<a href="#line-377" class="ident">Href</a>, <a href="../../url/url.go.html#line-380" class="ident">RawQuery</a>: <span class="lit-string">"debug=1"</span>}</code></span>
<span class="codeline" id="line-449"><code>		<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-222" class="ident">Fprintf</a>(&amp;<label for="r93" class="ident">b</label>, <span class="lit-string">"&lt;tr&gt;&lt;td&gt;%d&lt;/td&gt;&lt;td&gt;&lt;a href='%s'&gt;%s&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>, <label for="r95" class="ident">profile</label>.<a href="#line-379" class="ident">Count</a>, <label for="r96" class="ident">link</label>, <a href="../../../../pkg/html.html" class="ident i4">html</a>.<a href="../../../html/escape.go.html#line-178" class="ident">EscapeString</a>(<label for="r95" class="ident">profile</label>.<a href="#line-376" class="ident">Name</a>))</code></span>
<span class="codeline" id="line-450"><code>	}</code></span>
<span class="codeline" id="line-451"><code></code></span>
<span class="codeline" id="line-452"><code>	<label for="r93" class="ident">b</label>.<a href="../../../bytes/buffer.go.html#line-187" class="ident">WriteString</a>(<span class="lit-string">`&lt;/table&gt;</span></code></span>
<span class="codeline" id="line-453"><code><span class="lit-string">&lt;a href="goroutine?debug=2"&gt;full goroutine stack dump&lt;/a&gt;</span></code></span>
<span class="codeline" id="line-454"><code><span class="lit-string">&lt;br&gt;</span></code></span>
<span class="codeline" id="line-455"><code><span class="lit-string">&lt;p&gt;</span></code></span>
<span class="codeline" id="line-456"><code><span class="lit-string">Profile Descriptions:</span></code></span>
<span class="codeline" id="line-457"><code><span class="lit-string">&lt;ul&gt;</span></code></span>
<span class="codeline" id="line-458"><code><span class="lit-string">`</span>)</code></span>
<span class="codeline" id="line-459"><code>	<span class="keyword">for</span> <label for="r97" class="ident">_</label>, <label for="r98" class="ident">profile</label> := <span class="keyword">range</span> <label for="r92" class="ident">profiles</label> {</code></span>
<span class="codeline" id="line-460"><code>		<a href="../../../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../../../fmt/print.go.html#line-222" class="ident">Fprintf</a>(&amp;<label for="r93" class="ident">b</label>, <span class="lit-string">"&lt;li&gt;&lt;div class=profile-name&gt;%s: &lt;/div&gt; %s&lt;/li&gt;\n"</span>, <a href="../../../../pkg/html.html" class="ident i4">html</a>.<a href="../../../html/escape.go.html#line-178" class="ident">EscapeString</a>(<label for="r98" class="ident">profile</label>.<a href="#line-376" class="ident">Name</a>), <a href="../../../../pkg/html.html" class="ident i4">html</a>.<a href="../../../html/escape.go.html#line-178" class="ident">EscapeString</a>(<label for="r98" class="ident">profile</label>.<a href="#line-378" class="ident">Desc</a>))</code></span>
<span class="codeline" id="line-461"><code>	}</code></span>
<span class="codeline" id="line-462"><code>	<label for="r93" class="ident">b</label>.<a href="../../../bytes/buffer.go.html#line-187" class="ident">WriteString</a>(<span class="lit-string">`&lt;/ul&gt;</span></code></span>
<span class="codeline" id="line-463"><code><span class="lit-string">&lt;/p&gt;</span></code></span>
<span class="codeline" id="line-464"><code><span class="lit-string">&lt;/body&gt;</span></code></span>
<span class="codeline" id="line-465"><code><span class="lit-string">&lt;/html&gt;`</span>)</code></span>
<span class="codeline" id="line-466"><code></code></span>
<span class="codeline" id="line-467"><code>	<label for="r99" class="ident">_</label>, <label for="r100" class="ident">err</label> := <label for="r91" class="ident">w</label>.<a href="../../../io/io.go.html#line-100" class="ident">Write</a>(<label for="r93" class="ident">b</label>.<a href="../../../bytes/buffer.go.html#line-54" class="ident">Bytes</a>())</code></span>
<span class="codeline" id="line-468"><code>	<span class="keyword">return</span> <label for="r100" class="ident">err</label></code></span>
<span class="codeline" id="line-469"><code>}</code></span>
</pre><pre id="footer">
The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.7.6</i>. (GOOS=linux GOARCH=amd64)</pre>