<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: unique</title>
<link href="../css/auto-v0.7.6.css" rel="stylesheet">
<script src="../jvs/golds-v0.7.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>unique</b></span>

<span class="title">Import Path</span>
	<a href="../index.html#pkg-unique">unique</a><i> (on <a href="https://pkg.go.dev/unique" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../dep/unique.html">9 packages</a>, and imported by <a href="../dep/unique.html#imported-by">one package</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">    <a href="../src/unique/canonmap.go.html">canonmap.go</a></span>
	<span class="nodocs">    <a href="../src/unique/clone.go.html">clone.go</a></span>
	<input type='checkbox' checked class="fold" id="file-2-fold-content"><label for="file-2-fold-content">  <a href="../src/unique/doc.go.html#doc">d</a> <a href="../src/unique/doc.go.html">doc.go</a></label><span id='file-2-fold-content-items' class="fold-items">
<span class="md-text">		The unique package provides facilities for canonicalizing ("interning")
		comparable values.</span>
</span>
	<span class="nodocs">    <a href="../src/unique/handle.go.html">handle.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 7, in which 1 is exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-Handle" data-popularity="140">	<input type='checkbox' class="fold" id="Handle-fold-content"><label for="Handle-fold-content"> <a href="../use/unique..Handle.html">type</a> <a href="../src/unique/handle.go.html#line-20">Handle</a>[T] <i>(struct)</i></label><span id='Handle-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

<span class="md-text">		Handle is a globally unique identity for some value of type T.
		
		Two handles compare equal exactly if the two values used to create the handles
		would have also compared equal. The comparison of two handles is trivial and
		typically much more efficient than comparing the values used to create them.</span>

		<input type='checkbox' class="fold" id="Handle-fold-fields"><label for="Handle-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='Handle-fold-fields-items' class="fold-items">
			<input type='checkbox' class="showhide" id="Handle-showhide-fields"><i><label for="Handle-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="Handle-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/handle.go.html#line-21">value</a> <i>*T</i></span></i></span></span>
		<input type='checkbox' class="fold" id="Handle-fold-methods"><label for="Handle-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='Handle-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Handle-fold-method-Value"><label for="Handle-fold-method-Value">( Handle[T]) <a href="../src/unique/handle.go.html#line-26">Value</a>() T</label><span id='Handle-fold-method-Value-docs' class="fold-docs">
<span class="md-text">				Value returns a shallow copy of the T value that produced the Handle.
				Value is safe for concurrent use by multiple goroutines.</span>
</span></span></span>
		<input type='checkbox' class="fold" id="Handle-fold-results"><label for="Handle-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='Handle-fold-results-items' class="fold-items"><span>
			func <a href="#name-Make">Make</a>[T](value T) <b>Handle</b>[T]</span></span>
		<input type='checkbox' class="fold" id="Handle-fold-values"><label for="Handle-fold-values">As Types Of (<i>total 3, none are exported</i>)</label><span id='Handle-fold-values-items' class="fold-items">
			<input type='checkbox' class="showhide" id="Handle-showhide-values"><i><label for="Handle-showhide-values" class="show-inline">/* 3 unexporteds ... */</label><label for="Handle-showhide-values" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			  var net/netip.<a href="net/netip.html#name-z0">z0</a> <a href="">unique</a>.<b><a href="#name-Handle">Handle</a></b>[<a href="net/netip.html#name-addrDetail">addrDetail</a>]</i></span><span class="hidden"><i>
			  var net/netip.<a href="net/netip.html#name-z4">z4</a> <a href="">unique</a>.<a href="#name-Handle">Handle</a>[...]</i></span><span class="hidden"><i>
			  var net/netip.<a href="net/netip.html#name-z6noz">z6noz</a> <a href="">unique</a>.<a href="#name-Handle">Handle</a>[...]</i></span></span>

</span></div></div><div>	<input type='checkbox' class="showhide" id="unexported-typenames-showhide"><i><label for="unexported-typenames-showhide" class="show-inline">/* 6 unexporteds ... */</label><label for="unexported-typenames-showhide" class="hide-inline">/* 6 unexporteds: */</label></i><div class="anchor type-res hidden" id="name-canonMap" data-popularity="275">	<input type='checkbox' class="fold" id="canonMap-fold-content"><label for="canonMap-fold-content"> <a href="../use/unique..canonMap^336cb.html">type</a> <a href="../src/unique/canonmap.go.html#line-20">canonMap</a>[T] <i>(struct)</i></label><span id='canonMap-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

<span class="md-text">		canonMap is a map of T -&gt; *T. The map controls the creation
		of a canonical *T, and elements of the map are automatically
		deleted when the canonical *T is no longer referenced.</span>

		<input type='checkbox' class="fold" id="canonMap-fold-fields"><label for="canonMap-fold-fields">Fields (<i>total 3, none are exported</i>)</label><span id='canonMap-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="canonMap-showhide-fields"><i><label for="canonMap-showhide-fields" class="show-inline">/* 3 unexporteds ... */</label><label for="canonMap-showhide-fields" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-22">hash</a> <i>func(<a href="unsafe.html">unsafe</a>.<a href="unsafe.html#name-Pointer">Pointer</a>, <a href="builtin.html#name-uintptr">uintptr</a>) <a href="builtin.html#name-uintptr">uintptr</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-21">root</a> <i><a href="sync/atomic.html">atomic</a>.<a href="sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-indirect">indirect</a>[T]]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-23">seed</a> <i><a href="builtin.html#name-uintptr">uintptr</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="canonMap-fold-methods"><label for="canonMap-fold-methods">Methods (<i>total 4, in which 2 are exported</i>)</label><span id='canonMap-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*canonMap[T]) <a href="../src/unique/canonmap.go.html#line-37">Load</a>(key T) *T</span></span><span>
			<span class="nodocs">(*canonMap[T]) <a href="../src/unique/canonmap.go.html#line-58">LoadOrStore</a>(key T) *T</span></span>
			<input type='checkbox' checked class="showhide" id="canonMap-showhide-methods"><i><label for="canonMap-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="canonMap-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="canonMap-fold-method-cleanup"><label for="canonMap-fold-method-cleanup">(*canonMap[T]) <a href="../src/unique/canonmap.go.html#line-180">cleanup</a>(hash <a href="builtin.html#name-uintptr">uintptr</a>, wp <a href="weak.html">weak</a>.<a href="weak.html#name-Pointer">Pointer</a>[T])</label><span id='canonMap-fold-method-cleanup-docs' class="fold-docs">
<span class="md-text">				cleanup deletes the entry corresponding to wp in the canon map, if it's
				still in the map. wp must have a Value method that returns nil by the
				time this function is called. hash must be the hash of the value that
				wp once pointed to (that is, the hash of *wp.Value()).</span>
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="canonMap-fold-method-expand"><label for="canonMap-fold-method-expand">(*canonMap[T]) <a href="../src/unique/canonmap.go.html#line-145">expand</a>(oldEntry, newEntry *<a href="#name-entry">entry</a>[T], newHash <a href="builtin.html#name-uintptr">uintptr</a>, hashShift <a href="builtin.html#name-uint">uint</a>, parent *<a href="#name-indirect">indirect</a>[T]) *<a href="#name-node">node</a>[T]</label><span id='canonMap-fold-method-expand-docs' class="fold-docs">
<span class="md-text">				expand takes oldEntry and newEntry whose hashes conflict from bit 64 down to hashShift and
				produces a subtree of indirect nodes to hold the two new entries. newHash is the hash of
				the value in the new entry.</span>
</span></i></span></span>
		<input type='checkbox' class="fold" id="canonMap-fold-results"><label for="canonMap-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='canonMap-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="canonMap-showhide-inputofs"><i><label for="canonMap-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="canonMap-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newCanonMap">newCanonMap</a>[T]() *<b>canonMap</b>[T]</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-cloneSeq" data-popularity="185">	<input type='checkbox' class="fold" id="cloneSeq-fold-content"><label for="cloneSeq-fold-content"> <a href="../use/unique..cloneSeq^6e9d9.html">type</a> <a href="../src/unique/clone.go.html#line-33">cloneSeq</a> <i>(struct)</i></label><span id='cloneSeq-fold-content-docs' class="fold-docs">
<span class="md-text">		cloneSeq describes how to clone a value of a particular type.</span>

		<input type='checkbox' class="fold" id="cloneSeq-fold-fields"><label for="cloneSeq-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='cloneSeq-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="cloneSeq-showhide-fields"><i><label for="cloneSeq-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="cloneSeq-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/clone.go.html#line-34">stringOffsets</a> <i>[]<a href="builtin.html#name-uintptr">uintptr</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="cloneSeq-fold-results"><label for="cloneSeq-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='cloneSeq-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="cloneSeq-showhide-inputofs"><i><label for="cloneSeq-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="cloneSeq-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-makeCloneSeq">makeCloneSeq</a>(typ *<a href="internal/abi.html">abi</a>.<a href="internal/abi.html#name-Type">Type</a>) <b>cloneSeq</b></i></span></span>
		<input type='checkbox' class="fold" id="cloneSeq-fold-params"><label for="cloneSeq-fold-params">As Inputs Of (<i>at least 3, none are exported</i>)</label><span id='cloneSeq-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="cloneSeq-showhide-outputofs"><i><label for="cloneSeq-showhide-outputofs" class="show-inline">/* 3+ unexporteds ... */</label><label for="cloneSeq-showhide-outputofs" class="hide-inline">/* 3+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-buildArrayCloneSeq">buildArrayCloneSeq</a>(typ *<a href="internal/abi.html">abi</a>.<a href="internal/abi.html#name-Type">Type</a>, seq *<b>cloneSeq</b>, baseOffset <a href="builtin.html#name-uintptr">uintptr</a>)</i></span><span class="hidden"><i>
			func <a href="#name-buildStructCloneSeq">buildStructCloneSeq</a>(typ *<a href="internal/abi.html">abi</a>.<a href="internal/abi.html#name-Type">Type</a>, seq *<b>cloneSeq</b>, baseOffset <a href="builtin.html#name-uintptr">uintptr</a>)</i></span><span class="hidden"><i>
			func <a href="#name-clone">clone</a>[T](value T, seq *<b>cloneSeq</b>) T</i></span></span>
		<input type='checkbox' class="fold" id="cloneSeq-fold-values"><label for="cloneSeq-fold-values">As Types Of (<i>only one, which is unexported</i>)</label><span id='cloneSeq-fold-values-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="cloneSeq-showhide-values"><i><label for="cloneSeq-showhide-values" class="show-inline">/* one unexported ... */</label><label for="cloneSeq-showhide-values" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			  var <a href="#name-singleStringClone">singleStringClone</a></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-entry" data-popularity="325">	<input type='checkbox' class="fold" id="entry-fold-content"><label for="entry-fold-content"> <a href="../use/unique..entry^923fe.html">type</a> <a href="../src/unique/canonmap.go.html#line-308">entry</a>[T] <i>(struct)</i></label><span id='entry-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

<span class="md-text">		entry is a leaf node in the hash-trie.</span>

		<input type='checkbox' class="fold" id="entry-fold-fields"><label for="entry-fold-fields">Fields (<i>total 5, none are exported</i>)</label><span id='entry-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="entry-showhide-fields"><i><label for="entry-showhide-fields" class="show-inline">/* 5 unexporteds ... */</label><label for="entry-showhide-fields" class="hide-inline">/* 5 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-312">hash</a> <i><a href="builtin.html#name-uintptr">uintptr</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-311">key</a> <i><a href="weak.html">weak</a>.<a href="weak.html#name-Pointer">Pointer</a>[T]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-309">node</a> <i><a href="#name-node">node</a>[T]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-309" class="path-duplicate">node</a>.<a href="../src/unique/canonmap.go.html#line-258">isEntry</a> <i><a href="builtin.html#name-bool">bool</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-field-overflow"><label for="entry-fold-field-overflow"><a href="../src/unique/canonmap.go.html#line-310">overflow</a> <i><a href="sync/atomic.html">atomic</a>.<a href="sync/atomic.html#name-Pointer">Pointer</a>[<b>entry</b>[T]]</i></label><span id='entry-fold-field-overflow-docs' class="fold-docs">
<span class="md-text">				// Overflow for hash collisions.</span>
</span></i></span></span>
		<input type='checkbox' class="fold" id="entry-fold-methods"><label for="entry-fold-methods">Methods (<i>total 5, none are exported</i>)</label><span id='entry-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="entry-showhide-methods"><i><label for="entry-showhide-methods" class="show-inline">/* 5 unexporteds ... */</label><label for="entry-showhide-methods" class="hide-inline">/* 5 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*entry[T]) <a href="../src/unique/canonmap.go.html#line-261">entry</a>() *<b>entry</b>[T]</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-method-hasWeakPointer"><label for="entry-fold-method-hasWeakPointer">(*entry[T]) <a href="../src/unique/canonmap.go.html#line-341">hasWeakPointer</a>(wp <a href="weak.html">weak</a>.<a href="weak.html#name-Pointer">Pointer</a>[T]) <a href="builtin.html#name-bool">bool</a></label><span id='entry-fold-method-hasWeakPointer-docs' class="fold-docs">
<span class="md-text">				hasWeakPointer returns true if the provided weak pointer can be found in the overflow chain.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*entry[T]) <a href="../src/unique/canonmap.go.html#line-268">indirect</a>() *<a href="#name-indirect">indirect</a>[T]</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-method-lookup"><label for="entry-fold-method-lookup">(*entry[T]) <a href="../src/unique/canonmap.go.html#line-329">lookup</a>(key T) (*T, <a href="weak.html">weak</a>.<a href="weak.html#name-Pointer">Pointer</a>[T])</label><span id='entry-fold-method-lookup-docs' class="fold-docs">
<span class="md-text">				lookup finds the entry in the overflow chain that has the provided key.
				
				Returns the key's canonical pointer and the weak pointer for that canonical pointer.</span>
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-method-prune"><label for="entry-fold-method-prune">(*entry[T]) <a href="../src/unique/canonmap.go.html#line-354">prune</a>() *<b>entry</b>[T]</label><span id='entry-fold-method-prune-docs' class="fold-docs">
<span class="md-text">				prune removes all entries in the overflow chain whose keys are nil.
				
				The caller must hold the lock on e's parent node.</span>
</span></i></span></span>
		<input type='checkbox' class="fold" id="entry-fold-results"><label for="entry-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='entry-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="entry-showhide-inputofs"><i><label for="entry-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="entry-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newEntryNode">newEntryNode</a>[T](key T, hash <a href="builtin.html#name-uintptr">uintptr</a>) (*<b>entry</b>[T], *T, <a href="weak.html">weak</a>.<a href="weak.html#name-Pointer">Pointer</a>[T])</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-indirect" data-popularity="260">	<input type='checkbox' class="fold" id="indirect-fold-content"><label for="indirect-fold-content"> <a href="../use/unique..indirect^fdbf5.html">type</a> <a href="../src/unique/canonmap.go.html#line-286">indirect</a>[T] <i>(struct)</i></label><span id='indirect-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

<span class="md-text">		indirect is an internal node in the hash-trie.</span>

		<input type='checkbox' class="fold" id="indirect-fold-fields"><label for="indirect-fold-fields">Fields (<i>total 6, none are exported</i>)</label><span id='indirect-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-fields"><i><label for="indirect-showhide-fields" class="show-inline">/* 6 unexporteds ... */</label><label for="indirect-showhide-fields" class="hide-inline">/* 6 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-291">children</a> <i>[16]<a href="sync/atomic.html">atomic</a>.<a href="sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-node">node</a>[T]]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-288">dead</a> <i><a href="sync/atomic.html">atomic</a>.<a href="sync/atomic.html#name-Bool">Bool</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="indirect-fold-field-mu"><label for="indirect-fold-field-mu"><a href="../src/unique/canonmap.go.html#line-290">mu</a> <i><a href="sync.html">sync</a>.<a href="sync.html#name-Mutex">Mutex</a></i></label><span id='indirect-fold-field-mu-docs' class="fold-docs">
<span class="md-text">				// Protects mutation to children and any children that are entry nodes.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-287">node</a> <i><a href="#name-node">node</a>[T]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-287" class="path-duplicate">node</a>.<a href="../src/unique/canonmap.go.html#line-258">isEntry</a> <i><a href="builtin.html#name-bool">bool</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-289">parent</a> <i>*<b>indirect</b>[T]</i></span></i></span></span>
		<input type='checkbox' class="fold" id="indirect-fold-methods"><label for="indirect-fold-methods">Methods (<i>total 3, none are exported</i>)</label><span id='indirect-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-methods"><i><label for="indirect-showhide-methods" class="show-inline">/* 3 unexporteds ... */</label><label for="indirect-showhide-methods" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*indirect[T]) <a href="../src/unique/canonmap.go.html#line-298">empty</a>() <a href="builtin.html#name-bool">bool</a></span></i></span><span class="hidden"><i>
			<span class="nodocs">(*indirect[T]) <a href="../src/unique/canonmap.go.html#line-261">entry</a>() *<a href="#name-entry">entry</a>[T]</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*indirect[T]) <a href="../src/unique/canonmap.go.html#line-268">indirect</a>() *<b>indirect</b>[T]</span></i></span></span>
		<input type='checkbox' class="fold" id="indirect-fold-results"><label for="indirect-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='indirect-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-inputofs"><i><label for="indirect-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="indirect-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newIndirectNode">newIndirectNode</a>[T](parent *<b>indirect</b>[T]) *<b>indirect</b>[T]</i></span></span>
		<input type='checkbox' class="fold" id="indirect-fold-params"><label for="indirect-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='indirect-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-outputofs"><i><label for="indirect-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="indirect-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newIndirectNode">newIndirectNode</a>[T](parent *<b>indirect</b>[T]) *<b>indirect</b>[T]</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-node" data-popularity="100">	<input type='checkbox' class="fold" id="node-fold-content"><label for="node-fold-content"> <a href="../use/unique..node^545ea.html">type</a> <a href="../src/unique/canonmap.go.html#line-257">node</a>[T] <i>(struct)</i></label><span id='node-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

<span class="md-text">		node is the header for a node. It's polymorphic and
		is actually either an entry or an indirect.</span>

		<input type='checkbox' class="fold" id="node-fold-fields"><label for="node-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='node-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="node-showhide-fields"><i><label for="node-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="node-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/canonmap.go.html#line-258">isEntry</a> <i><a href="builtin.html#name-bool">bool</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="node-fold-methods"><label for="node-fold-methods">Methods (<i>total 2, neither is exported</i>)</label><span id='node-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="node-showhide-methods"><i><label for="node-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="node-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*node[T]) <a href="../src/unique/canonmap.go.html#line-261">entry</a>() *<a href="#name-entry">entry</a>[T]</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*node[T]) <a href="../src/unique/canonmap.go.html#line-268">indirect</a>() *<a href="#name-indirect">indirect</a>[T]</span></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-uniqueMap" data-popularity="200">	<input type='checkbox' class="fold" id="uniqueMap-fold-content"><label for="uniqueMap-fold-content"> <a href="../use/unique..uniqueMap^68734.html">type</a> <a href="../src/unique/handle.go.html#line-66">uniqueMap</a>[T] <i>(struct)</i></label><span id='uniqueMap-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

		<input type='checkbox' class="fold" id="uniqueMap-fold-fields"><label for="uniqueMap-fold-fields">Fields (<i>total 6, none are exported</i>)</label><span id='uniqueMap-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="uniqueMap-showhide-fields"><i><label for="uniqueMap-showhide-fields" class="show-inline">/* 6 unexporteds ... */</label><label for="uniqueMap-showhide-fields" class="hide-inline">/* 6 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/handle.go.html#line-67">canonMap</a> <i>*<a href="#name-canonMap">canonMap</a>[T]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/handle.go.html#line-67" class="path-duplicate">canonMap</a>.<a href="../src/unique/canonmap.go.html#line-22">hash</a> <i>func(<a href="unsafe.html">unsafe</a>.<a href="unsafe.html#name-Pointer">Pointer</a>, <a href="builtin.html#name-uintptr">uintptr</a>) <a href="builtin.html#name-uintptr">uintptr</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/handle.go.html#line-67" class="path-duplicate">canonMap</a>.<a href="../src/unique/canonmap.go.html#line-21">root</a> <i><a href="sync/atomic.html">atomic</a>.<a href="sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-indirect">indirect</a>[T]]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/handle.go.html#line-67" class="path-duplicate">canonMap</a>.<a href="../src/unique/canonmap.go.html#line-23">seed</a> <i><a href="builtin.html#name-uintptr">uintptr</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/handle.go.html#line-68">cloneSeq</a> <i><a href="#name-cloneSeq">cloneSeq</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../src/unique/handle.go.html#line-68" class="path-duplicate">cloneSeq</a>.<a href="../src/unique/clone.go.html#line-34">stringOffsets</a> <i>[]<a href="builtin.html#name-uintptr">uintptr</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="uniqueMap-fold-methods"><label for="uniqueMap-fold-methods">Methods (<i>total 4, in which 2 are exported</i>)</label><span id='uniqueMap-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( uniqueMap[T]) <a href="../src/unique/canonmap.go.html#line-37">Load</a>(key T) *T</span></span><span>
			<span class="nodocs">( uniqueMap[T]) <a href="../src/unique/canonmap.go.html#line-58">LoadOrStore</a>(key T) *T</span></span>
			<input type='checkbox' checked class="showhide" id="uniqueMap-showhide-methods"><i><label for="uniqueMap-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="uniqueMap-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="uniqueMap-fold-method-cleanup"><label for="uniqueMap-fold-method-cleanup">( uniqueMap[T]) <a href="../src/unique/canonmap.go.html#line-180">cleanup</a>(hash <a href="builtin.html#name-uintptr">uintptr</a>, wp <a href="weak.html">weak</a>.<a href="weak.html#name-Pointer">Pointer</a>[T])</label><span id='uniqueMap-fold-method-cleanup-docs' class="fold-docs">
<span class="md-text">				cleanup deletes the entry corresponding to wp in the canon map, if it's
				still in the map. wp must have a Value method that returns nil by the
				time this function is called. hash must be the hash of the value that
				wp once pointed to (that is, the hash of *wp.Value()).</span>
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="uniqueMap-fold-method-expand"><label for="uniqueMap-fold-method-expand">( uniqueMap[T]) <a href="../src/unique/canonmap.go.html#line-145">expand</a>(oldEntry, newEntry *<a href="#name-entry">entry</a>[T], newHash <a href="builtin.html#name-uintptr">uintptr</a>, hashShift <a href="builtin.html#name-uint">uint</a>, parent *<a href="#name-indirect">indirect</a>[T]) *<a href="#name-node">node</a>[T]</label><span id='uniqueMap-fold-method-expand-docs' class="fold-docs">
<span class="md-text">				expand takes oldEntry and newEntry whose hashes conflict from bit 64 down to hashShift and
				produces a subtree of indirect nodes to hold the two new entries. newHash is the hash of
				the value in the new entry.</span>
</span></i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 9, in which 1 is exported)</i></span></span>

<div class="anchor value-res" id="name-Make">	<input type='checkbox' class="fold" id="Make-fold-content"><label for="Make-fold-content"> <a href="../use/unique..Make.html">func</a> <a href="../src/unique/handle.go.html#line-33">Make</a>[T](value T) <a href="#name-Handle">Handle</a>[T]</label><span id='Make-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

<span class="md-text">		Make returns a globally unique handle for a value of type T. Handles
		are equal if and only if the values used to produce them are equal.
		Make is safe for concurrent use by multiple goroutines.</span>

</span></div>	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 8 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 8 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-buildArrayCloneSeq"><i>	<input type='checkbox' class="fold" id="buildArrayCloneSeq-fold-content"><label for="buildArrayCloneSeq-fold-content"> <a href="../use/unique..buildArrayCloneSeq^2a782.html">func</a> <a href="../src/unique/clone.go.html#line-72">buildArrayCloneSeq</a>(typ *<a href="internal/abi.html">abi</a>.<a href="internal/abi.html#name-Type">Type</a>, seq *<a href="#name-cloneSeq">cloneSeq</a>, baseOffset <a href="builtin.html#name-uintptr">uintptr</a>)</label><span id='buildArrayCloneSeq-fold-content-docs' class="fold-docs">
<span class="md-text">		buildArrayCloneSeq populates a cloneSeq for an abi.Type that has Kind abi.Array.</span>

</span></i></div><div class="anchor value-res hidden" id="name-buildStructCloneSeq"><i>	<input type='checkbox' class="fold" id="buildStructCloneSeq-fold-content"><label for="buildStructCloneSeq-fold-content"> <a href="../use/unique..buildStructCloneSeq^381df.html">func</a> <a href="../src/unique/clone.go.html#line-56">buildStructCloneSeq</a>(typ *<a href="internal/abi.html">abi</a>.<a href="internal/abi.html#name-Type">Type</a>, seq *<a href="#name-cloneSeq">cloneSeq</a>, baseOffset <a href="builtin.html#name-uintptr">uintptr</a>)</label><span id='buildStructCloneSeq-fold-content-docs' class="fold-docs">
<span class="md-text">		buildStructCloneSeq populates a cloneSeq for an abi.Type that has Kind abi.Struct.</span>

</span></i></div><div class="anchor value-res hidden" id="name-clone"><i>	<input type='checkbox' class="fold" id="clone-fold-content"><label for="clone-fold-content"> <a href="../use/unique..clone^b5d61.html">func</a> <a href="../src/unique/clone.go.html#line-21">clone</a>[T](value T, seq *<a href="#name-cloneSeq">cloneSeq</a>) T</label><span id='clone-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

<span class="md-text">		clone makes a copy of value, and may update string values found in value
		with a cloned version of those strings. The purpose of explicitly cloning
		strings is to avoid accidentally giving a large string a long lifetime.
		
		Note that this will clone strings in structs and arrays found in value,
		and will clone value if it itself is a string. It will not, however, clone
		strings if value is of interface or slice type (that is, found via an
		indirection).</span>

</span></i></div><div class="anchor value-res hidden" id="name-makeCloneSeq"><i>	<input type='checkbox' class="fold" id="makeCloneSeq-fold-content"><label for="makeCloneSeq-fold-content"> <a href="../use/unique..makeCloneSeq^dd578.html">func</a> <a href="../src/unique/clone.go.html#line-38">makeCloneSeq</a>(typ *<a href="internal/abi.html">abi</a>.<a href="internal/abi.html#name-Type">Type</a>) <a href="#name-cloneSeq">cloneSeq</a></label><span id='makeCloneSeq-fold-content-docs' class="fold-docs">
<span class="md-text">		makeCloneSeq creates a cloneSeq for a type.</span>

</span></i></div><div class="anchor value-res hidden" id="name-newCanonMap"><i>	<input type='checkbox' class="fold" id="newCanonMap-fold-content"><label for="newCanonMap-fold-content"> <a href="../use/unique..newCanonMap^6cf56.html">func</a> <a href="../src/unique/canonmap.go.html#line-26">newCanonMap</a>[T]() *<a href="#name-canonMap">canonMap</a>[T]</label><span id='newCanonMap-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

</span></i></div><div class="anchor value-res hidden" id="name-newEntryNode"><i>	<input type='checkbox' class="fold" id="newEntryNode-fold-content"><label for="newEntryNode-fold-content"> <a href="../use/unique..newEntryNode^e1be3.html">func</a> <a href="../src/unique/canonmap.go.html#line-315">newEntryNode</a>[T](key T, hash <a href="builtin.html#name-uintptr">uintptr</a>) (*<a href="#name-entry">entry</a>[T], *T, <a href="weak.html">weak</a>.<a href="weak.html#name-Pointer">Pointer</a>[T])</label><span id='newEntryNode-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

</span></i></div><div class="anchor value-res hidden" id="name-newIndirectNode"><i>	<input type='checkbox' class="fold" id="newIndirectNode-fold-content"><label for="newIndirectNode-fold-content"> <a href="../use/unique..newIndirectNode^52ed5.html">func</a> <a href="../src/unique/canonmap.go.html#line-294">newIndirectNode</a>[T](parent *<a href="#name-indirect">indirect</a>[T]) *<a href="#name-indirect">indirect</a>[T]</label><span id='newIndirectNode-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-comparable">comparable</a>

</span></i></div><div class="anchor value-res hidden" id="name-runtime_rand"><i>	<input type='checkbox' class="fold" id="runtime_rand-fold-content"><label for="runtime_rand-fold-content"> <a href="../use/unique..runtime_rand^6caae.html">func</a> <a href="../src/unique/canonmap.go.html#line-385">runtime_rand</a>() <a href="builtin.html#name-uint64">uint64</a></label><span id='runtime_rand-fold-content-docs' class="fold-docs">
<span class="md-text">		Pull in runtime.rand so that we don't need to take a dependency
		on math/rand/v2.</span>

</span></i></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (total 3, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-variables-showhide"><i><label for="unexported-variables-showhide" class="show-inline">/* 3 unexporteds ... */</label><label for="unexported-variables-showhide" class="hide-inline">/* 3 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-singleStringClone"><i>	<input type='checkbox' class="fold" id="singleStringClone-fold-content"><label for="singleStringClone-fold-content">  <a href="../use/unique..singleStringClone^a9997.html">var</a> <a href="../src/unique/clone.go.html#line-30">singleStringClone</a> <a href="#name-cloneSeq">cloneSeq</a></label><span id='singleStringClone-fold-content-docs' class="fold-docs">
<span class="md-text">		singleStringClone describes how to clone a single string.</span>

</span></i></div><div class="anchor value-res hidden" id="name-uniqueMaps"><i>	<input type='checkbox' class="fold" id="uniqueMaps-fold-content"><label for="uniqueMaps-fold-content">  <a href="../use/unique..uniqueMaps^ffd73.html">var</a> <a href="../src/unique/handle.go.html#line-64">uniqueMaps</a> <a href="internal/sync.html">isync</a>.<a href="internal/sync.html#name-HashTrieMap">HashTrieMap</a>[*<a href="internal/abi.html">abi</a>.<a href="internal/abi.html#name-Type">Type</a>, <a href="builtin.html#name-any">any</a>] // <span class="md-text">any is always a *uniqueMap[T].</span></label><span id='uniqueMaps-fold-content-docs' class="fold-docs">
<span class="md-text">		uniqueMaps is an index of type-specific concurrent maps used for unique.Make.
		
		The two-level map might seem odd at first since the HashTrieMap could have "any"
		as its key type, but the issue is escape analysis. We do not want to force lookups
		to escape the argument, and using a type-specific map allows us to avoid that where
		possible (for example, for strings and plain-ol'-data structs). We also get the
		benefit of not cramming every different type into a single map, but that's certainly
		not enough to outweigh the cost of two map lookups. What is worth it though, is saving
		on those allocations.</span>

</span></i></div><div class="anchor value-res hidden" id="name-zero"><i>	<span class="nodocs">  <a href="../use/unique..zero^f9194.html">var</a> <a href="../src/unique/handle.go.html#line-13">zero</a> <a href="builtin.html#name-uintptr">uintptr</a></span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 3, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* 3 unexporteds ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* 3 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-nChildren"><i>	<span class="nodocs"><a href="../use/unique..nChildren^c0121.html">const</a> <a href="../src/unique/canonmap.go.html#line-281">nChildren</a> = 16</span></i></div><div class="anchor value-res hidden" id="name-nChildrenLog2"><i>	<input type='checkbox' class="fold" id="nChildrenLog2-fold-content"><label for="nChildrenLog2-fold-content"><a href="../use/unique..nChildrenLog2^3f393.html">const</a> <a href="../src/unique/canonmap.go.html#line-280">nChildrenLog2</a> = 4</label><span id='nChildrenLog2-fold-content-docs' class="fold-docs">
<span class="md-text">		16 children. This seems to be the sweet spot for
		load performance: any smaller and we lose out on
		50% or more in CPU performance. Any larger and the
		returns are minuscule (~1% improvement for 32 children).</span>

</span></i></div><div class="anchor value-res hidden" id="name-nChildrenMask"><i>	<span class="nodocs"><a href="../use/unique..nChildrenMask^3c824.html">const</a> <a href="../src/unique/canonmap.go.html#line-282">nChildrenMask</a> = 15</span></i></div></div></code></pre><pre id="footer">
The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.7.6</i>. (GOOS=linux GOARCH=amd64)</pre>