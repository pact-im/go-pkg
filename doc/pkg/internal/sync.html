<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: internal/sync</title>
<link href="../../css/auto-v0.7.6.css" rel="stylesheet">
<script src="../../jvs/golds-v0.7.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>sync</b></span>

<span class="title">Import Path</span>
	<a href="../../index.html#pkg-internal/sync">internal/sync</a><i> (on <a href="https://pkg.go.dev/internal/sync" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../dep/internal/sync.html">5 packages</a>, and imported by <a href="../../dep/internal/sync.html#imported-by">2 packages</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">    <a href="../../src/internal/sync/hashtriemap.go.html">hashtriemap.go</a></span>
	<input type='checkbox' checked class="fold" id="file-1-fold-content"><label for="file-1-fold-content">  <a href="../../src/internal/sync/mutex.go.html#doc">d</a> <a href="../../src/internal/sync/mutex.go.html">mutex.go</a></label><span id='file-1-fold-content-items' class="fold-items">
<span class="md-text">		Package sync provides basic synchronization primitives such as mutual
		exclusion locks to internal packages (including ones that depend on sync).
		
		Tests are defined in package [sync].</span>
</span>
	<span class="nodocs">    <a href="../../src/internal/sync/runtime.go.html">runtime.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 7, in which 2 are exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-HashTrieMap" data-popularity="805">	<input type='checkbox' class="fold" id="HashTrieMap-fold-content"><label for="HashTrieMap-fold-content"> <a href="../../use/internal/sync..HashTrieMap.html">type</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-21">HashTrieMap</a>[K, V] <i>(struct)</i></label><span id='HashTrieMap-fold-content-docs' class="fold-docs">

		Type Parameters:
			K: <a href="../builtin.html#name-comparable">comparable</a>
			V: <a href="../builtin.html#name-any">any</a>

<span class="md-text">		HashTrieMap is an implementation of a concurrent hash-trie. The implementation
		is designed around frequent loads, but offers decent performance for stores
		and deletes as well, especially if the map is larger. Its primary use-case is
		the unique package, but can be used elsewhere as well.
		
		The zero HashTrieMap is empty and ready to use.
		It must not be copied after first use.</span>

		<input type='checkbox' class="fold" id="HashTrieMap-fold-fields"><label for="HashTrieMap-fold-fields">Fields (<i>total 6, none are exported</i>)</label><span id='HashTrieMap-fold-fields-items' class="fold-items">
			<input type='checkbox' class="showhide" id="HashTrieMap-showhide-fields"><i><label for="HashTrieMap-showhide-fields" class="show-inline">/* 6 unexporteds ... */</label><label for="HashTrieMap-showhide-fields" class="hide-inline">/* 6 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-23">initMu</a> <i><a href="#name-Mutex">Mutex</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-22">inited</a> <i><a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Uint32">Uint32</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-25">keyHash</a> <i><a href="#name-hashFunc">hashFunc</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-24">root</a> <i><a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-indirect">indirect</a>[K, V]]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-27">seed</a> <i><a href="../builtin.html#name-uintptr">uintptr</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-26">valEqual</a> <i><a href="#name-equalFunc">equalFunc</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="HashTrieMap-fold-methods"><label for="HashTrieMap-fold-methods">Methods (<i>total 16, in which 11 are exported</i>)</label><span id='HashTrieMap-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-All"><label for="HashTrieMap-fold-method-All">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-481">All</a>() func(yield func(K, V) <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-All-docs' class="fold-docs">
<span class="md-text">				All returns an iterator over each key and value present in the map.
				
				The iterator does not necessarily correspond to any consistent snapshot of the
				HashTrieMap's contents: no key will be visited more than once, but if the value
				for any key is stored or deleted concurrently (including by yield), the iterator
				may reflect any mapping for that key from any point during iteration. The iterator
				does not block other methods on the receiver; even yield itself may call any
				method on the HashTrieMap.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-Clear"><label for="HashTrieMap-fold-method-Clear">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-522">Clear</a>()</label><span id='HashTrieMap-fold-method-Clear-docs' class="fold-docs">
<span class="md-text">				Clear deletes all the entries, resulting in an empty HashTrieMap.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-CompareAndDelete"><label for="HashTrieMap-fold-method-CompareAndDelete">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-368">CompareAndDelete</a>(key K, old V) (deleted <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-CompareAndDelete-docs' class="fold-docs">
<span class="md-text">				CompareAndDelete deletes the entry for key if its value is equal to old.
				The value type must be comparable, otherwise this CompareAndDelete will panic.
				
				If there is no current value for key in the map, CompareAndDelete returns false
				(even if the old value is the nil interface value).</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-CompareAndSwap"><label for="HashTrieMap-fold-method-CompareAndSwap">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-280">CompareAndSwap</a>(key K, old, new V) (swapped <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-CompareAndSwap-docs' class="fold-docs">
<span class="md-text">				CompareAndSwap swaps the old and new values for key
				if the value stored in the map is equal to old.
				The value type must be of a comparable type, otherwise CompareAndSwap will panic.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-Delete"><label for="HashTrieMap-fold-method-Delete">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-359">Delete</a>(key K)</label><span id='HashTrieMap-fold-method-Delete-docs' class="fold-docs">
<span class="md-text">				Delete deletes the value for a key.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-Load"><label for="HashTrieMap-fold-method-Load">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-64">Load</a>(key K) (value V, ok <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-Load-docs' class="fold-docs">
<span class="md-text">				Load returns the value stored in the map for a key, or nil if no
				value is present.
				The ok result indicates whether value was found in the map.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-LoadAndDelete"><label for="HashTrieMap-fold-method-LoadAndDelete">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-309">LoadAndDelete</a>(key K) (value V, loaded <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-LoadAndDelete-docs' class="fold-docs">
<span class="md-text">				LoadAndDelete deletes the value for a key, returning the previous value if any.
				The loaded result reports whether the key was present.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-LoadOrStore"><label for="HashTrieMap-fold-method-LoadOrStore">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-88">LoadOrStore</a>(key K, value V) (result V, loaded <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-LoadOrStore-docs' class="fold-docs">
<span class="md-text">				LoadOrStore returns the existing value for the key if present.
				Otherwise, it stores and returns the given value.
				The loaded result is true if the value was loaded, false if stored.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-Range"><label for="HashTrieMap-fold-method-Range">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-493">Range</a>(yield func(K, V) <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-Range-docs' class="fold-docs">
<span class="md-text">				Range calls f sequentially for each key and value present in the map.
				If f returns false, range stops the iteration.
				
				This exists for compatibility with sync.Map; All should be preferred.
				It provides the same guarantees as sync.Map, and All.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-Store"><label for="HashTrieMap-fold-method-Store">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-199">Store</a>(key K, old V)</label><span id='HashTrieMap-fold-method-Store-docs' class="fold-docs">
<span class="md-text">				Store sets the value for a key.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-Swap"><label for="HashTrieMap-fold-method-Swap">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-205">Swap</a>(key K, new V) (previous V, loaded <a href="../builtin.html#name-bool">bool</a>)</label><span id='HashTrieMap-fold-method-Swap-docs' class="fold-docs">
<span class="md-text">				Swap swaps the value for a key and returns the previous value if any.
				The loaded result reports whether the key was present.</span>
</span></span>
			<input type='checkbox' class="showhide" id="HashTrieMap-showhide-methods"><i><label for="HashTrieMap-showhide-methods" class="show-inline">/* 5 unexporteds ... */</label><label for="HashTrieMap-showhide-methods" class="hide-inline">/* 5 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-expand"><label for="HashTrieMap-fold-method-expand">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-167">expand</a>(oldEntry, newEntry *<a href="#name-entry">entry</a>[K, V], newHash <a href="../builtin.html#name-uintptr">uintptr</a>, hashShift <a href="../builtin.html#name-uint">uint</a>, parent *<a href="#name-indirect">indirect</a>[K, V]) *<a href="#name-node">node</a>[K, V]</label><span id='HashTrieMap-fold-method-expand-docs' class="fold-docs">
<span class="md-text">				expand takes oldEntry and newEntry whose hashes conflict from bit 64 down to hashShift and
				produces a subtree of indirect nodes to hold the two new entries.</span>
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="HashTrieMap-fold-method-find"><label for="HashTrieMap-fold-method-find">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-426">find</a>(key K, hash <a href="../builtin.html#name-uintptr">uintptr</a>, valEqual <a href="#name-equalFunc">equalFunc</a>, value V) (i *<a href="#name-indirect">indirect</a>[K, V], hashShift <a href="../builtin.html#name-uint">uint</a>, slot *<a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-node">node</a>[K, V]], n *<a href="#name-node">node</a>[K, V])</label><span id='HashTrieMap-fold-method-find-docs' class="fold-docs">
<span class="md-text">				find searches the tree for a node that contains key (hash must be the hash of key).
				If valEqual != nil, then it will also enforce that the values are equal as well.
				
				Returns a non-nil node, which will always be an entry, if found.
				
				If i != nil then i.mu is locked, and it is the caller's responsibility to unlock it.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-30">init</a>()</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-37">initSlow</a>()</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*HashTrieMap[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-498">iter</a>(i *<a href="#name-indirect">indirect</a>[K, V], yield func(key K, value V) <a href="../builtin.html#name-bool">bool</a>) <a href="../builtin.html#name-bool">bool</a></span></i></span></span>
		<input type='checkbox' class="fold" id="HashTrieMap-fold-values"><label for="HashTrieMap-fold-values">As Types Of (<i>only one, which is unexported</i>)</label><span id='HashTrieMap-fold-values-items' class="fold-items">
			<input type='checkbox' class="showhide" id="HashTrieMap-showhide-values"><i><label for="HashTrieMap-showhide-values" class="show-inline">/* one unexported ... */</label><label for="HashTrieMap-showhide-values" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			  var unique.<a href="../unique.html#name-uniqueMaps">uniqueMaps</a> <a href="">isync</a>.<b><a href="#name-HashTrieMap">HashTrieMap</a></b>[*<a href="abi.html">abi</a>.<a href="abi.html#name-Type">Type</a>, <a href="../builtin.html#name-any">any</a>]</i></span></span>

</span></div><div class="anchor type-res" id="name-Mutex" data-popularity="300">	<input type='checkbox' class="fold" id="Mutex-fold-content"><label for="Mutex-fold-content"> <a href="../../use/internal/sync..Mutex.html">type</a> <a href="../../src/internal/sync/mutex.go.html#line-20">Mutex</a> <i>(struct)</i></label><span id='Mutex-fold-content-docs' class="fold-docs">
<span class="md-text">		A Mutex is a mutual exclusion lock.
		
		See package [sync.Mutex] documentation.</span>

		<input type='checkbox' class="fold" id="Mutex-fold-fields"><label for="Mutex-fold-fields">Fields (<i>total 2, neither is exported</i>)</label><span id='Mutex-fold-fields-items' class="fold-items">
			<input type='checkbox' class="showhide" id="Mutex-showhide-fields"><i><label for="Mutex-showhide-fields" class="show-inline">/* 2 unexporteds ... */</label><label for="Mutex-showhide-fields" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/mutex.go.html#line-22">sema</a> <i><a href="../builtin.html#name-uint32">uint32</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/mutex.go.html#line-21">state</a> <i><a href="../builtin.html#name-int32">int32</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="Mutex-fold-methods"><label for="Mutex-fold-methods">Methods (<i>total 5, in which 3 are exported</i>)</label><span id='Mutex-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Mutex-fold-method-Lock"><label for="Mutex-fold-method-Lock">(*Mutex) <a href="../../src/internal/sync/mutex.go.html#line-61">Lock</a>()</label><span id='Mutex-fold-method-Lock-docs' class="fold-docs">
<span class="md-text">				Lock locks m.
				
				See package [sync.Mutex] documentation.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="Mutex-fold-method-TryLock"><label for="Mutex-fold-method-TryLock">(*Mutex) <a href="../../src/internal/sync/mutex.go.html#line-76">TryLock</a>() <a href="../builtin.html#name-bool">bool</a></label><span id='Mutex-fold-method-TryLock-docs' class="fold-docs">
<span class="md-text">				TryLock tries to lock m and reports whether it succeeded.
				
				See package [sync.Mutex] documentation.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="Mutex-fold-method-Unlock"><label for="Mutex-fold-method-Unlock">(*Mutex) <a href="../../src/internal/sync/mutex.go.html#line-187">Unlock</a>()</label><span id='Mutex-fold-method-Unlock-docs' class="fold-docs">
<span class="md-text">				Unlock unlocks m.
				
				See package [sync.Mutex] documentation.</span>
</span></span>
			<input type='checkbox' class="showhide" id="Mutex-showhide-methods"><i><label for="Mutex-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="Mutex-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*Mutex) <a href="../../src/internal/sync/mutex.go.html#line-95">lockSlow</a>()</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*Mutex) <a href="../../src/internal/sync/mutex.go.html#line-202">unlockSlow</a>(new <a href="../builtin.html#name-int32">int32</a>)</span></i></span></span>
		<input type='checkbox' class="fold" id="Mutex-fold-impls"><label for="Mutex-fold-impls">Implements (<i>at least one exported</i>)</label><span id='Mutex-fold-impls-items' class="fold-items"><span>
			*Mutex : sync.<a href="../sync.html#name-Locker">Locker</a></span></span>

</span></div></div><div>	<input type='checkbox' class="showhide" id="unexported-typenames-showhide"><i><label for="unexported-typenames-showhide" class="show-inline">/* 5 unexporteds ... */</label><label for="unexported-typenames-showhide" class="hide-inline">/* 5 unexporteds: */</label></i><div class="anchor type-res hidden" id="name-entry" data-popularity="510">	<input type='checkbox' class="fold" id="entry-fold-content"><label for="entry-fold-content"> <a href="../../use/internal/sync..entry^923fe.html">type</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-564">entry</a>[K, V] <i>(struct)</i></label><span id='entry-fold-content-docs' class="fold-docs">

		Type Parameters:
			K: <a href="../builtin.html#name-comparable">comparable</a>
			V: <a href="../builtin.html#name-any">any</a>

<span class="md-text">		entry is a leaf node in the hash-trie.</span>

		<input type='checkbox' class="fold" id="entry-fold-fields"><label for="entry-fold-fields">Fields (<i>total 5, none are exported</i>)</label><span id='entry-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="entry-showhide-fields"><i><label for="entry-showhide-fields" class="show-inline">/* 5 unexporteds ... */</label><label for="entry-showhide-fields" class="hide-inline">/* 5 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-567">key</a> <i>K</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-565">node</a> <i><a href="#name-node">node</a>[K, V]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-565" class="path-duplicate">node</a>.<a href="../../src/internal/sync/hashtriemap.go.html#line-703">isEntry</a> <i><a href="../builtin.html#name-bool">bool</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-field-overflow"><label for="entry-fold-field-overflow"><a href="../../src/internal/sync/hashtriemap.go.html#line-566">overflow</a> <i><a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Pointer">Pointer</a>[<b>entry</b>[K, V]]</i></label><span id='entry-fold-field-overflow-docs' class="fold-docs">
<span class="md-text">				// Overflow for hash collisions.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-568">value</a> <i>V</i></span></i></span></span>
		<input type='checkbox' class="fold" id="entry-fold-methods"><label for="entry-fold-methods">Methods (<i>total 8, none are exported</i>)</label><span id='entry-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="entry-showhide-methods"><i><label for="entry-showhide-methods" class="show-inline">/* 8 unexporteds ... */</label><label for="entry-showhide-methods" class="hide-inline">/* 8 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-method-compareAndDelete"><label for="entry-fold-method-compareAndDelete">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-682">compareAndDelete</a>(key K, value V, valEqual <a href="#name-equalFunc">equalFunc</a>) (*<b>entry</b>[K, V], <a href="../builtin.html#name-bool">bool</a>)</label><span id='entry-fold-method-compareAndDelete-docs' class="fold-docs">
<span class="md-text">				compareAndDelete deletes an entry in the overflow chain if both the key and value compare
				equal. Returns the new entry chain and whether or not anything was deleted.
				
				compareAndDelete must be called under the mutex of the indirect node which e is a child of.</span>
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-method-compareAndSwap"><label for="entry-fold-method-compareAndSwap">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-632">compareAndSwap</a>(key K, old, new V, valEqual <a href="#name-equalFunc">equalFunc</a>) (*<b>entry</b>[K, V], <a href="../builtin.html#name-bool">bool</a>)</label><span id='entry-fold-method-compareAndSwap-docs' class="fold-docs">
<span class="md-text">				compareAndSwap replaces an entry in the overflow chain if both the key and value compare
				equal. Returns the new entry chain and whether or not anything was swapped.
				
				compareAndSwap must be called under the mutex of the indirect node which e is a child of.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-706">entry</a>() *<b>entry</b>[K, V]</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-713">indirect</a>() *<a href="#name-indirect">indirect</a>[K, V]</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-method-loadAndDelete"><label for="entry-fold-method-loadAndDelete">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-660">loadAndDelete</a>(key K) (V, *<b>entry</b>[K, V], <a href="../builtin.html#name-bool">bool</a>)</label><span id='entry-fold-method-loadAndDelete-docs' class="fold-docs">
<span class="md-text">				loadAndDelete deletes an entry in the overflow chain by key. Returns the value for the key, the new
				entry chain and whether or not anything was loaded (and deleted).
				
				loadAndDelete must be called under the mutex of the indirect node which e is a child of.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-579">lookup</a>(key K) (V, <a href="../builtin.html#name-bool">bool</a>)</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-589">lookupWithValue</a>(key K, value V, valEqual <a href="#name-equalFunc">equalFunc</a>) (V, <a href="../builtin.html#name-bool">bool</a>)</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="entry-fold-method-swap"><label for="entry-fold-method-swap">(*entry[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-603">swap</a>(key K, new V) (*<b>entry</b>[K, V], V, <a href="../builtin.html#name-bool">bool</a>)</label><span id='entry-fold-method-swap-docs' class="fold-docs">
<span class="md-text">				swap replaces an entry in the overflow chain if keys compare equal. Returns the new entry chain,
				the old value, and whether or not anything was swapped.
				
				swap must be called under the mutex of the indirect node which e is a child of.</span>
</span></i></span></span>
		<input type='checkbox' class="fold" id="entry-fold-results"><label for="entry-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='entry-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="entry-showhide-inputofs"><i><label for="entry-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="entry-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newEntryNode">newEntryNode</a>[K, V](key K, value V) *<b>entry</b>[K, V]</i></span></span>
		<input type='checkbox' class="fold" id="entry-fold-params"><label for="entry-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='entry-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="entry-showhide-outputofs"><i><label for="entry-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="entry-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func (*<a href="#name-HashTrieMap">HashTrieMap</a>)[K, V].<a href="../../src/internal/sync/hashtriemap.go.html#line-167">expand</a>(oldEntry, newEntry *<b>entry</b>[K, V], newHash <a href="../builtin.html#name-uintptr">uintptr</a>, hashShift <a href="../builtin.html#name-uint">uint</a>, parent *<a href="#name-indirect">indirect</a>[K, V]) *<a href="#name-node">node</a>[K, V]</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-equalFunc" data-popularity="35">	<input type='checkbox' class="fold" id="equalFunc-fold-content"><label for="equalFunc-fold-content"> <a href="../../use/internal/sync..equalFunc^79708.html">type</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-59">equalFunc</a> <i>(func)</i></label><span id='equalFunc-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="equalFunc-fold-params"><label for="equalFunc-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='equalFunc-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="equalFunc-showhide-outputofs"><i><label for="equalFunc-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="equalFunc-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func (*<a href="#name-HashTrieMap">HashTrieMap</a>)[K, V].<a href="../../src/internal/sync/hashtriemap.go.html#line-426">find</a>(key K, hash <a href="../builtin.html#name-uintptr">uintptr</a>, valEqual <b>equalFunc</b>, value V) (i *<a href="#name-indirect">indirect</a>[K, V], hashShift <a href="../builtin.html#name-uint">uint</a>, slot *<a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-node">node</a>[K, V]], n *<a href="#name-node">node</a>[K, V])</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-hashFunc" data-popularity="0">	<span class="nodocs"> <a href="../../use/internal/sync..hashFunc^64bd7.html">type</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-58">hashFunc</a> <i>(func)</i></span></div><div class="anchor type-res hidden" id="name-indirect" data-popularity="405">	<input type='checkbox' class="fold" id="indirect-fold-content"><label for="indirect-fold-content"> <a href="../../use/internal/sync..indirect^fdbf5.html">type</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-541">indirect</a>[K, V] <i>(struct)</i></label><span id='indirect-fold-content-docs' class="fold-docs">

		Type Parameters:
			K: <a href="../builtin.html#name-comparable">comparable</a>
			V: <a href="../builtin.html#name-any">any</a>

<span class="md-text">		indirect is an internal node in the hash-trie.</span>

		<input type='checkbox' class="fold" id="indirect-fold-fields"><label for="indirect-fold-fields">Fields (<i>total 6, none are exported</i>)</label><span id='indirect-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-fields"><i><label for="indirect-showhide-fields" class="show-inline">/* 6 unexporteds ... */</label><label for="indirect-showhide-fields" class="hide-inline">/* 6 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-546">children</a> <i>[16]<a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-node">node</a>[K, V]]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-543">dead</a> <i><a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Bool">Bool</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="indirect-fold-field-mu"><label for="indirect-fold-field-mu"><a href="../../src/internal/sync/hashtriemap.go.html#line-544">mu</a> <i><a href="#name-Mutex">Mutex</a></i></label><span id='indirect-fold-field-mu-docs' class="fold-docs">
<span class="md-text">				// Protects mutation to children and any children that are entry nodes.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-542">node</a> <i><a href="#name-node">node</a>[K, V]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-542" class="path-duplicate">node</a>.<a href="../../src/internal/sync/hashtriemap.go.html#line-703">isEntry</a> <i><a href="../builtin.html#name-bool">bool</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-545">parent</a> <i>*<b>indirect</b>[K, V]</i></span></i></span></span>
		<input type='checkbox' class="fold" id="indirect-fold-methods"><label for="indirect-fold-methods">Methods (<i>total 3, none are exported</i>)</label><span id='indirect-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-methods"><i><label for="indirect-showhide-methods" class="show-inline">/* 3 unexporteds ... */</label><label for="indirect-showhide-methods" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*indirect[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-553">empty</a>() <a href="../builtin.html#name-bool">bool</a></span></i></span><span class="hidden"><i>
			<span class="nodocs">(*indirect[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-706">entry</a>() *<a href="#name-entry">entry</a>[K, V]</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*indirect[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-713">indirect</a>() *<b>indirect</b>[K, V]</span></i></span></span>
		<input type='checkbox' class="fold" id="indirect-fold-results"><label for="indirect-fold-results">As Outputs Of (<i>at least 2, neither is exported</i>)</label><span id='indirect-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-inputofs"><i><label for="indirect-showhide-inputofs" class="show-inline">/* 2+ unexporteds ... */</label><label for="indirect-showhide-inputofs" class="hide-inline">/* 2+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-newIndirectNode">newIndirectNode</a>[K, V](parent *<b>indirect</b>[K, V]) *<b>indirect</b>[K, V]</i></span><span class="hidden"><i>
			func (*<a href="#name-HashTrieMap">HashTrieMap</a>)[K, V].<a href="../../src/internal/sync/hashtriemap.go.html#line-426">find</a>(key K, hash <a href="../builtin.html#name-uintptr">uintptr</a>, valEqual <a href="#name-equalFunc">equalFunc</a>, value V) (i *<b>indirect</b>[K, V], hashShift <a href="../builtin.html#name-uint">uint</a>, slot *<a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Pointer">Pointer</a>[<a href="#name-node">node</a>[K, V]], n *<a href="#name-node">node</a>[K, V])</i></span></span>
		<input type='checkbox' class="fold" id="indirect-fold-params"><label for="indirect-fold-params">As Inputs Of (<i>at least 3, none are exported</i>)</label><span id='indirect-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="indirect-showhide-outputofs"><i><label for="indirect-showhide-outputofs" class="show-inline">/* 3+ unexporteds ... */</label><label for="indirect-showhide-outputofs" class="hide-inline">/* 3+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-newIndirectNode">newIndirectNode</a>[K, V](parent *<b>indirect</b>[K, V]) *<b>indirect</b>[K, V]</i></span><span class="hidden"><i>
			func (*<a href="#name-HashTrieMap">HashTrieMap</a>)[K, V].<a href="../../src/internal/sync/hashtriemap.go.html#line-167">expand</a>(oldEntry, newEntry *<a href="#name-entry">entry</a>[K, V], newHash <a href="../builtin.html#name-uintptr">uintptr</a>, hashShift <a href="../builtin.html#name-uint">uint</a>, parent *<b>indirect</b>[K, V]) *<a href="#name-node">node</a>[K, V]</i></span><span class="hidden"><i>
			func (*<a href="#name-HashTrieMap">HashTrieMap</a>)[K, V].<a href="../../src/internal/sync/hashtriemap.go.html#line-498">iter</a>(i *<b>indirect</b>[K, V], yield func(key K, value V) <a href="../builtin.html#name-bool">bool</a>) <a href="../builtin.html#name-bool">bool</a></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-node" data-popularity="250">	<input type='checkbox' class="fold" id="node-fold-content"><label for="node-fold-content"> <a href="../../use/internal/sync..node^545ea.html">type</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-702">node</a>[K, V] <i>(struct)</i></label><span id='node-fold-content-docs' class="fold-docs">

		Type Parameters:
			K: <a href="../builtin.html#name-comparable">comparable</a>
			V: <a href="../builtin.html#name-any">any</a>

<span class="md-text">		node is the header for a node. It's polymorphic and
		is actually either an entry or an indirect.</span>

		<input type='checkbox' class="fold" id="node-fold-fields"><label for="node-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='node-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="node-showhide-fields"><i><label for="node-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="node-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../src/internal/sync/hashtriemap.go.html#line-703">isEntry</a> <i><a href="../builtin.html#name-bool">bool</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="node-fold-methods"><label for="node-fold-methods">Methods (<i>total 2, neither is exported</i>)</label><span id='node-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="node-showhide-methods"><i><label for="node-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="node-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*node[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-706">entry</a>() *<a href="#name-entry">entry</a>[K, V]</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*node[K, V]) <a href="../../src/internal/sync/hashtriemap.go.html#line-713">indirect</a>() *<a href="#name-indirect">indirect</a>[K, V]</span></i></span></span>
		<input type='checkbox' class="fold" id="node-fold-results"><label for="node-fold-results">As Outputs Of (<i>at least 2, neither is exported</i>)</label><span id='node-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="node-showhide-inputofs"><i><label for="node-showhide-inputofs" class="show-inline">/* 2+ unexporteds ... */</label><label for="node-showhide-inputofs" class="hide-inline">/* 2+ unexporteds: */</label></i><span class="hidden"><i>
			func (*<a href="#name-HashTrieMap">HashTrieMap</a>)[K, V].<a href="../../src/internal/sync/hashtriemap.go.html#line-167">expand</a>(oldEntry, newEntry *<a href="#name-entry">entry</a>[K, V], newHash <a href="../builtin.html#name-uintptr">uintptr</a>, hashShift <a href="../builtin.html#name-uint">uint</a>, parent *<a href="#name-indirect">indirect</a>[K, V]) *<b>node</b>[K, V]</i></span><span class="hidden"><i>
			func (*<a href="#name-HashTrieMap">HashTrieMap</a>)[K, V].<a href="../../src/internal/sync/hashtriemap.go.html#line-426">find</a>(key K, hash <a href="../builtin.html#name-uintptr">uintptr</a>, valEqual <a href="#name-equalFunc">equalFunc</a>, value V) (i *<a href="#name-indirect">indirect</a>[K, V], hashShift <a href="../builtin.html#name-uint">uint</a>, slot *<a href="../sync/atomic.html">atomic</a>.<a href="../sync/atomic.html#name-Pointer">Pointer</a>[<b>node</b>[K, V]], n *<b>node</b>[K, V])</i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 10, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 10 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 10 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-fatal"><i>	<span class="nodocs"> <a href="../../use/internal/sync..fatal^79e21.html">func</a> <a href="../../src/internal/sync/runtime.go.html#line-52">fatal</a>(<a href="../builtin.html#name-string">string</a>)</span></i></div><div class="anchor value-res hidden" id="name-newEntryNode"><i>	<input type='checkbox' class="fold" id="newEntryNode-fold-content"><label for="newEntryNode-fold-content"> <a href="../../use/internal/sync..newEntryNode^e1be3.html">func</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-571">newEntryNode</a>[K, V](key K, value V) *<a href="#name-entry">entry</a>[K, V]</label><span id='newEntryNode-fold-content-docs' class="fold-docs">

		Type Parameters:
			K: <a href="../builtin.html#name-comparable">comparable</a>
			V: <a href="../builtin.html#name-any">any</a>

</span></i></div><div class="anchor value-res hidden" id="name-newIndirectNode"><i>	<input type='checkbox' class="fold" id="newIndirectNode-fold-content"><label for="newIndirectNode-fold-content"> <a href="../../use/internal/sync..newIndirectNode^52ed5.html">func</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-549">newIndirectNode</a>[K, V](parent *<a href="#name-indirect">indirect</a>[K, V]) *<a href="#name-indirect">indirect</a>[K, V]</label><span id='newIndirectNode-fold-content-docs' class="fold-docs">

		Type Parameters:
			K: <a href="../builtin.html#name-comparable">comparable</a>
			V: <a href="../builtin.html#name-any">any</a>

</span></i></div><div class="anchor value-res hidden" id="name-runtime_canSpin"><i>	<input type='checkbox' class="fold" id="runtime_canSpin-fold-content"><label for="runtime_canSpin-fold-content"> <a href="../../use/internal/sync..runtime_canSpin^a4dde.html">func</a> <a href="../../src/internal/sync/runtime.go.html#line-38">runtime_canSpin</a>(i <a href="../builtin.html#name-int">int</a>) <a href="../builtin.html#name-bool">bool</a></label><span id='runtime_canSpin-fold-content-docs' class="fold-docs">
<span class="md-text">		Active spinning runtime support.
		runtime_canSpin reports whether spinning makes sense at the moment.</span>

</span></i></div><div class="anchor value-res hidden" id="name-runtime_doSpin"><i>	<input type='checkbox' class="fold" id="runtime_doSpin-fold-content"><label for="runtime_doSpin-fold-content"> <a href="../../use/internal/sync..runtime_doSpin^b1cba.html">func</a> <a href="../../src/internal/sync/runtime.go.html#line-43">runtime_doSpin</a>()</label><span id='runtime_doSpin-fold-content-docs' class="fold-docs">
<span class="md-text">		runtime_doSpin does active spinning.</span>

</span></i></div><div class="anchor value-res hidden" id="name-runtime_nanotime"><i>	<span class="nodocs"> <a href="../../use/internal/sync..runtime_nanotime^1fa93.html">func</a> <a href="../../src/internal/sync/runtime.go.html#line-46">runtime_nanotime</a>() <a href="../builtin.html#name-int64">int64</a></span></i></div><div class="anchor value-res hidden" id="name-runtime_rand"><i>	<input type='checkbox' class="fold" id="runtime_rand-fold-content"><label for="runtime_rand-fold-content"> <a href="../../use/internal/sync..runtime_rand^6caae.html">func</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-724">runtime_rand</a>() <a href="../builtin.html#name-uint64">uint64</a></label><span id='runtime_rand-fold-content-docs' class="fold-docs">
<span class="md-text">		Pull in runtime.rand so that we don't need to take a dependency
		on math/rand/v2.</span>

</span></i></div><div class="anchor value-res hidden" id="name-runtime_SemacquireMutex"><i>	<input type='checkbox' class="fold" id="runtime_SemacquireMutex-fold-content"><label for="runtime_SemacquireMutex-fold-content"> <a href="../../use/internal/sync..runtime_SemacquireMutex^a7c57.html">func</a> <a href="../../src/internal/sync/runtime.go.html#line-21">runtime_SemacquireMutex</a>(s *<a href="../builtin.html#name-uint32">uint32</a>, lifo <a href="../builtin.html#name-bool">bool</a>, skipframes <a href="../builtin.html#name-int">int</a>)</label><span id='runtime_SemacquireMutex-fold-content-docs' class="fold-docs">
<span class="md-text">		SemacquireMutex is like Semacquire, but for profiling contended
		Mutexes and RWMutexes.
		If lifo is true, queue waiter at the head of wait queue.
		skipframes is the number of frames to omit during tracing, counting from
		runtime_SemacquireMutex's caller.
		The different forms of this function just tell the runtime how to present
		the reason for waiting in a backtrace, and is used to compute some metrics.
		Otherwise they're functionally identical.</span>

</span></i></div><div class="anchor value-res hidden" id="name-runtime_Semrelease"><i>	<input type='checkbox' class="fold" id="runtime_Semrelease-fold-content"><label for="runtime_Semrelease-fold-content"> <a href="../../use/internal/sync..runtime_Semrelease^97b9a.html">func</a> <a href="../../src/internal/sync/runtime.go.html#line-32">runtime_Semrelease</a>(s *<a href="../builtin.html#name-uint32">uint32</a>, handoff <a href="../builtin.html#name-bool">bool</a>, skipframes <a href="../builtin.html#name-int">int</a>)</label><span id='runtime_Semrelease-fold-content-docs' class="fold-docs">
<span class="md-text">		Semrelease atomically increments *s and notifies a waiting goroutine
		if one is blocked in Semacquire.
		It is intended as a simple wakeup primitive for use by the synchronization
		library and should not be used directly.
		If handoff is true, pass count directly to the first waiter.
		skipframes is the number of frames to omit during tracing, counting from
		runtime_Semrelease's caller.</span>

</span></i></div><div class="anchor value-res hidden" id="name-throw"><i>	<span class="nodocs"> <a href="../../use/internal/sync..throw^7b045.html">func</a> <a href="../../src/internal/sync/runtime.go.html#line-49">throw</a>(<a href="../builtin.html#name-string">string</a>)</span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 8, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* 8 unexporteds ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* 8 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-mutexLocked"><i>	<span class="nodocs"><a href="../../use/internal/sync..mutexLocked^07027.html">const</a> <a href="../../src/internal/sync/mutex.go.html#line-26">mutexLocked</a> = 1 // <span class="md-text">mutex is locked</span></span></i></div><div class="anchor value-res hidden" id="name-mutexStarving"><i>	<span class="nodocs"><a href="../../use/internal/sync..mutexStarving^36209.html">const</a> <a href="../../src/internal/sync/mutex.go.html#line-28">mutexStarving</a> = 4</span></i></div><div class="anchor value-res hidden" id="name-mutexWaiterShift"><i>	<span class="nodocs"><a href="../../use/internal/sync..mutexWaiterShift^e55ca.html">const</a> <a href="../../src/internal/sync/mutex.go.html#line-29">mutexWaiterShift</a> = 3</span></i></div><div class="anchor value-res hidden" id="name-mutexWoken"><i>	<span class="nodocs"><a href="../../use/internal/sync..mutexWoken^1af1b.html">const</a> <a href="../../src/internal/sync/mutex.go.html#line-27">mutexWoken</a> = 2</span></i></div><div class="anchor value-res hidden" id="name-nChildren"><i>	<span class="nodocs"><a href="../../use/internal/sync..nChildren^c0121.html">const</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-536">nChildren</a> = 16</span></i></div><div class="anchor value-res hidden" id="name-nChildrenLog2"><i>	<input type='checkbox' class="fold" id="nChildrenLog2-fold-content"><label for="nChildrenLog2-fold-content"><a href="../../use/internal/sync..nChildrenLog2^3f393.html">const</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-535">nChildrenLog2</a> = 4</label><span id='nChildrenLog2-fold-content-docs' class="fold-docs">
<span class="md-text">		16 children. This seems to be the sweet spot for
		load performance: any smaller and we lose out on
		50% or more in CPU performance. Any larger and the
		returns are minuscule (~1% improvement for 32 children).</span>

</span></i></div><div class="anchor value-res hidden" id="name-nChildrenMask"><i>	<span class="nodocs"><a href="../../use/internal/sync..nChildrenMask^3c824.html">const</a> <a href="../../src/internal/sync/hashtriemap.go.html#line-537">nChildrenMask</a> = 15</span></i></div><div class="anchor value-res hidden" id="name-starvationThresholdNs"><i>	<input type='checkbox' class="fold" id="starvationThresholdNs-fold-content"><label for="starvationThresholdNs-fold-content"><a href="../../use/internal/sync..starvationThresholdNs^7fd2a.html">const</a> <a href="../../src/internal/sync/mutex.go.html#line-55">starvationThresholdNs</a> = 1e+06</label><span id='starvationThresholdNs-fold-content-docs' class="fold-docs">
<span class="md-text">		Mutex fairness.
		
		Mutex can be in 2 modes of operations: normal and starvation.
		In normal mode waiters are queued in FIFO order, but a woken up waiter
		does not own the mutex and competes with new arriving goroutines over
		the ownership. New arriving goroutines have an advantage -- they are
		already running on CPU and there can be lots of them, so a woken up
		waiter has good chances of losing. In such case it is queued at front
		of the wait queue. If a waiter fails to acquire the mutex for more than 1ms,
		it switches mutex to the starvation mode.
		
		In starvation mode ownership of the mutex is directly handed off from
		the unlocking goroutine to the waiter at the front of the queue.
		New arriving goroutines don't try to acquire the mutex even if it appears
		to be unlocked, and don't try to spin. Instead they queue themselves at
		the tail of the wait queue.
		
		If a waiter receives ownership of the mutex and sees that either
		(1) it is the last waiter in the queue, or (2) it waited for less than 1 ms,
		it switches mutex back to normal operation mode.
		
		Normal mode has considerably better performance as a goroutine can acquire
		a mutex several times in a row even if there are blocked waiters.
		Starvation mode is important to prevent pathological cases of tail latency.</span>

</span></i></div></div></code></pre><pre id="footer">
The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.7.6</i>. (GOOS=linux GOARCH=amd64)</pre>