<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: google.golang.org/grpc/balancer/endpointsharding</title>
<link href="../../../../css/auto-v0.7.6.css" rel="stylesheet">
<script src="../../../../jvs/golds-v0.7.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>endpointsharding</b></span>

<span class="title">Import Path</span>
	<a href="../../../../index.html#pkg-google.golang.org/grpc/balancer/endpointsharding">google.golang.org/grpc/balancer/endpointsharding</a><i> (on <a href="https://pkg.go.dev/google.golang.org/grpc/balancer/endpointsharding" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../../../dep/google.golang.org/grpc/balancer/endpointsharding.html">8 packages</a>, and imported by <a href="../../../../dep/google.golang.org/grpc/balancer/endpointsharding.html#imported-by">one package</a>

<div id="files"><span class="title">Involved Source Files</span>

	<input type='checkbox' checked class="fold" id="file-0-fold-content"><label for="file-0-fold-content">  <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#doc">d</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html">endpointsharding.go</a></label><span id='file-0-fold-content-items' class="fold-items">
<span class="md-text">		Package endpointsharding implements a load balancing policy that manages
		homogeneous child policies each owning a single endpoint.
		
		# Experimental
		
		Notice: This package is EXPERIMENTAL and may be changed or removed in a
		later release.</span></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 7, in which 4 are exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-ChildBuilderFunc" data-popularity="35">	<input type='checkbox' class="fold" id="ChildBuilderFunc-fold-content"><label for="ChildBuilderFunc-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..ChildBuilderFunc.html">type</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-74">ChildBuilderFunc</a> <i>(func)</i></label><span id='ChildBuilderFunc-fold-content-docs' class="fold-docs">
<span class="md-text">		ChildBuilderFunc creates a new balancer with the ClientConn. It has the same
		type as the balancer.Builder.Build method.</span>

		<input type='checkbox' class="fold" id="ChildBuilderFunc-fold-params"><label for="ChildBuilderFunc-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='ChildBuilderFunc-fold-params-items' class="fold-items"><span>
			func <a href="#name-NewBalancer">NewBalancer</a>(cc <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-ClientConn">ClientConn</a>, opts <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-BuildOptions">BuildOptions</a>, childBuilder <b>ChildBuilderFunc</b>, esOpts <a href="#name-Options">Options</a>) <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-Balancer">Balancer</a></span></span>

</span></div><div class="anchor type-res" id="name-ChildState" data-popularity="75">	<input type='checkbox' class="fold" id="ChildState-fold-content"><label for="ChildState-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..ChildState.html">type</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-44">ChildState</a> <i>(struct)</i></label><span id='ChildState-fold-content-docs' class="fold-docs">
<span class="md-text">		ChildState is the balancer state of a child along with the endpoint which
		identifies the child balancer.</span>

		<input type='checkbox' class="fold" id="ChildState-fold-fields"><label for="ChildState-fold-fields">Fields (<i>total 3, all are exported</i>)</label><span id='ChildState-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="ChildState-fold-field-Balancer"><label for="ChildState-fold-field-Balancer"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-50">Balancer</a> <i><a href="#name-ExitIdler">ExitIdler</a></i></label><span id='ChildState-fold-field-Balancer-docs' class="fold-docs">
<span class="md-text">				Balancer exposes only the ExitIdler interface of the child LB policy.
				Other methods of the child policy are called only by endpointsharding.</span>
</span></span><span>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-45">Endpoint</a> <i><a href="../resolver.html">resolver</a>.<a href="../resolver.html#name-Endpoint">Endpoint</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-46">State</a> <i><a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-State">State</a></i></span></span></span>
		<input type='checkbox' class="fold" id="ChildState-fold-results"><label for="ChildState-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='ChildState-fold-results-items' class="fold-items"><span>
			func <a href="#name-ChildStatesFromPicker">ChildStatesFromPicker</a>(picker <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-Picker">Picker</a>) []<b>ChildState</b></span></span>

</span></div><div class="anchor type-res" id="name-ExitIdler" data-popularity="1600">	<input type='checkbox' class="fold" id="ExitIdler-fold-content"><label for="ExitIdler-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..ExitIdler.html">type</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-54">ExitIdler</a> <b><i>(interface)</i></b></label><span id='ExitIdler-fold-content-docs' class="fold-docs">
<span class="md-text">		ExitIdler provides access to only the ExitIdle method of the child balancer.</span>

		<input type='checkbox' class="fold" id="ExitIdler-fold-methods"><label for="ExitIdler-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='ExitIdler-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="ExitIdler-fold-method-ExitIdle"><label for="ExitIdler-fold-method-ExitIdle">( ExitIdler) <a href="../../../../src/google.golang.org/grpc/balancer/balancer.go.html#line-380">ExitIdle</a>()</label><span id='ExitIdler-fold-method-ExitIdle-docs' class="fold-docs">
<span class="md-text">				ExitIdle instructs the LB policy to reconnect to backends / exit the
				IDLE state, if appropriate and possible.  Note that SubConns that enter
				the IDLE state will not reconnect until SubConn.Connect is called.</span>
</span></span></span>
		<input type='checkbox' class="fold" id="ExitIdler-fold-impledby"><label for="ExitIdler-fold-impledby">Implemented By (<i>at least 10, in which 3 are exported</i>)</label><span id='ExitIdler-fold-impledby-items' class="fold-items"><span>
			 google.golang.org/grpc/balancer.<a href="../balancer.html#name-Balancer">Balancer</a> <i>(interface)</i></span><span>
			 google.golang.org/grpc/balancer.<a href="../balancer.html#name-ExitIdler">ExitIdler</a> <i>(interface)</i></span><span>
			*google.golang.org/grpc/internal/balancer/gracefulswitch.<a href="../internal/balancer/gracefulswitch.html#name-Balancer">Balancer</a></span>
			<input type='checkbox' class="showhide" id="ExitIdler-showhide-impedBys"><i><label for="ExitIdler-showhide-impedBys" class="show-inline">/* 7+ unexporteds ... */</label><label for="ExitIdler-showhide-impedBys" class="hide-inline">/* 7+ unexporteds: */</label></i><span class="hidden"><i>
			*<a href="#name-balancerWrapper">balancerWrapper</a></i></span><span class="hidden"><i>
			*<a href="#name-endpointSharding">endpointSharding</a></i></span><span class="hidden"><i>
			*google.golang.org/grpc/balancer/base.<a href="base.html#name-baseBalancer">baseBalancer</a></i></span><span class="hidden"><i>
			*google.golang.org/grpc/balancer/pickfirst.<a href="pickfirst.html#name-pickfirstBalancer">pickfirstBalancer</a></i></span><span class="hidden"><i>
			*google.golang.org/grpc/balancer/pickfirst/pickfirstleaf.<a href="pickfirst/pickfirstleaf.html#name-pickfirstBalancer">pickfirstBalancer</a></i></span><span class="hidden"><i>
			 google.golang.org/grpc/balancer/roundrobin.<a href="roundrobin.html#name-rrBalancer">rrBalancer</a></i></span><span class="hidden"><i>
			 google.golang.org/grpc/internal/balancer/gracefulswitch.<a href="../internal/balancer/gracefulswitch.html#name-balancerWrapper">balancerWrapper</a></i></span></span>
		<input type='checkbox' class="fold" id="ExitIdler-fold-impls"><label for="ExitIdler-fold-impls">Implements (<i>at least one exported</i>)</label><span id='ExitIdler-fold-impls-items' class="fold-items"><span>
			 ExitIdler : google.golang.org/grpc/balancer.<a href="../balancer.html#name-ExitIdler">ExitIdler</a></span></span>

</span></div><div class="anchor type-res" id="name-Options" data-popularity="35">	<input type='checkbox' class="fold" id="Options-fold-content"><label for="Options-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..Options.html">type</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-63">Options</a> <i>(struct)</i></label><span id='Options-fold-content-docs' class="fold-docs">
<span class="md-text">		Options are the options to configure the behaviour of the
		endpointsharding balancer.</span>

		<input type='checkbox' class="fold" id="Options-fold-fields"><label for="Options-fold-fields">Fields (<i>only one, which is exported</i>)</label><span id='Options-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Options-fold-field-DisableAutoReconnect"><label for="Options-fold-field-DisableAutoReconnect"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-69">DisableAutoReconnect</a> <i><a href="../../../builtin.html#name-bool">bool</a></i></label><span id='Options-fold-field-DisableAutoReconnect-docs' class="fold-docs">
<span class="md-text">				DisableAutoReconnect allows the balancer to keep child balancer in the
				IDLE state until they are explicitly triggered to exit using the
				ChildState obtained from the endpointsharding picker. When set to false,
				the endpointsharding balancer will automatically call ExitIdle on child
				connections that report IDLE.</span>
</span></span></span>
		<input type='checkbox' class="fold" id="Options-fold-params"><label for="Options-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='Options-fold-params-items' class="fold-items"><span>
			func <a href="#name-NewBalancer">NewBalancer</a>(cc <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-ClientConn">ClientConn</a>, opts <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-BuildOptions">BuildOptions</a>, childBuilder <a href="#name-ChildBuilderFunc">ChildBuilderFunc</a>, esOpts <b>Options</b>) <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-Balancer">Balancer</a></span></span>

</span></div></div><div>	<input type='checkbox' class="showhide" id="unexported-typenames-showhide"><i><label for="unexported-typenames-showhide" class="show-inline">/* 3 unexporteds ... */</label><label for="unexported-typenames-showhide" class="hide-inline">/* 3 unexporteds: */</label></i><div class="anchor type-res hidden" id="name-balancerWrapper" data-popularity="800">	<input type='checkbox' class="fold" id="balancerWrapper-fold-content"><label for="balancerWrapper-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..balancerWrapper^06db3.html">type</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-334">balancerWrapper</a> <i>(struct)</i></label><span id='balancerWrapper-fold-content-docs' class="fold-docs">
<span class="md-text">		balancerWrapper is a wrapper of a balancer. It ID's a child balancer by
		endpoint, and persists recent child balancer state.</span>

		<input type='checkbox' class="fold" id="balancerWrapper-fold-fields"><label for="balancerWrapper-fold-fields">Fields (<i>total 5, in which 1 is exported</i>)</label><span id='balancerWrapper-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-field-ClientConn"><label for="balancerWrapper-fold-field-ClientConn"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-341">ClientConn</a> <i><a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-ClientConn">ClientConn</a></i></label><span id='balancerWrapper-fold-field-ClientConn-docs' class="fold-docs">
<span class="md-text">				// embed to intercept UpdateState, doesn't deal with SubConns</span>
</span></span>
			<input type='checkbox' checked class="showhide" id="balancerWrapper-showhide-fields"><i><label for="balancerWrapper-showhide-fields" class="show-inline">/* 4 unexporteds ... */</label><label for="balancerWrapper-showhide-fields" class="hide-inline">/* 4 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-field-child"><label for="balancerWrapper-fold-field-child"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-340">child</a> <i><a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-Balancer">Balancer</a></i></label><span id='balancerWrapper-fold-field-child-docs' class="fold-docs">
<span class="md-text">				child contains the wrapped balancer. Access its methods only through
				methods on balancerWrapper to ensure proper synchronization</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-347">childState</a> <i><a href="#name-ChildState">ChildState</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-343">es</a> <i>*<a href="#name-endpointSharding">endpointSharding</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-348">isClosed</a> <i><a href="../../../builtin.html#name-bool">bool</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="balancerWrapper-fold-methods"><label for="balancerWrapper-fold-methods">Methods (<i>total 12, in which 8 are exported</i>)</label><span id='balancerWrapper-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-ExitIdle"><label for="balancerWrapper-fold-method-ExitIdle">(*balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-363">ExitIdle</a>()</label><span id='balancerWrapper-fold-method-ExitIdle-docs' class="fold-docs">
<span class="md-text">				ExitIdle pings an IDLE child balancer to exit idle in a new goroutine to
				avoid deadlocks due to synchronous balancer state updates.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-MetricsRecorder"><label for="balancerWrapper-fold-method-MetricsRecorder">( balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/balancer.go.html#line-182">MetricsRecorder</a>() <a href="../experimental/stats.html">estats</a>.<a href="../experimental/stats.html#name-MetricsRecorder">MetricsRecorder</a></label><span id='balancerWrapper-fold-method-MetricsRecorder-docs' class="fold-docs">
<span class="md-text">				MetricsRecorder provides the metrics recorder that balancers can use to
				record metrics. Balancer implementations which do not register metrics on
				metrics registry and record on them can ignore this method. The returned
				MetricsRecorder is guaranteed to never be nil.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-NewSubConn"><label for="balancerWrapper-fold-method-NewSubConn">( balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/balancer.go.html#line-146">NewSubConn</a>([]<a href="../resolver.html">resolver</a>.<a href="../resolver.html#name-Address">Address</a>, <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-NewSubConnOptions">NewSubConnOptions</a>) (<a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-SubConn">SubConn</a>, <a href="../../../builtin.html#name-error">error</a>)</label><span id='balancerWrapper-fold-method-NewSubConn-docs' class="fold-docs">
<span class="md-text">				NewSubConn is called by balancer to create a new SubConn.
				It doesn't block and wait for the connections to be established.
				Behaviors of the SubConn can be controlled by options.
				
				Deprecated: please be aware that in a future version, SubConns will only
				support one address per SubConn.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-RemoveSubConn"><label for="balancerWrapper-fold-method-RemoveSubConn">( balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/balancer.go.html#line-151">RemoveSubConn</a>(<a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-SubConn">SubConn</a>)</label><span id='balancerWrapper-fold-method-RemoveSubConn-docs' class="fold-docs">
<span class="md-text">				RemoveSubConn removes the SubConn from ClientConn.
				The SubConn will be shutdown.
				
				Deprecated: use SubConn.Shutdown instead.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-ResolveNow"><label for="balancerWrapper-fold-method-ResolveNow">( balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/balancer.go.html#line-171">ResolveNow</a>(<a href="../resolver.html">resolver</a>.<a href="../resolver.html#name-ResolveNowOptions">ResolveNowOptions</a>)</label><span id='balancerWrapper-fold-method-ResolveNow-docs' class="fold-docs">
<span class="md-text">				ResolveNow is called by balancer to notify gRPC to do a name resolving.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-Target"><label for="balancerWrapper-fold-method-Target">( balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/balancer.go.html#line-176">Target</a>() <a href="../../../builtin.html#name-string">string</a></label><span id='balancerWrapper-fold-method-Target-docs' class="fold-docs">
<span class="md-text">				Target returns the dial target for this ClientConn.
				
				Deprecated: Use the Target field in the BuildOptions instead.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-UpdateAddresses"><label for="balancerWrapper-fold-method-UpdateAddresses">( balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/balancer.go.html#line-161">UpdateAddresses</a>(<a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-SubConn">SubConn</a>, []<a href="../resolver.html">resolver</a>.<a href="../resolver.html#name-Address">Address</a>)</label><span id='balancerWrapper-fold-method-UpdateAddresses-docs' class="fold-docs">
<span class="md-text">				UpdateAddresses updates the addresses used in the passed in SubConn.
				gRPC checks if the currently connected address is still in the new list.
				If so, the connection will be kept. Else, the connection will be
				gracefully closed, and a new connection will be created.
				
				This may trigger a state transition for the SubConn.
				
				Deprecated: this method will be removed.  Create new SubConns for new
				addresses instead.</span>
</span></span><span>
			<span class="nodocs">(*balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-351">UpdateState</a>(state <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-State">State</a>)</span></span>
			<input type='checkbox' checked class="showhide" id="balancerWrapper-showhide-methods"><i><label for="balancerWrapper-showhide-methods" class="show-inline">/* 4 unexporteds ... */</label><label for="balancerWrapper-showhide-methods" class="hide-inline">/* 4 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-closeLocked"><label for="balancerWrapper-fold-method-closeLocked">(*balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-382">closeLocked</a>()</label><span id='balancerWrapper-fold-method-closeLocked-docs' class="fold-docs">
<span class="md-text">				closeLocked closes the child balancer. Callers must hold the child mutext of
				the parent endpointsharding balancer.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs">( balancerWrapper) <a href="../../../../src/google.golang.org/grpc/internal/internal.go.html#line-286">enforceClientConnEmbedding</a>()</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-387">resolverErrorLocked</a>(err <a href="../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="balancerWrapper-fold-method-updateClientConnStateLocked"><label for="balancerWrapper-fold-method-updateClientConnStateLocked">(*balancerWrapper) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-376">updateClientConnStateLocked</a>(ccs <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-ClientConnState">ClientConnState</a>) <a href="../../../builtin.html#name-error">error</a></label><span id='balancerWrapper-fold-method-updateClientConnStateLocked-docs' class="fold-docs">
<span class="md-text">				updateClientConnStateLocked delivers the ClientConnState to the child
				balancer. Callers must hold the child mutex of the parent endpointsharding
				balancer.</span>
</span></i></span></span>
		<input type='checkbox' class="fold" id="balancerWrapper-fold-impls"><label for="balancerWrapper-fold-impls">Implements (<i>at least 4, all are exported</i>)</label><span id='balancerWrapper-fold-impls-items' class="fold-items"><span>
			*balancerWrapper : <a href="#name-ExitIdler">ExitIdler</a></span><span>
			*balancerWrapper : google.golang.org/grpc/balancer.<a href="../balancer.html#name-ClientConn">ClientConn</a></span><span>
			*balancerWrapper : google.golang.org/grpc/balancer.<a href="../balancer.html#name-ExitIdler">ExitIdler</a></span><span>
			 balancerWrapper : google.golang.org/grpc/internal.<a href="../internal.html#name-EnforceClientConnEmbedding">EnforceClientConnEmbedding</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-endpointSharding" data-popularity="450">	<input type='checkbox' class="fold" id="endpointSharding-fold-content"><label for="endpointSharding-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..endpointSharding^02a32.html">type</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-93">endpointSharding</a> <i>(struct)</i></label><span id='endpointSharding-fold-content-docs' class="fold-docs">
<span class="md-text">		endpointSharding is a balancer that wraps child balancers. It creates a child
		balancer with child config for every unique Endpoint received. It updates the
		child states on any update from parent or child.</span>

		<input type='checkbox' class="fold" id="endpointSharding-fold-fields"><label for="endpointSharding-fold-fields">Fields (<i>total 8, none are exported</i>)</label><span id='endpointSharding-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="endpointSharding-showhide-fields"><i><label for="endpointSharding-showhide-fields" class="show-inline">/* 8 unexporteds ... */</label><label for="endpointSharding-showhide-fields" class="hide-inline">/* 8 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-95">bOpts</a> <i><a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-BuildOptions">BuildOptions</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-94">cc</a> <i><a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-ClientConn">ClientConn</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-97">childBuilder</a> <i><a href="#name-ChildBuilderFunc">ChildBuilderFunc</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="endpointSharding-fold-field-childMu"><label for="endpointSharding-fold-field-childMu"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-102">childMu</a> <i><a href="../../../sync.html">sync</a>.<a href="../../../sync.html#name-Mutex">Mutex</a></i></label><span id='endpointSharding-fold-field-childMu-docs' class="fold-docs">
<span class="md-text">				childMu synchronizes calls to any single child. It must be held for all
				calls into a child. To avoid deadlocks, do not acquire childMu while
				holding mu.</span>
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-103">children</a> <i><a href="../../../sync/atomic.html">atomic</a>.<a href="../../../sync/atomic.html#name-Pointer">Pointer</a>[<a href="../resolver.html">resolver</a>.<a href="../resolver.html#name-EndpointMap">EndpointMap</a>[*<a href="#name-balancerWrapper">balancerWrapper</a>]]</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-96">esOpts</a> <i><a href="#name-Options">Options</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="endpointSharding-fold-field-inhibitChildUpdates"><label for="endpointSharding-fold-field-inhibitChildUpdates"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-108">inhibitChildUpdates</a> <i><a href="../../../sync/atomic.html">atomic</a>.<a href="../../../sync/atomic.html#name-Bool">Bool</a></i></label><span id='endpointSharding-fold-field-inhibitChildUpdates-docs' class="fold-docs">
<span class="md-text">				inhibitChildUpdates is set during UpdateClientConnState/ResolverError
				calls (calls to children will each produce an update, only want one
				update).</span>
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="endpointSharding-fold-field-mu"><label for="endpointSharding-fold-field-mu"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-114">mu</a> <i><a href="../../../sync.html">sync</a>.<a href="../../../sync.html#name-Mutex">Mutex</a></i></label><span id='endpointSharding-fold-field-mu-docs' class="fold-docs">
<span class="md-text">				mu synchronizes access to the state stored in balancerWrappers in the
				children field. mu must not be held during calls into a child since
				synchronous calls back from the child may require taking mu, causing a
				deadlock. To avoid deadlocks, do not acquire childMu while holding mu.</span>
</span></i></span></span>
		<input type='checkbox' class="fold" id="endpointSharding-fold-methods"><label for="endpointSharding-fold-methods">Methods (<i>total 6, in which 5 are exported</i>)</label><span id='endpointSharding-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*endpointSharding) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-224">Close</a>()</span></span><span>
			<span class="nodocs">(*endpointSharding) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-233">ExitIdle</a>()</span></span><span>
			<input type='checkbox' class="fold" id="endpointSharding-fold-method-ResolverError"><label for="endpointSharding-fold-method-ResolverError">(*endpointSharding) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-206">ResolverError</a>(err <a href="../../../builtin.html#name-error">error</a>)</label><span id='endpointSharding-fold-method-ResolverError-docs' class="fold-docs">
<span class="md-text">				ResolverError forwards the resolver error to all of the endpointSharding's
				children and sends a single synchronous update of the childStates at the end
				of the ResolverError operation.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="endpointSharding-fold-method-UpdateClientConnState"><label for="endpointSharding-fold-method-UpdateClientConnState">(*endpointSharding) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-138">UpdateClientConnState</a>(state <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-ClientConnState">ClientConnState</a>) <a href="../../../builtin.html#name-error">error</a></label><span id='endpointSharding-fold-method-UpdateClientConnState-docs' class="fold-docs">
<span class="md-text">				UpdateClientConnState creates a child for new endpoints and deletes children
				for endpoints that are no longer present. It also updates all the children,
				and sends a single synchronous update of the childrens' aggregated state at
				the end of the UpdateClientConnState operation. If any endpoint has no
				addresses it will ignore that endpoint. Otherwise, returns first error found
				from a child, but fully processes the new update.</span>
</span></span><span>
			<span class="nodocs">(*endpointSharding) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-220">UpdateSubConnState</a>(<a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-SubConn">SubConn</a>, <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-SubConnState">SubConnState</a>)</span></span>
			<input type='checkbox' checked class="showhide" id="endpointSharding-showhide-methods"><i><label for="endpointSharding-showhide-methods" class="show-inline">/* one unexported ... */</label><label for="endpointSharding-showhide-methods" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="endpointSharding-fold-method-updateState"><label for="endpointSharding-fold-method-updateState">(*endpointSharding) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-246">updateState</a>()</label><span id='endpointSharding-fold-method-updateState-docs' class="fold-docs">
<span class="md-text">				updateState updates this component's state. It sends the aggregated state,
				and a picker with round robin behavior with all the child states present if
				needed.</span>
</span></i></span></span>
		<input type='checkbox' class="fold" id="endpointSharding-fold-impls"><label for="endpointSharding-fold-impls">Implements (<i>at least 3, all are exported</i>)</label><span id='endpointSharding-fold-impls-items' class="fold-items"><span>
			*endpointSharding : <a href="#name-ExitIdler">ExitIdler</a></span><span>
			*endpointSharding : google.golang.org/grpc/balancer.<a href="../balancer.html#name-Balancer">Balancer</a></span><span>
			*endpointSharding : google.golang.org/grpc/balancer.<a href="../balancer.html#name-ExitIdler">ExitIdler</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-pickerWithChildStates" data-popularity="100">	<input type='checkbox' class="fold" id="pickerWithChildStates-fold-content"><label for="pickerWithChildStates-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..pickerWithChildStates^ae51a.html">type</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-310">pickerWithChildStates</a> <i>(struct)</i></label><span id='pickerWithChildStates-fold-content-docs' class="fold-docs">
<span class="md-text">		pickerWithChildStates delegates to the pickers it holds in a round robin
		fashion. It also contains the childStates of all the endpointSharding's
		children.</span>

		<input type='checkbox' class="fold" id="pickerWithChildStates-fold-fields"><label for="pickerWithChildStates-fold-fields">Fields (<i>total 3, none are exported</i>)</label><span id='pickerWithChildStates-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="pickerWithChildStates-showhide-fields"><i><label for="pickerWithChildStates-showhide-fields" class="show-inline">/* 3 unexporteds ... */</label><label for="pickerWithChildStates-showhide-fields" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-312">childStates</a> <i>[]<a href="#name-ChildState">ChildState</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-313">next</a> <i><a href="../../../builtin.html#name-uint32">uint32</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-311">pickers</a> <i>[]<a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-Picker">Picker</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="pickerWithChildStates-fold-methods"><label for="pickerWithChildStates-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='pickerWithChildStates-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*pickerWithChildStates) <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-316">Pick</a>(info <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-PickInfo">PickInfo</a>) (<a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-PickResult">PickResult</a>, <a href="../../../builtin.html#name-error">error</a>)</span></span></span>
		<input type='checkbox' class="fold" id="pickerWithChildStates-fold-impls"><label for="pickerWithChildStates-fold-impls">Implements (<i>at least one exported</i>)</label><span id='pickerWithChildStates-fold-impls-items' class="fold-items"><span>
			*pickerWithChildStates : google.golang.org/grpc/balancer.<a href="../balancer.html#name-Picker">Picker</a></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 3, in which 2 are exported)</i></span></span>

<div class="anchor value-res" id="name-ChildStatesFromPicker">	<input type='checkbox' class="fold" id="ChildStatesFromPicker-fold-content"><label for="ChildStatesFromPicker-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..ChildStatesFromPicker.html">func</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-324">ChildStatesFromPicker</a>(picker <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-Picker">Picker</a>) []<a href="#name-ChildState">ChildState</a></label><span id='ChildStatesFromPicker-fold-content-docs' class="fold-docs">
<span class="md-text">		ChildStatesFromPicker returns the state of all the children managed by the
		endpoint sharding balancer that created this picker.</span>

</span></div><div class="anchor value-res" id="name-NewBalancer">	<input type='checkbox' class="fold" id="NewBalancer-fold-content"><label for="NewBalancer-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..NewBalancer.html">func</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-79">NewBalancer</a>(cc <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-ClientConn">ClientConn</a>, opts <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-BuildOptions">BuildOptions</a>, childBuilder <a href="#name-ChildBuilderFunc">ChildBuilderFunc</a>, esOpts <a href="#name-Options">Options</a>) <a href="../balancer.html">balancer</a>.<a href="../balancer.html#name-Balancer">Balancer</a></label><span id='NewBalancer-fold-content-docs' class="fold-docs">
<span class="md-text">		NewBalancer returns a load balancing policy that manages homogeneous child
		policies each owning a single endpoint. The endpointsharding balancer
		forwards the LoadBalancingConfig in ClientConn state updates to its children.</span>

</span></div>	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* one unexported ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* one unexported: */</label></i><div class="anchor value-res hidden" id="name-rotateEndpoints"><i>	<input type='checkbox' class="fold" id="rotateEndpoints-fold-content"><label for="rotateEndpoints-fold-content"> <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..rotateEndpoints^cf86d.html">func</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-119">rotateEndpoints</a>(es []<a href="../resolver.html">resolver</a>.<a href="../resolver.html#name-Endpoint">Endpoint</a>) []<a href="../resolver.html">resolver</a>.<a href="../resolver.html#name-Endpoint">Endpoint</a></label><span id='rotateEndpoints-fold-content-docs' class="fold-docs">
<span class="md-text">		rotateEndpoints returns a slice of all the input endpoints rotated a random
		amount.</span>

</span></i></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (only one, which is unexported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-variables-showhide"><i><label for="unexported-variables-showhide" class="show-inline">/* one unexported ... */</label><label for="unexported-variables-showhide" class="hide-inline">/* one unexported: */</label></i><div class="anchor value-res hidden" id="name-randIntN"><i>	<span class="nodocs">  <a href="../../../../use/google.golang.org/grpc/balancer/endpointsharding..randIntN^275be.html">var</a> <a href="../../../../src/google.golang.org/grpc/balancer/endpointsharding/endpointsharding.go.html#line-40">randIntN</a> func(n <a href="../../../builtin.html#name-int">int</a>) <a href="../../../builtin.html#name-int">int</a></span></i></div></div></code></pre><pre id="footer">
The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.7.6</i>. (GOOS=linux GOARCH=amd64)</pre>