<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: weak</title>
<link href="../css/auto-v0.7.6.css" rel="stylesheet">
<script src="../jvs/golds-v0.7.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>weak</b></span>

<span class="title">Import Path</span>
	<a href="../index.html#pkg-weak">weak</a><i> (on <a href="https://pkg.go.dev/weak" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../dep/weak.html">3 packages</a>, and imported by <a href="../dep/weak.html#imported-by">3 packages</a>

<div id="files"><span class="title">Involved Source Files</span>

	<input type='checkbox' checked class="fold" id="file-0-fold-content"><label for="file-0-fold-content">  <a href="../src/weak/doc.go.html#doc">d</a> <a href="../src/weak/doc.go.html">doc.go</a></label><span id='file-0-fold-content-items' class="fold-items">
<span class="md-text">		Package weak provides ways to safely reference memory weakly,
		that is, without preventing its reclamation.</span>
</span>
	<span class="nodocs">    <a href="../src/weak/pointer.go.html">pointer.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (only one, which is exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-Pointer" data-popularity="235">	<input type='checkbox' class="fold" id="Pointer-fold-content"><label for="Pointer-fold-content"> <a href="../use/weak..Pointer.html">type</a> <a href="../src/weak/pointer.go.html#line-60">Pointer</a>[T] <i>(struct)</i></label><span id='Pointer-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-any">any</a>

<span class="md-text">		Pointer is a weak pointer to a value of type T.
		
		Just like regular pointers, Pointer may reference any part of an
		object, such as a field of a struct or an element of an array.
		Objects that are only pointed to by weak pointers are not considered
		reachable, and once the object becomes unreachable, [Pointer.Value]
		may return nil.
		
		The primary use-cases for weak pointers are for implementing caches,
		canonicalization maps (like the unique package), and for tying together
		the lifetimes of separate values (for example, through a map with weak
		keys).
		
		Two Pointer values compare equal if and only if the pointers from which they
		were created compare equal.
		This property is maintained even after the object referenced by the pointer
		used to create a weak reference is reclaimed.
		If multiple weak pointers are made to different offsets within the same object
		(for example, pointers to different fields of the same struct), those pointers
		will not compare equal.
		In other words, weak pointers map to objects and offsets within those
		objects, not plain addresses.
		If a weak pointer is created from an object that becomes unreachable, but is
		then resurrected due to a finalizer, that weak pointer will not compare equal
		with weak pointers created after the resurrection.
		
		Calling [Make] with a nil pointer returns a weak pointer whose [Pointer.Value]
		always returns nil. The zero value of a Pointer behaves as if it were created
		by passing nil to [Make] and compares equal with such pointers.
		
		[Pointer.Value] is not guaranteed to eventually return nil.
		[Pointer.Value] may return nil as soon as the object becomes
		unreachable.
		Values stored in global variables, or that can be found by tracing
		pointers from a global variable, are reachable. A function argument or
		receiver may become unreachable at the last point where the function
		mentions it. To ensure [Pointer.Value] does not return nil,
		pass a pointer to the object to the [runtime.KeepAlive] function after
		the last point where the object must remain reachable.
		
		Note that because [Pointer.Value] is not guaranteed to eventually return
		nil, even after an object is no longer referenced, the runtime is allowed to
		perform a space-saving optimization that batches objects together in a single
		allocation slot. The weak pointer for an unreferenced object in such an
		allocation may never become nil if it always exists in the same batch as a
		referenced object. Typically, this batching only happens for tiny
		(on the order of 16 bytes or less) and pointer-free objects.</span>

		<input type='checkbox' class="fold" id="Pointer-fold-fields"><label for="Pointer-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='Pointer-fold-fields-items' class="fold-items">
			<input type='checkbox' class="showhide" id="Pointer-showhide-fields"><i><label for="Pointer-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="Pointer-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../src/weak/pointer.go.html#line-64">u</a> <i><a href="unsafe.html">unsafe</a>.<a href="unsafe.html#name-Pointer">Pointer</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="Pointer-fold-methods"><label for="Pointer-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='Pointer-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Pointer-fold-method-Value"><label for="Pointer-fold-method-Value">( Pointer[T]) <a href="../src/weak/pointer.go.html#line-85">Value</a>() *T</label><span id='Pointer-fold-method-Value-docs' class="fold-docs">
<span class="md-text">				Value returns the original pointer used to create the weak pointer.
				It returns nil if the value pointed to by the original pointer was reclaimed by
				the garbage collector.
				If a weak pointer points to an object with a finalizer, then Value will
				return nil as soon as the object's finalizer is queued for execution.</span>
</span></span></span>
		<input type='checkbox' class="fold" id="Pointer-fold-results"><label for="Pointer-fold-results">As Outputs Of (<i>at least 2, in which 1 is exported</i>)</label><span id='Pointer-fold-results-items' class="fold-items"><span>
			func <a href="#name-Make">Make</a>[T](ptr *T) <b>Pointer</b>[T]</span>
			<input type='checkbox' class="showhide" id="Pointer-showhide-inputofs"><i><label for="Pointer-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="Pointer-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func unique.<a href="unique.html#name-newEntryNode">newEntryNode</a>[T](key T, hash <a href="builtin.html#name-uintptr">uintptr</a>) (*<a href="unique.html">unique</a>.<a href="unique.html#name-entry">entry</a>[T], *T, <b>Pointer</b>[T])</i></span></span>
		<input type='checkbox' class="fold" id="Pointer-fold-params"><label for="Pointer-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='Pointer-fold-params-items' class="fold-items">
			<input type='checkbox' class="showhide" id="Pointer-showhide-outputofs"><i><label for="Pointer-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="Pointer-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func crypto/internal/fips140cache.(*<a href="crypto/internal/fips140cache.html#name-Cache">Cache</a>)[K, V].<a href="../src/crypto/internal/fips140cache/cache.go.html#line-50">evict</a>(p <b>Pointer</b>[K])</i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 3, in which 1 is exported)</i></span></span>

<div class="anchor value-res" id="name-Make">	<input type='checkbox' class="fold" id="Make-fold-content"><label for="Make-fold-content"> <a href="../use/weak..Make.html">func</a> <a href="../src/weak/pointer.go.html#line-68">Make</a>[T](ptr *T) <a href="#name-Pointer">Pointer</a>[T]</label><span id='Make-fold-content-docs' class="fold-docs">

		Type Parameters:
			T: <a href="builtin.html#name-any">any</a>

<span class="md-text">		Make creates a weak pointer from a pointer to some value of type T.</span>

</span></div>	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 2 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 2 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-runtime_makeStrongFromWeak"><i>	<span class="nodocs"> <a href="../use/weak..runtime_makeStrongFromWeak^1344b.html">func</a> <a href="../src/weak/pointer.go.html#line-98">runtime_makeStrongFromWeak</a>(<a href="unsafe.html">unsafe</a>.<a href="unsafe.html#name-Pointer">Pointer</a>) <a href="unsafe.html">unsafe</a>.<a href="unsafe.html#name-Pointer">Pointer</a></span></i></div><div class="anchor value-res hidden" id="name-runtime_registerWeakPointer"><i>	<span class="nodocs"> <a href="../use/weak..runtime_registerWeakPointer^2ec9e.html">func</a> <a href="../src/weak/pointer.go.html#line-95">runtime_registerWeakPointer</a>(<a href="unsafe.html">unsafe</a>.<a href="unsafe.html#name-Pointer">Pointer</a>) <a href="unsafe.html">unsafe</a>.<a href="unsafe.html#name-Pointer">Pointer</a></span></i></div></div></code></pre><pre id="footer">
The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.7.6</i>. (GOOS=linux GOARCH=amd64)</pre>